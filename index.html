<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Sarthi CRM System</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <style>
        :root {
            --primary-color: #343a40;
            --secondary-color: #6c757d;
            --accent-color: #0d6efd;
            --success-color: #198754;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
            --light-color: #f8f9fa;
            --dark-color: #212529;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f5f5;
        }
        
        .sidebar {
            height: 100vh;
            background-color: var(--primary-color);
            color: white;
            position: fixed;
            top: 0;
            left: 0;
            width: 250px;
            z-index: 1000;
            overflow-y: auto;
            transition: all 0.3s;
        }
        
        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .sidebar-menu {
            padding: 20px 0;
        }
        
        .sidebar-menu .nav-link {
            color: rgba(255, 255, 255, 0.8);
            padding: 12px 20px;
            display: flex;
            align-items: center;
            transition: all 0.3s;
        }
        
        .sidebar-menu .nav-link:hover {
            color: white;
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .sidebar-menu .nav-link.active {
            color: white;
            background-color: var(--accent-color);
            border-left: 4px solid white;
        }
        
        .sidebar-menu .nav-link i {
            margin-right: 10px;
            font-size: 18px;
        }
        
        .sidebar-submenu {
            padding-left: 50px;
            display: none;
        }
        
        .sidebar-submenu.show {
            display: block;
        }
        
        .sidebar-submenu .nav-link {
            padding: 8px 20px;
            font-size: 0.9rem;
        }
        
        .main-content {
            margin-left: 250px;
            padding: 20px;
            transition: all 0.3s;
        }
        
        .topbar {
            background-color: white;
            padding: 15px 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .content-section {
            display: none;
        }
        
        .content-section.active {
            display: block;
        }
        
        .card {
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            margin-bottom: 20px;
            border: none;
        }
        
        .card-header {
            background-color: white;
            border-bottom: 1px solid #eee;
            padding: 15px 20px;
            font-weight: 600;
        }
        
        .table th {
            border-top: none;
            font-weight: 600;
            color: var(--secondary-color);
        }
        
        .btn-primary {
            background-color: var(--accent-color);
            border-color: var(--accent-color);
        }
        
        .btn-primary:hover {
            background-color: #0b5ed7;
            border-color: #0a58ca;
        }
        
        .status-badge {
            font-size: 0.75rem;
            padding: 4px 8px;
            border-radius: 4px;
        }
        
        .status-paid {
            background-color: #d1e7dd;
            color: #0f5132;
        }
        
        .status-pending {
            background-color: #fff3cd;
            color: #664d03;
        }
        
        .form-step {
            display: none;
        }
        
        .form-step.active {
            display: block;
        }
        
        .step-indicator {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
        }
        
        .step {
            flex: 1;
            text-align: center;
            position: relative;
        }
        
        .step::before {
            content: '';
            position: absolute;
            top: 15px;
            left: 0;
            right: 0;
            height: 2px;
            background-color: #e9ecef;
            z-index: -1;
        }
        
        .step:last-child::before {
            display: none;
        }
        
        .step-circle {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: #e9ecef;
            color: #6c757d;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 5px;
            font-weight: 600;
        }
        
        .step.active .step-circle {
            background-color: var(--accent-color);
            color: white;
        }
        
        .step.completed .step-circle {
            background-color: var(--success-color);
            color: white;
        }
        
        .mobile-menu-toggle {
            display: none;
            background: none;
            border: none;
            color: var(--primary-color);
            font-size: 24px;
        }
        
        @media (max-width: 768px) {
            .sidebar {
                width: 0;
                overflow: hidden;
            }
            
            .sidebar.show {
                width: 250px;
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .mobile-menu-toggle {
                display: block;
            }
        }
        
        .banner {
            background-color: #e9f5ff;
            padding: 10px 15px;
            border-radius: 6px;
            margin-bottom: 15px;
            color: var(--accent-color);
            font-weight: 500;
        }
        
        .portal-card {
            transition: transform 0.3s;
            cursor: pointer;
            height: 100%;
        }
        
        .portal-card:hover {
            transform: translateY(-5px);
        }
        
        .feature-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }
        
        .whatsapp-btn {
            background-color: #25D366;
            color: white;
            border: none;
        }
        
        .whatsapp-btn:hover {
            background-color: #128C7E;
            color: white;
        }
        
        .modal-header {
            background-color: var(--primary-color);
            color: white;
        }
        
        .modal-header .btn-close {
            filter: invert(1);
        }
        
        .invoice-details {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .invoice-details h5 {
            border-bottom: 1px solid #dee2e6;
            padding-bottom: 10px;
            margin-bottom: 15px;
        }
        
        .invoice-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        
        .invoice-total {
            border-top: 1px solid #dee2e6;
            padding-top: 10px;
            margin-top: 10px;
            font-weight: bold;
        }
        
        .line-up-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
            overflow-x: auto;
            padding-bottom: 5px;
        }
        
        .line-up-item {
            flex: 1;
            min-width: 120px;
            text-align: center;
            padding: 10px;
            border: 1px solid #ddd;
            margin: 0 5px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
        }
        
        .line-up-item:hover {
            background-color: #f0f0f0;
        }
        
        .line-up-item.active {
            background-color: var(--accent-color);
            color: white;
            border-color: var(--accent-color);
        }
        
        .action-buttons {
            display: flex;
            gap: 5px;
            flex-wrap: nowrap;
            justify-content: center;
        }
        
        .action-buttons button {
            padding: 0.25rem 0.5rem;
            font-size: 0.75rem;
            min-width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .table-responsive {
            overflow-x: auto;
        }
        
        .table th, .table td {
            white-space: nowrap;
        }
        
        @media (max-width: 768px) {
            .table th, .table td {
                font-size: 0.8rem;
                padding: 0.5rem;
            }
            
            .action-buttons {
                flex-direction: row;
                flex-wrap: wrap;
                gap: 3px;
            }
            
            .action-buttons button {
                min-width: 28px;
                height: 28px;
                padding: 0.2rem;
            }
        }
        
        .date-filter {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .date-filter input {
            margin-right: 10px;
        }
        
        .tax-option {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .tax-option input {
            margin-right: 5px;
        }
        
        .engineer-assignment {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .engineer-assignment select {
            margin-right: 10px;
        }
        
        .file-upload {
            position: relative;
            display: inline-block;
            cursor: pointer;
            width: 100%;
        }
        
        .file-upload input[type=file] {
            position: absolute;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }
        
        .file-upload-label {
            display: block;
            padding: 10px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            background-color: #f8f9fa;
            text-align: center;
        }
        
        .file-upload:hover .file-upload-label {
            background-color: #e9ecef;
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h4 class="mb-0">Business Sarthi CRM</h4>
            <small>Tejasvi Electronics</small>
        </div>
        <div class="sidebar-menu">
            <ul class="nav flex-column">
                <li class="nav-item">
                    <a class="nav-link active" href="#" data-section="dashboard">
                        <i class="bi bi-speedometer2"></i> Dashboard
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" data-section="sales">
                        <i class="bi bi-cart-check"></i> Sales
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" data-toggle="service-submenu">
                        <i class="bi bi-tools"></i> Service <i class="bi bi-chevron-down ms-auto"></i>
                    </a>
                    <ul class="sidebar-submenu" id="service-submenu">
                        <li class="nav-item">
                            <a class="nav-link" href="#" data-section="service">
                                <i class="bi bi-wrench-adjustable"></i> Service Management
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" data-section="lead-automations">
                                <i class="bi bi-diagram-3"></i> Lead Automations
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" data-section="import-export">
                                <i class="bi bi-arrow-left-right"></i> Import/Export
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#" data-section="amc-contract">
                                <i class="bi bi-card-checklist"></i> AMC Contract
                            </a>
                        </li>
                    </ul>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" data-section="inventory">
                        <i class="bi bi-box-seam"></i> Inventory
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" data-section="purchase">
                        <i class="bi bi-receipt"></i> Purchase Orders
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" data-section="subscription">
                        <i class="bi bi-credit-card"></i> Subscription Plans
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" data-section="shipment">
                        <i class="bi bi-truck"></i> Shipment
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" data-section="receivables">
                        <i class="bi bi-cash-stack"></i> Receivables
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" data-section="claims">
                        <i class="bi bi-exclamation-triangle"></i> Claims
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" data-section="branches">
                        <i class="bi bi-building"></i> Branches
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" data-section="reports">
                        <i class="bi bi-file-earmark-bar-graph"></i> Reports
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" data-section="marketing">
                        <i class="bi bi-megaphone"></i> Marketing
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" data-section="ai-support">
                        <i class="bi bi-robot"></i> AI Support
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" data-section="engineer-app">
                        <i class="bi bi-phone"></i> Engineer App
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#" data-section="settings">
                        <i class="bi bi-gear"></i> Settings
                    </a>
                </li>
            </ul>
        </div>
    </div>
    <!-- Main Content -->
    <div class="main-content">
        <!-- Topbar -->
        <div class="topbar">
            <div class="d-flex align-items-center">
                <button class="mobile-menu-toggle me-3" id="mobileMenuToggle">
                    <i class="bi bi-list"></i>
                </button>
                <h4 class="mb-0">Welcome, Tejasvi Electronics</h4>
            </div>
            <div class="d-flex align-items-center">
                <div class="me-3">
                    <i class="bi bi-bell"></i>
                </div>
                <div>
                    <i class="bi bi-person-circle"></i>
                </div>
            </div>
        </div>
        <!-- Banner -->
        <div class="banner">
            <i class="bi bi-megaphone-fill me-2"></i> Special promotion: Get 10% off on all electronics this month!
        </div>
        <!-- Dashboard Section -->
        <div class="content-section active" id="dashboard">
            <div class="row">
                <div class="col-md-3">
                    <div class="card">
                        <div class="card-body">
                            <div class="d-flex justify-content-between">
                                <div>
                                    <h6 class="text-muted">Total Sales</h6>
                                    <h4>₹2,10,000</h4>
                                </div>
                                <div class="align-self-center">
                                    <i class="bi bi-cart-check-fill text-primary fs-1"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card">
                        <div class="card-body">
                            <div class="d-flex justify-content-between">
                                <div>
                                    <h6 class="text-muted">Service Requests</h6>
                                    <h4>45</h4>
                                </div>
                                <div class="align-self-center">
                                    <i class="bi bi-tools text-warning fs-1"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card">
                        <div class="card-body">
                            <div class="d-flex justify-content-between">
                                <div>
                                    <h6 class="text-muted">Inventory Items</h6>
                                    <h4>1,250</h4>
                                </div>
                                <div class="align-self-center">
                                    <i class="bi bi-box-seam text-success fs-1"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="card">
                        <div class="card-body">
                            <div class="d-flex justify-content-between">
                                <div>
                                    <h6 class="text-muted">Pending Payments</h6>
                                    <h4>₹45,000</h4>
                                </div>
                                <div class="align-self-center">
                                    <i class="bi bi-cash-stack text-danger fs-1"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-8">
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">Recent Sales</h5>
                            <button class="btn btn-sm btn-outline-primary">View All</button>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Date</th>
                                            <th>Invoice No</th>
                                            <th>Customer</th>
                                            <th>Amount</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>23-Aug-2025</td>
                                            <td>11IVSB1</td>
                                            <td>shailendra gupta</td>
                                            <td>₹21,000</td>
                                            <td><span class="status-badge status-paid">Paid</span></td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary view-invoice" data-invoice="11IVSB1">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary print-invoice" data-invoice="11IVSB1">
                                                        <i class="bi bi-printer"></i>
                                                    </button>
                                                    <button class="btn btn-sm whatsapp-btn" data-customer="shailendra gupta" data-mobile="92022202207" data-invoice="11IVSB1">
                                                        <i class="bi bi-whatsapp"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>22-Aug-2025</td>
                                            <td>11IVSB0</td>
                                            <td>rajesh kumar</td>
                                            <td>₹15,500</td>
                                            <td><span class="status-badge status-paid">Paid</span></td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary view-invoice" data-invoice="11IVSB0">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary print-invoice" data-invoice="11IVSB0">
                                                        <i class="bi bi-printer"></i>
                                                    </button>
                                                    <button class="btn btn-sm whatsapp-btn" data-customer="rajesh kumar" data-mobile="9876543210" data-invoice="11IVSB0">
                                                        <i class="bi bi-whatsapp"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>21-Aug-2025</td>
                                            <td>11IVSA9</td>
                                            <td>amit singh</td>
                                            <td>₹32,000</td>
                                            <td><span class="status-badge status-pending">Pending</span></td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary view-invoice" data-invoice="11IVSA9">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary print-invoice" data-invoice="11IVSA9">
                                                        <i class="bi bi-printer"></i>
                                                    </button>
                                                    <button class="btn btn-sm whatsapp-btn" data-customer="amit singh" data-mobile="8765432109" data-invoice="11IVSA9">
                                                        <i class="bi bi-whatsapp"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card">
                        <div class="card-header">
                            <h5 class="mb-0">Service Status</h5>
                        </div>
                        <div class="card-body">
                            <div class="d-flex justify-content-between mb-3">
                                <span>Pending</span>
                                <span class="badge bg-warning text-dark">12</span>
                            </div>
                            <div class="d-flex justify-content-between mb-3">
                                <span>In Progress</span>
                                <span class="badge bg-primary">18</span>
                            </div>
                            <div class="d-flex justify-content-between mb-3">
                                <span>Completed</span>
                                <span class="badge bg-success">15</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Sales Section -->
        <div class="content-section" id="sales">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">Sales Management</h5>
                    <div>
                        <button class="btn btn-primary" id="generateInvoiceBtn">
                            <i class="bi bi-plus-circle me-1"></i> Generate Invoice
                        </button>
                        <button class="btn btn-outline-secondary ms-2" id="newQuotationBtn">
                            <i class="bi bi-file-earmark-text me-1"></i> New Quotation
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <!-- Line up items for better organization -->
                    <div class="line-up-container">
                        <div class="line-up-item active" data-tab="invoices">
                            <i class="bi bi-file-earmark-text"></i>
                            <div>Invoices</div>
                        </div>
                        <div class="line-up-item" data-tab="orders">
                            <i class="bi bi-cart-check"></i>
                            <div>Orders</div>
                        </div>
                        <div class="line-up-item" data-tab="quotations">
                            <i class="bi bi-file-earmark-break"></i>
                            <div>Quotations</div>
                        </div>
                        <div class="line-up-item" data-tab="payments">
                            <i class="bi bi-cash"></i>
                            <div>Payments</div>
                        </div>
                        <div class="line-up-item" data-tab="receivables">
                            <i class="bi bi-wallet2"></i>
                            <div>Receivables</div>
                        </div>
                    </div>
                    
                    <!-- Sales Tabs Content -->
                    <div class="tab-content mt-3" id="salesTabsContent">
                        <!-- Invoices Tab -->
                        <div class="tab-pane fade show active" id="invoices" role="tabpanel">
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <div class="input-group">
                                        <input type="text" class="form-control" placeholder="Search invoices...">
                                        <button class="btn btn-outline-secondary" type="button">
                                            <i class="bi bi-search"></i>
                                        </button>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <select class="form-select">
                                        <option>All Status</option>
                                        <option>Paid</option>
                                        <option>Pending</option>
                                        <option>Cancelled</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Date</th>
                                            <th>Type</th>
                                            <th>Invoice No</th>
                                            <th>Mobile</th>
                                            <th>Customer</th>
                                            <th>Email</th>
                                            <th>Total Amount</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>23-Aug-2025</td>
                                            <td>SALE</td>
                                            <td>11IVSB1</td>
                                            <td>92022202207</td>
                                            <td>shailendra gupta</td>
                                            <td>shailendra@gmail.com</td>
                                            <td>₹21,000</td>
                                            <td><span class="status-badge status-paid">Paid</span></td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary me-1 view-invoice" data-invoice="11IVSB1">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary print-invoice" data-invoice="11IVSB1">
                                                        <i class="bi bi-printer"></i>
                                                    </button>
                                                    <button class="btn btn-sm whatsapp-btn" data-customer="shailendra gupta" data-mobile="92022202207" data-invoice="11IVSB1">
                                                        <i class="bi bi-whatsapp"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>22-Aug-2025</td>
                                            <td>SALE</td>
                                            <td>11IVSB0</td>
                                            <td>9876543210</td>
                                            <td>rajesh kumar</td>
                                            <td>rajesh@example.com</td>
                                            <td>₹15,500</td>
                                            <td><span class="status-badge status-paid">Paid</span></td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary me-1 view-invoice" data-invoice="11IVSB0">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary print-invoice" data-invoice="11IVSB0">
                                                        <i class="bi bi-printer"></i>
                                                    </button>
                                                    <button class="btn btn-sm whatsapp-btn" data-customer="rajesh kumar" data-mobile="9876543210" data-invoice="11IVSB0">
                                                        <i class="bi bi-whatsapp"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>21-Aug-2025</td>
                                            <td>SALE</td>
                                            <td>11IVSA9</td>
                                            <td>8765432109</td>
                                            <td>amit singh</td>
                                            <td>amit@example.com</td>
                                            <td>₹32,000</td>
                                            <td><span class="status-badge status-pending">Pending</span></td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary me-1 view-invoice" data-invoice="11IVSA9">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary print-invoice" data-invoice="11IVSA9">
                                                        <i class="bi bi-printer"></i>
                                                    </button>
                                                    <button class="btn btn-sm whatsapp-btn" data-customer="amit singh" data-mobile="8765432109" data-invoice="11IVSA9">
                                                        <i class="bi bi-whatsapp"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Sales Orders Tab -->
                        <div class="tab-pane fade" id="orders" role="tabpanel">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Order ID</th>
                                            <th>Date</th>
                                            <th>Customer</th>
                                            <th>Product</th>
                                            <th>Amount</th>
                                            <th>Status</th>
                                            <th>Delivery Date</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>ORD001</td>
                                            <td>23-Aug-2025</td>
                                            <td>shailendra gupta</td>
                                            <td>Samsung 55" LED TV</td>
                                            <td>₹45,000</td>
                                            <td><span class="status-badge bg-primary text-white">Processing</span></td>
                                            <td>25-Aug-2025</td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary me-1 view-order" data-order="ORD001">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary">
                                                        <i class="bi bi-file-earmark-text"></i> Convert to Invoice
                                                    </button>
                                                    <button class="btn btn-sm whatsapp-btn" data-customer="shailendra gupta" data-order="ORD001">
                                                        <i class="bi bi-whatsapp"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Quotations Tab -->
                        <div class="tab-pane fade" id="quotations" role="tabpanel">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Quote ID</th>
                                            <th>Date</th>
                                            <th>Customer</th>
                                            <th>Product</th>
                                            <th>Amount</th>
                                            <th>Valid Till</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Q001</td>
                                            <td>22-Aug-2025</td>
                                            <td>rajesh kumar</td>
                                            <td>LG 7kg Washing Machine</td>
                                            <td>₹25,000</td>
                                            <td>05-Sep-2025</td>
                                            <td><span class="status-badge status-pending">Pending</span></td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary me-1 view-quotation" data-quotation="Q001">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary">
                                                        <i class="bi bi-arrow-right-circle"></i> Convert to Order
                                                    </button>
                                                    <button class="btn btn-sm whatsapp-btn" data-customer="rajesh kumar" data-quote="Q001">
                                                        <i class="bi bi-whatsapp"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Payments Tab -->
                        <div class="tab-pane fade" id="payments" role="tabpanel">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Payment ID</th>
                                            <th>Date</th>
                                            <th>Invoice No</th>
                                            <th>Customer</th>
                                            <th>Amount</th>
                                            <th>Payment Mode</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>PAY001</td>
                                            <td>23-Aug-2025</td>
                                            <td>11IVSB1</td>
                                            <td>shailendra gupta</td>
                                            <td>₹21,000</td>
                                            <td>Cash</td>
                                            <td><span class="status-badge status-paid">Received</span></td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary me-1 view-payment" data-payment="PAY001">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary">
                                                        <i class="bi bi-printer"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Receivables Tab -->
                        <div class="tab-pane fade" id="receivables" role="tabpanel">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Invoice No</th>
                                            <th>Date</th>
                                            <th>Customer</th>
                                            <th>Amount</th>
                                            <th>Due Date</th>
                                            <th>Days Overdue</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>11IVSA9</td>
                                            <td>21-Aug-2025</td>
                                            <td>amit singh</td>
                                            <td>₹32,000</td>
                                            <td>05-Sep-2025</td>
                                            <td>-</td>
                                            <td><span class="status-badge status-pending">Pending</span></td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary me-1 view-receivable" data-receivable="11IVSA9">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm whatsapp-btn" data-customer="amit singh" data-invoice="11IVSA9" data-type="reminder">
                                                        <i class="bi bi-whatsapp"></i> Send Reminder
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Service Section -->
        <div class="content-section" id="service">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">Service Management</h5>
                    <div>
                        <button class="btn btn-primary" id="newServiceBtn">
                            <i class="bi bi-plus-circle me-1"></i> New Service Request
                        </button>
                        <button class="btn btn-outline-secondary ms-2" id="amcBtn">
                            <i class="bi bi-card-checklist me-1"></i> AMC Management
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <!-- Service Tabs -->
                    <ul class="nav nav-tabs" id="serviceTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="service-requests-tab" data-bs-toggle="tab" data-bs-target="#service-requests" type="button">Service Requests</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="new-call-tab" data-bs-toggle="tab" data-bs-target="#new-call" type="button">New Call</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="assign-call-tab" data-bs-toggle="tab" data-bs-target="#assign-call" type="button">Assign Call</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="pending-call-tab" data-bs-toggle="tab" data-bs-target="#pending-call" type="button">Pending Call</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="lead-inquiry-tab" data-bs-toggle="tab" data-bs-target="#lead-inquiry" type="button">Lead/Inquiry</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="amc-tab" data-bs-toggle="tab" data-bs-target="#amc" type="button">AMC Business</button>
                        </li>
                    </ul>
                    
                    <div class="tab-content mt-3" id="serviceTabsContent">
                        <!-- Service Requests Tab -->
                        <div class="tab-pane fade show active" id="service-requests" role="tabpanel">
                            <div class="d-flex justify-content-end mb-3">
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="showAmcCustomersOnly">
                                    <label class="form-check-label" for="showAmcCustomersOnly">Show AMC Customers Only</label>
                                </div>
                            </div>
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Service ID</th>
                                            <th>Date</th>
                                            <th>Customer</th>
                                            <th>Mobile</th>
                                            <th>Product</th>
                                            <th>Problem</th>
                                            <th>Status</th>
                                            <th>Assigned To</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>SR001</td>
                                            <td>23-Aug-2025</td>
                                            <td>vikram patel</td>
                                            <td>9876543210</td>
                                            <td>LED TV</td>
                                            <td>Display Issue</td>
                                            <td><span class="status-badge status-pending">Pending</span></td>
                                            <td>-</td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary me-1 view-service" data-service="SR001">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary">
                                                        <i class="bi bi-pencil"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>SR002</td>
                                            <td>22-Aug-2025</td>
                                            <td>neha sharma</td>
                                            <td>8765432109</td>
                                            <td>Washing Machine</td>
                                            <td>Not Starting</td>
                                            <td><span class="status-badge bg-primary text-white">In Progress</span></td>
                                            <td>Rajesh Kumar</td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary me-1 view-service" data-service="SR002">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary">
                                                        <i class="bi bi-pencil"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>SR003</td>
                                            <td>21-Aug-2025</td>
                                            <td>rahul verma</td>
                                            <td>7654321098</td>
                                            <td>Refrigerator</td>
                                            <td>Cooling Issue</td>
                                            <td><span class="status-badge status-paid">Completed</span></td>
                                            <td>Vikram Patel</td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary me-1 view-service" data-service="SR003">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary">
                                                        <i class="bi bi-printer"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- New Call Tab -->
                        <div class="tab-pane fade" id="new-call" role="tabpanel">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">New Service Call</h5>
                                </div>
                                <div class="card-body">
                                    <form id="newCallForm">
                                        <div class="step-indicator">
                                            <div class="step active">
                                                <div class="step-circle">1</div>
                                                <small>Customer Details</small>
                                            </div>
                                            <div class="step">
                                                <div class="step-circle">2</div>
                                                <small>Product Details</small>
                                            </div>
                                            <div class="step">
                                                <div class="step-circle">3</div>
                                                <small>Problem Description</small>
                                            </div>
                                        </div>
                                        
                                        <div class="form-step active" id="step1">
                                            <h6>Customer Details</h6>
                                            <div class="row mb-3">
                                                <div class="col-md-6">
                                                    <label for="customerName" class="form-label">Customer Name</label>
                                                    <input type="text" class="form-control" id="customerName" required>
                                                </div>
                                                <div class="col-md-6">
                                                    <label for="customerPhone" class="form-label">Phone</label>
                                                    <input type="tel" class="form-control" id="customerPhone" required>
                                                </div>
                                            </div>
                                            <div class="row mb-3">
                                                <div class="col-md-6">
                                                    <label for="customerEmail" class="form-label">Email</label>
                                                    <input type="email" class="form-control" id="customerEmail">
                                                </div>
                                                <div class="col-md-6">
                                                    <label for="customerAddress" class="form-label">Address</label>
                                                    <input type="text" class="form-control" id="customerAddress">
                                                </div>
                                            </div>
                                            <div class="d-flex justify-content-end">
                                                <button type="button" class="btn btn-primary next-step">Next</button>
                                            </div>
                                        </div>
                                        
                                        <div class="form-step" id="step2">
                                            <h6>Product Details</h6>
                                            <div class="row mb-3">
                                                <div class="col-md-6">
                                                    <label for="productCategory" class="form-label">Product Category</label>
                                                    <select class="form-select" id="productCategory" required>
                                                        <option value="">Select Category</option>
                                                        <option value="TV">TV</option>
                                                        <option value="Washing Machine">Washing Machine</option>
                                                        <option value="Refrigerator">Refrigerator</option>
                                                        <option value="AC">AC</option>
                                                    </select>
                                                </div>
                                                <div class="col-md-6">
                                                    <label for="productBrand" class="form-label">Brand</label>
                                                    <input type="text" class="form-control" id="productBrand" required>
                                                </div>
                                            </div>
                                            <div class="row mb-3">
                                                <div class="col-md-6">
                                                    <label for="productModel" class="form-label">Model</label>
                                                    <input type="text" class="form-control" id="productModel" required>
                                                </div>
                                                <div class="col-md-6">
                                                    <label for="purchaseDate" class="form-label">Purchase Date</label>
                                                    <input type="date" class="form-control" id="purchaseDate">
                                                </div>
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <button type="button" class="btn btn-outline-secondary prev-step">Previous</button>
                                                <button type="button" class="btn btn-primary next-step">Next</button>
                                            </div>
                                        </div>
                                        
                                        <div class="form-step" id="step3">
                                            <h6>Problem Description</h6>
                                            <div class="mb-3">
                                                <label for="problemDescription" class="form-label">Problem Description</label>
                                                <textarea class="form-control" id="problemDescription" rows="4" required></textarea>
                                            </div>
                                            <div class="row mb-3">
                                                <div class="col-md-6">
                                                    <label for="priority" class="form-label">Priority</label>
                                                    <select class="form-select" id="priority">
                                                        <option value="Low">Low</option>
                                                        <option value="Medium">Medium</option>
                                                        <option value="High">High</option>
                                                        <option value="Critical">Critical</option>
                                                    </select>
                                                </div>
                                                <div class="col-md-6">
                                                    <label for="preferredDate" class="form-label">Preferred Service Date</label>
                                                    <input type="date" class="form-control" id="preferredDate">
                                                </div>
                                            </div>
                                            <div class="d-flex justify-content-between">
                                                <button type="button" class="btn btn-outline-secondary prev-step">Previous</button>
                                                <button type="submit" class="btn btn-primary">Submit Service Request</button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Assign Call Tab -->
                        <div class="tab-pane fade" id="assign-call" role="tabpanel">
                            <div class="card mb-3">
                                <div class="card-header">
                                    <h5 class="mb-0">Assign Service Call</h5>
                                </div>
                                <div class="card-body">
                                    <form id="assignCallForm">
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label for="serviceId" class="form-label">Service ID</label>
                                                <input type="text" class="form-control" id="serviceId" readonly>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="customerNameAssign" class="form-label">Customer Name</label>
                                                <input type="text" class="form-control" id="customerNameAssign" readonly>
                                            </div>
                                        </div>
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label for="assignBranch" class="form-label">Assign to Branch</label>
                                                <select class="form-select" id="assignBranch">
                                                    <option value="">Select Branch</option>
                                                    <option value="mumbai">Mumbai</option>
                                                    <option value="pune">Pune</option>
                                                    <option value="delhi">Delhi</option>
                                                    <option value="bangalore">Bangalore</option>
                                                </select>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="assignEngineer" class="form-label">Assign to Engineer</label>
                                                <select class="form-select" id="assignEngineer">
                                                    <option value="">Select Engineer</option>
                                                    <option value="rajesh">Rajesh Kumar</option>
                                                    <option value="vikram">Vikram Patel</option>
                                                    <option value="amit">Amit Singh</option>
                                                    <option value="neha">Neha Sharma</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <label for="assignNotes" class="form-label">Notes</label>
                                            <textarea class="form-control" id="assignNotes" rows="3"></textarea>
                                        </div>
                                        <button type="submit" class="btn btn-primary">Assign Service Call</button>
                                    </form>
                                </div>
                            </div>
                            
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Service ID</th>
                                            <th>Date</th>
                                            <th>Customer</th>
                                            <th>Product</th>
                                            <th>Problem</th>
                                            <th>Priority</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>SR001</td>
                                            <td>23-Aug-2025</td>
                                            <td>vikram patel</td>
                                            <td>LED TV</td>
                                            <td>Display Issue</td>
                                            <td><span class="badge bg-warning text-dark">Medium</span></td>
                                            <td>
                                                <button class="btn btn-sm btn-primary assign-service" data-service="SR001" data-customer="vikram patel">Assign Engineer</button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Pending Call Tab -->
                        <div class="tab-pane fade" id="pending-call" role="tabpanel">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Service ID</th>
                                            <th>Date</th>
                                            <th>Customer</th>
                                            <th>Product</th>
                                            <th>Assigned To</th>
                                            <th>Days Pending</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>SR002</td>
                                            <td>22-Aug-2025</td>
                                            <td>neha sharma</td>
                                            <td>Washing Machine</td>
                                            <td>Rajesh Kumar</td>
                                            <td>2 days</td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary me-1 view-service" data-service="SR002">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary">
                                                        <i class="bi bi-telephone"></i> Follow Up
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Lead/Inquiry Tab -->
                        <div class="tab-pane fade" id="lead-inquiry" role="tabpanel">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Lead ID</th>
                                            <th>Date</th>
                                            <th>Time</th>
                                            <th>Customer</th>
                                            <th>Contact</th>
                                            <th>Source</th>
                                            <th>Product Interest</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>L001</td>
                                            <td>23-Aug-2025</td>
                                            <td>10:30 AM</td>
                                            <td>sunil verma</td>
                                            <td>9876543210</td>
                                            <td>Website</td>
                                            <td>AC</td>
                                            <td><span class="status-badge status-pending">New</span></td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary me-1 view-lead" data-lead="L001">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary">
                                                        <i class="bi bi-arrow-right-circle"></i> Convert
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- AMC Business Tab -->
                        <div class="tab-pane fade" id="amc" role="tabpanel">
                            <div class="row mb-3">
                                <div class="col-md-12">
                                    <div class="card">
                                        <div class="card-header">
                                            <h5 class="mb-0">AMC Contract Types</h5>
                                        </div>
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col-md-3 mb-3">
                                                    <div class="card h-100">
                                                        <div class="card-body text-center">
                                                            <h5 class="card-title">Basic AMC</h5>
                                                            <p class="card-text">Basic maintenance and support services</p>
                                                            <ul class="list-group list-group-flush text-start">
                                                                <li class="list-group-item">Quarterly Maintenance</li>
                                                                <li class="list-group-item">Basic Repairs</li>
                                                                <li class="list-group-item">Phone Support</li>
                                                            </ul>
                                                            <button class="btn btn-outline-primary mt-3 manage-amc" data-plan="basic">Manage Plans</button>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-3 mb-3">
                                                    <div class="card h-100">
                                                        <div class="card-body text-center">
                                                            <h5 class="card-title">Premium AMC</h5>
                                                            <p class="card-text">Enhanced maintenance with priority support</p>
                                                            <ul class="list-group list-group-flush text-start">
                                                                <li class="list-group-item">Bi-monthly Maintenance</li>
                                                                <li class="list-group-item">Priority Repairs</li>
                                                                <li class="list-group-item">Phone & Email Support</li>
                                                                <li class="list-group-item">Discount on Spares</li>
                                                            </ul>
                                                            <button class="btn btn-outline-primary mt-3 manage-amc" data-plan="premium">Manage Plans</button>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-3 mb-3">
                                                    <div class="card h-100">
                                                        <div class="card-body text-center">
                                                            <h5 class="card-title">Silver AMC</h5>
                                                            <p class="card-text">Comprehensive maintenance package</p>
                                                            <ul class="list-group list-group-flush text-start">
                                                                <li class="list-group-item">Monthly Maintenance</li>
                                                                <li class="list-group-item">Free Repairs</li>
                                                                <li class="list-group-item">24/7 Support</li>
                                                                <li class="list-group-item">Discount on Spares</li>
                                                                <li class="list-group-item">Annual Health Check</li>
                                                            </ul>
                                                            <button class="btn btn-outline-primary mt-3 manage-amc" data-plan="silver">Manage Plans</button>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-3 mb-3">
                                                    <div class="card h-100">
                                                        <div class="card-body text-center">
                                                            <h5 class="card-title">Gold AMC</h5>
                                                            <p class="card-text">Premium all-inclusive maintenance</p>
                                                            <ul class="list-group list-group-flush text-start">
                                                                <li class="list-group-item">Bi-weekly Maintenance</li>
                                                                <li class="list-group-item">Free Repairs & Spares</li>
                                                                <li class="list-group-item">24/7 Priority Support</li>
                                                                <li class="list-group-item">Free Annual Health Check</li>
                                                                <li class="list-group-item">Replacement Guarantee</li>
                                                            </ul>
                                                            <button class="btn btn-outline-primary mt-3 manage-amc" data-plan="gold">Manage Plans</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h5 class="mb-0">Active AMC Contracts</h5>
                                    <button class="btn btn-primary" id="newAmcBtn">
                                        <i class="bi bi-plus-circle me-1"></i> New AMC Contract
                                    </button>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover">
                                            <thead>
                                                <tr>
                                                    <th>Contract ID</th>
                                                    <th>Customer</th>
                                                    <th>Product</th>
                                                    <th>Plan Type</th>
                                                    <th>Start Date</th>
                                                    <th>End Date</th>
                                                    <th>Amount</th>
                                                    <th>Status</th>
                                                    <th>Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>AMC001</td>
                                                    <td>Vikram Patel</td>
                                                    <td>Samsung LED TV</td>
                                                    <td><span class="badge bg-warning text-dark">Basic</span></td>
                                                    <td>01-Jan-2025</td>
                                                    <td>31-Dec-2025</td>
                                                    <td>₹5,000</td>
                                                    <td><span class="status-badge status-paid">Active</span></td>
                                                    <td>
                                                        <div class="action-buttons">
                                                            <button class="btn btn-sm btn-outline-primary me-1 view-amc" data-contract="AMC001">
                                                                <i class="bi bi-eye"></i>
                                                            </button>
                                                            <button class="btn btn-sm btn-outline-secondary edit-amc" data-contract="AMC001">
                                                                <i class="bi bi-pencil"></i>
                                                            </button>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>AMC002</td>
                                                    <td>Neha Sharma</td>
                                                    <td>LG Washing Machine</td>
                                                    <td><span class="badge bg-secondary">Silver</span></td>
                                                    <td>15-Feb-2025</td>
                                                    <td>14-Feb-2026</td>
                                                    <td>₹8,500</td>
                                                    <td><span class="status-badge status-paid">Active</span></td>
                                                    <td>
                                                        <div class="action-buttons">
                                                            <button class="btn btn-sm btn-outline-primary me-1 view-amc" data-contract="AMC002">
                                                                <i class="bi bi-eye"></i>
                                                            </button>
                                                            <button class="btn btn-sm btn-outline-secondary edit-amc" data-contract="AMC002">
                                                                <i class="bi bi-pencil"></i>
                                                            </button>
                                                        </div>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Lead Automations Section -->
        <div class="content-section" id="lead-automations">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">Lead Automation Portals</h5>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-4 mb-3">
                            <div class="card portal-card">
                                <div class="card-body text-center">
                                    <i class="bi bi-telephone-fill feature-icon text-primary"></i>
                                    <h5 class="mt-3">JustDial</h5>
                                    <p class="text-muted">Configure JustDial integration</p>
                                    <button class="btn btn-outline-primary configure-portal" data-portal="justdial">Configure</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="card portal-card">
                                <div class="card-body text-center">
                                    <i class="bi bi-facebook feature-icon text-primary"></i>
                                    <h5 class="mt-3">Facebook</h5>
                                    <p class="text-muted">Configure Facebook integration</p>
                                    <button class="btn btn-outline-primary configure-portal" data-portal="facebook">Configure</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="card portal-card">
                                <div class="card-body text-center">
                                    <i class="bi bi-google feature-icon text-primary"></i>
                                    <h5 class="mt-3">Google Forms</h5>
                                    <p class="text-muted">Configure Google Forms integration</p>
                                    <button class="btn btn-outline-primary configure-portal" data-portal="googleforms">Configure</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="card portal-card">
                                <div class="card-body text-center">
                                    <i class="bi bi-search feature-icon text-primary"></i>
                                    <h5 class="mt-3">Google Direct</h5>
                                    <p class="text-muted">Configure Google Direct integration</p>
                                    <button class="btn btn-outline-primary configure-portal" data-portal="googledirect">Configure</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="card portal-card">
                                <div class="card-body text-center">
                                    <i class="bi bi-whatsapp feature-icon text-success"></i>
                                    <h5 class="mt-3">WhatsApp</h5>
                                    <p class="text-muted">Configure WhatsApp integration</p>
                                    <button class="btn btn-outline-primary configure-portal" data-portal="whatsapp">Configure</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="card portal-card">
                                <div class="card-body text-center">
                                    <i class="bi bi-globe feature-icon text-primary"></i>
                                    <h5 class="mt-3">Website</h5>
                                    <p class="text-muted">Configure Website integration</p>
                                    <button class="btn btn-outline-primary configure-portal" data-portal="website">Configure</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="card portal-card">
                                <div class="card-body text-center">
                                    <i class="bi bi-wordpress feature-icon text-primary"></i>
                                    <h5 class="mt-3">WordPress</h5>
                                    <p class="text-muted">Configure WordPress integration</p>
                                    <button class="btn btn-outline-primary configure-portal" data-portal="wordpress">Configure</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3">
                            <div class="card portal-card">
                                <div class="card-body text-center">
                                    <i class="bi bi-three-dots feature-icon text-primary"></i>
                                    <h5 class="mt-3">Others</h5>
                                    <p class="text-muted">Configure other integrations</p>
                                    <button class="btn btn-outline-primary configure-portal" data-portal="others">Configure</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="card mt-4">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">Import/Export Leads</h5>
                    <div>
                        <button class="btn btn-primary" id="importLeadsBtn">
                            <i class="bi bi-download me-1"></i> Import Leads
                        </button>
                        <button class="btn btn-outline-secondary ms-2" id="exportLeadsBtn">
                            <i class="bi bi-upload me-1"></i> Export Leads
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Date</th>
                                    <th>Time</th>
                                    <th>Month</th>
                                    <th>Year</th>
                                    <th>Customer</th>
                                    <th>Contact</th>
                                    <th>Source Platform</th>
                                    <th>Lead Generated</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>L001</td>
                                    <td>23-Aug-2025</td>
                                    <td>10:30 AM</td>
                                    <td>August</td>
                                    <td>2025</td>
                                    <td>Rahul Sharma</td>
                                    <td>9876543210</td>
                                    <td>JustDial</td>
                                    <td>23-Aug-2025 10:30 AM</td>
                                    <td><span class="status-badge status-pending">New</span></td>
                                    <td>
                                        <div class="action-buttons">
                                            <button class="btn btn-sm btn-outline-primary me-1">
                                                <i class="bi bi-eye"></i>
                                            </button>
                                            <button class="btn btn-sm btn-success me-1">
                                                <i class="bi bi-whatsapp"></i>
                                            </button>
                                            <button class="btn btn-sm btn-outline-secondary">
                                                <i class="bi bi-arrow-right-circle"></i> Convert
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>L002</td>
                                    <td>22-Aug-2025</td>
                                    <td>2:45 PM</td>
                                    <td>August</td>
                                    <td>2025</td>
                                    <td>Priya Singh</td>
                                    <td>priya@example.com</td>
                                    <td>Website</td>
                                    <td>22-Aug-2025 2:45 PM</td>
                                    <td><span class="status-badge bg-primary text-white">Contacted</span></td>
                                    <td>
                                        <div class="action-buttons">
                                            <button class="btn btn-sm btn-outline-primary me-1">
                                                <i class="bi bi-eye"></i>
                                            </button>
                                            <button class="btn btn-sm btn-success me-1">
                                                <i class="bi bi-whatsapp"></i>
                                            </button>
                                            <button class="btn btn-sm btn-outline-secondary">
                                                <i class="bi bi-arrow-right-circle"></i> Convert
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <!-- Import/Export Section -->
        <div class="content-section" id="import-export">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">Import/Export Leads</h5>
                    <div>
                        <button class="btn btn-primary" id="importLeadsBtn2">
                            <i class="bi bi-download me-1"></i> Import Leads
                        </button>
                        <button class="btn btn-outline-secondary ms-2" id="exportLeadsBtn2">
                            <i class="bi bi-upload me-1"></i> Export Leads
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <div class="row mb-4">
                        <div class="col-md-12">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Import Leads</h5>
                                </div>
                                <div class="card-body">
                                    <form id="importLeadsForm">
                                        <div class="mb-3">
                                            <label for="importFile" class="form-label">Select File</label>
                                            <div class="file-upload">
                                                <input type="file" class="form-control" id="importFile" accept=".csv,.xlsx">
                                                <label for="importFile" class="file-upload-label">
                                                    <i class="bi bi-cloud-upload me-2"></i> Choose file or drag here
                                                </label>
                                            </div>
                                            <div class="form-text">Supported formats: CSV, Excel</div>
                                        </div>
                                        <div class="mb-3">
                                            <label for="importSource" class="form-label">Source Platform</label>
                                            <select class="form-select" id="importSource">
                                                <option value="">Select Source</option>
                                                <option value="justdial">JustDial</option>
                                                <option value="facebook">Facebook</option>
                                                <option value="googleforms">Google Forms</option>
                                                <option value="googledirect">Google Direct</option>
                                                <option value="whatsapp">WhatsApp</option>
                                                <option value="website">Website</option>
                                                <option value="wordpress">WordPress</option>
                                                <option value="others">Others</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="importHeader">
                                                <label class="form-check-label" for="importHeader">
                                                    File has header row
                                                </label>
                                            </div>
                                        </div>
                                        <button type="submit" class="btn btn-primary">Import Leads</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-12">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Export Leads</h5>
                                </div>
                                <div class="card-body">
                                    <form id="exportLeadsForm">
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label for="exportStartDate" class="form-label">Start Date</label>
                                                <input type="date" class="form-control" id="exportStartDate">
                                            </div>
                                            <div class="col-md-6">
                                                <label for="exportEndDate" class="form-label">End Date</label>
                                                <input type="date" class="form-control" id="exportEndDate">
                                            </div>
                                        </div>
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label for="exportSource" class="form-label">Source Platform</label>
                                                <select class="form-select" id="exportSource">
                                                    <option value="">All Sources</option>
                                                    <option value="justdial">JustDial</option>
                                                    <option value="facebook">Facebook</option>
                                                    <option value="googleforms">Google Forms</option>
                                                    <option value="googledirect">Google Direct</option>
                                                    <option value="whatsapp">WhatsApp</option>
                                                    <option value="website">Website</option>
                                                    <option value="wordpress">WordPress</option>
                                                    <option value="others">Others</option>
                                                </select>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="exportFormat" class="form-label">Export Format</label>
                                                <select class="form-select" id="exportFormat">
                                                    <option value="csv">CSV</option>
                                                    <option value="xlsx">Excel</option>
                                                    <option value="pdf">PDF</option>
                                                </select>
                                            </div>
                                        </div>
                                        <button type="submit" class="btn btn-primary">Export Leads</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- AMC Contract Section -->
        <div class="content-section" id="amc-contract">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">AMC Contract Management</h5>
                    <button class="btn btn-primary" id="newAmcContractBtn">
                        <i class="bi bi-plus-circle me-1"></i> New AMC Contract
                    </button>
                </div>
                <div class="card-body">
                    <div class="row mb-4">
                        <div class="col-md-12">
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">AMC Contract Types</h5>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-3 mb-3">
                                            <div class="card h-100">
                                                <div class="card-body text-center">
                                                    <h5 class="card-title">Basic AMC</h5>
                                                    <p class="card-text">Basic maintenance and support services</p>
                                                    <ul class="list-group list-group-flush text-start">
                                                        <li class="list-group-item">Quarterly Maintenance</li>
                                                        <li class="list-group-item">Basic Repairs</li>
                                                        <li class="list-group-item">Phone Support</li>
                                                    </ul>
                                                    <button class="btn btn-outline-primary mt-3 manage-amc-contract" data-plan="basic">Manage Plans</button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3 mb-3">
                                            <div class="card h-100">
                                                <div class="card-body text-center">
                                                    <h5 class="card-title">Premium AMC</h5>
                                                    <p class="card-text">Enhanced maintenance with priority support</p>
                                                    <ul class="list-group list-group-flush text-start">
                                                        <li class="list-group-item">Bi-monthly Maintenance</li>
                                                        <li class="list-group-item">Priority Repairs</li>
                                                        <li class="list-group-item">Phone & Email Support</li>
                                                        <li class="list-group-item">Discount on Spares</li>
                                                    </ul>
                                                    <button class="btn btn-outline-primary mt-3 manage-amc-contract" data-plan="premium">Manage Plans</button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3 mb-3">
                                            <div class="card h-100">
                                                <div class="card-body text-center">
                                                    <h5 class="card-title">Silver AMC</h5>
                                                    <p class="card-text">Comprehensive maintenance package</p>
                                                    <ul class="list-group list-group-flush text-start">
                                                        <li class="list-group-item">Monthly Maintenance</li>
                                                        <li class="list-group-item">Free Repairs</li>
                                                        <li class="list-group-item">24/7 Support</li>
                                                        <li class="list-group-item">Discount on Spares</li>
                                                        <li class="list-group-item">Annual Health Check</li>
                                                    </ul>
                                                    <button class="btn btn-outline-primary mt-3 manage-amc-contract" data-plan="silver">Manage Plans</button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-3 mb-3">
                                            <div class="card h-100">
                                                <div class="card-body text-center">
                                                    <h5 class="card-title">Gold AMC</h5>
                                                    <p class="card-text">Premium all-inclusive maintenance</p>
                                                    <ul class="list-group list-group-flush text-start">
                                                        <li class="list-group-item">Bi-weekly Maintenance</li>
                                                        <li class="list-group-item">Free Repairs & Spares</li>
                                                        <li class="list-group-item">24/7 Priority Support</li>
                                                        <li class="list-group-item">Free Annual Health Check</li>
                                                        <li class="list-group-item">Replacement Guarantee</li>
                                                    </ul>
                                                    <button class="btn btn-outline-primary mt-3 manage-amc-contract" data-plan="gold">Manage Plans</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">Active AMC Contracts</h5>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Contract ID</th>
                                            <th>Customer</th>
                                            <th>Product</th>
                                            <th>Plan Type</th>
                                            <th>Start Date</th>
                                            <th>End Date</th>
                                            <th>Amount</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>AMC001</td>
                                            <td>Vikram Patel</td>
                                            <td>Samsung LED TV</td>
                                            <td><span class="badge bg-warning text-dark">Basic</span></td>
                                            <td>01-Jan-2025</td>
                                            <td>31-Dec-2025</td>
                                            <td>₹5,000</td>
                                            <td><span class="status-badge status-paid">Active</span></td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary me-1 view-amc" data-contract="AMC001">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary edit-amc" data-contract="AMC001">
                                                        <i class="bi bi-pencil"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>AMC002</td>
                                            <td>Neha Sharma</td>
                                            <td>LG Washing Machine</td>
                                            <td><span class="badge bg-secondary">Silver</span></td>
                                            <td>15-Feb-2025</td>
                                            <td>14-Feb-2026</td>
                                            <td>₹8,500</td>
                                            <td><span class="status-badge status-paid">Active</span></td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary me-1 view-amc" data-contract="AMC002">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary edit-amc" data-contract="AMC002">
                                                        <i class="bi bi-pencil"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Purchase Orders Section -->
        <div class="content-section" id="purchase">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">Purchase Orders Management</h5>
                    <button class="btn btn-primary" id="newPurchaseOrderBtn">
                        <i class="bi bi-plus-circle me-1"></i> New Purchase Order
                    </button>
                </div>
                <div class="card-body">
                    <!-- Purchase Orders Tabs -->
                    <ul class="nav nav-tabs" id="purchaseTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="pro-order-tab" data-bs-toggle="tab" data-bs-target="#pro-order" type="button">Pro Order</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="confirm-order-tab" data-bs-toggle="tab" data-bs-target="#confirm-order" type="button">Confirm Order</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="received-order-tab" data-bs-toggle="tab" data-bs-target="#received-order" type="button">Received Order</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="return-material-tab" data-bs-toggle="tab" data-bs-target="#return-material" type="button">Return Material</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="payable-tab" data-bs-toggle="tab" data-bs-target="#payable" type="button">Payable</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="purchase-reports-tab" data-bs-toggle="tab" data-bs-target="#purchase-reports" type="button">Reports</button>
                        </li>
                    </ul>
                    
                    <div class="tab-content mt-3" id="purchaseTabsContent">
                        <!-- Pro Order Tab -->
                        <div class="tab-pane fade show active" id="pro-order" role="tabpanel">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Order ID</th>
                                            <th>Date</th>
                                            <th>Supplier</th>
                                            <th>Product</th>
                                            <th>Quantity</th>
                                            <th>Amount</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>PO001</td>
                                            <td>23-Aug-2025</td>
                                            <td>ElectroParts Ltd.</td>
                                            <td>LED Panels</td>
                                            <td>10</td>
                                            <td>₹25,000</td>
                                            <td><span class="status-badge status-pending">Pending</span></td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary me-1 view-purchase-order" data-purchase-order="PO001">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary">
                                                        <i class="bi bi-check-circle"></i> Confirm
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Confirm Order Tab -->
                        <div class="tab-pane fade" id="confirm-order" role="tabpanel">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Order ID</th>
                                            <th>Date</th>
                                            <th>Supplier</th>
                                            <th>Product</th>
                                            <th>Quantity</th>
                                            <th>Amount</th>
                                            <th>Expected Delivery</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>PO002</td>
                                            <td>22-Aug-2025</td>
                                            <td>TechSupply Co.</td>
                                            <td>AC Compressors</td>
                                            <td>5</td>
                                            <td>₹35,000</td>
                                            <td>30-Aug-2025</td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary me-1 view-purchase-order" data-purchase-order="PO002">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary">
                                                        <i class="bi bi-truck"></i> Mark Received
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Received Order Tab -->
                        <div class="tab-pane fade" id="received-order" role="tabpanel">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Order ID</th>
                                            <th>Date</th>
                                            <th>Supplier</th>
                                            <th>Product</th>
                                            <th>Ordered Qty</th>
                                            <th>Received Qty</th>
                                            <th>Amount</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>PO003</td>
                                            <td>20-Aug-2025</td>
                                            <td>HomeAppliances Inc.</td>
                                            <td>Washing Machine Motors</td>
                                            <td>15</td>
                                            <td>15</td>
                                            <td>₹45,000</td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary me-1 view-purchase-order" data-purchase-order="PO003">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary">
                                                        <i class="bi bi-check-circle"></i> Process Payment
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Return Material Tab -->
                        <div class="tab-pane fade" id="return-material" role="tabpanel">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Return ID</th>
                                            <th>Order ID</th>
                                            <th>Date</th>
                                            <th>Supplier</th>
                                            <th>Product</th>
                                            <th>Quantity</th>
                                            <th>Reason</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>RM001</td>
                                            <td>PO004</td>
                                            <td>21-Aug-2025</td>
                                            <td>ElectroParts Ltd.</td>
                                            <td>LED Panels</td>
                                            <td>2</td>
                                            <td>Defective</td>
                                            <td><span class="status-badge bg-primary text-white">Processing</span></td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary me-1 view-return" data-return="RM001">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary">
                                                        <i class="bi bi-pencil"></i> Edit
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Payable Tab -->
                        <div class="tab-pane fade" id="payable" role="tabpanel">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Invoice ID</th>
                                            <th>Order ID</th>
                                            <th>Supplier</th>
                                            <th>Amount</th>
                                            <th>Due Date</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>INV001</td>
                                            <td>PO005</td>
                                            <td>TechSupply Co.</td>
                                            <td>₹28,000</td>
                                            <td>05-Sep-2025</td>
                                            <td><span class="status-badge status-pending">Pending</span></td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary me-1 view-payable" data-payable="INV001">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary">
                                                        <i class="bi bi-cash"></i> Process Payment
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Purchase Reports Tab -->
                        <div class="tab-pane fade" id="purchase-reports" role="tabpanel">
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Purchase Summary</h5>
                                            <p class="card-text">Complete purchase analysis</p>
                                            <button class="btn btn-primary w-100 download-report" data-report="purchase-summary">
                                                <i class="bi bi-download me-1"></i> Download Report
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Supplier Performance</h5>
                                            <p class="card-text">Supplier performance metrics</p>
                                            <button class="btn btn-primary w-100 download-report" data-report="supplier-performance">
                                                <i class="bi bi-download me-1"></i> Download Report
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Purchase Returns</h5>
                                            <p class="card-text">Analysis of returned items</p>
                                            <button class="btn btn-primary w-100 download-report" data-report="purchase-returns">
                                                <i class="bi bi-download me-1"></i> Download Report
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Claims Management Section -->
        <div class="content-section" id="claims">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">Claims Management</h5>
                    <button class="btn btn-primary" id="newClaimBtn">
                        <i class="bi bi-plus-circle me-1"></i> New Claim
                    </button>
                </div>
                <div class="card-body">
                    <!-- Claims Tabs -->
                    <ul class="nav nav-tabs" id="claimsTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="engineer-claim-tab" data-bs-toggle="tab" data-bs-target="#engineer-claim" type="button">Engineer Claim</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="branch-claim-tab" data-bs-toggle="tab" data-bs-target="#branch-claim" type="button">Branch Claim</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="approved-claim-tab" data-bs-toggle="tab" data-bs-target="#approved-claim" type="button">Approved Claim</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="reject-claim-tab" data-bs-toggle="tab" data-bs-target="#reject-claim" type="button">Reject Claim</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="repeat60-claim-tab" data-bs-toggle="tab" data-bs-target="#repeat60-claim" type="button">Repeat 60 Days</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="repeat90-claim-tab" data-bs-toggle="tab" data-bs-target="#repeat90-claim" type="button">Repeat 90 Days</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="repeat180-claim-tab" data-bs-toggle="tab" data-bs-target="#repeat180-claim" type="button">Repeat 180 Days</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="claims-reports-tab" data-bs-toggle="tab" data-bs-target="#claims-reports" type="button">Reports</button>
                        </li>
                    </ul>
                    
                    <div class="tab-content mt-3" id="claimsTabsContent">
                        <!-- Engineer Claim Tab -->
                        <div class="tab-pane fade show active" id="engineer-claim" role="tabpanel">
                            <div class="date-filter">
                                <label for="engineer-claim-date-from" class="form-label">From:</label>
                                <input type="date" class="form-control" id="engineer-claim-date-from">
                                <label for="engineer-claim-date-to" class="form-label">To:</label>
                                <input type="date" class="form-control" id="engineer-claim-date-to">
                                <button class="btn btn-primary ms-2">Filter</button>
                            </div>
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Claim ID</th>
                                            <th>Date</th>
                                            <th>Engineer</th>
                                            <th>Service ID</th>
                                            <th>Customer</th>
                                            <th>Amount</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>EC001</td>
                                            <td>23-Aug-2025</td>
                                            <td>Rajesh Kumar</td>
                                            <td>SR001</td>
                                            <td>Vikram Patel</td>
                                            <td>₹1,500</td>
                                            <td><span class="status-badge status-pending">Pending</span></td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary me-1 view-claim" data-claim="EC001">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary">
                                                        <i class="bi bi-check-circle"></i> Approve
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-danger">
                                                        <i class="bi bi-x-circle"></i> Reject
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Branch Claim Tab -->
                        <div class="tab-pane fade" id="branch-claim" role="tabpanel">
                            <div class="date-filter">
                                <label for="branch-claim-date-from" class="form-label">From:</label>
                                <input type="date" class="form-control" id="branch-claim-date-from">
                                <label for="branch-claim-date-to" class="form-label">To:</label>
                                <input type="date" class="form-control" id="branch-claim-date-to">
                                <button class="btn btn-primary ms-2">Filter</button>
                            </div>
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Claim ID</th>
                                            <th>Date</th>
                                            <th>Branch</th>
                                            <th>Service ID</th>
                                            <th>Customer</th>
                                            <th>Amount</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>BC001</td>
                                            <td>22-Aug-2025</td>
                                            <td>Mumbai Central</td>
                                            <td>SR002</td>
                                            <td>Neha Sharma</td>
                                            <td>₹2,000</td>
                                            <td><span class="status-badge status-pending">Pending</span></td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary me-1 view-claim" data-claim="BC001">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary">
                                                        <i class="bi bi-check-circle"></i> Approve
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-danger">
                                                        <i class="bi bi-x-circle"></i> Reject
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Approved Claim Tab -->
                        <div class="tab-pane fade" id="approved-claim" role="tabpanel">
                            <div class="date-filter">
                                <label for="approved-claim-date-from" class="form-label">From:</label>
                                <input type="date" class="form-control" id="approved-claim-date-from">
                                <label for="approved-claim-date-to" class="form-label">To:</label>
                                <input type="date" class="form-control" id="approved-claim-date-to">
                                <button class="btn btn-primary ms-2">Filter</button>
                            </div>
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Claim ID</th>
                                            <th>Date</th>
                                            <th>Engineer/Branch</th>
                                            <th>Service ID</th>
                                            <th>Customer</th>
                                            <th>Amount</th>
                                            <th>Approved Date</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>AC001</td>
                                            <td>21-Aug-2025</td>
                                            <td>Rajesh Kumar</td>
                                            <td>SR003</td>
                                            <td>Rahul Verma</td>
                                            <td>₹1,200</td>
                                            <td>22-Aug-2025</td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary me-1 view-claim" data-claim="AC001">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary">
                                                        <i class="bi bi-printer"></i> Print
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Reject Claim Tab -->
                        <div class="tab-pane fade" id="reject-claim" role="tabpanel">
                            <div class="date-filter">
                                <label for="reject-claim-date-from" class="form-label">From:</label>
                                <input type="date" class="form-control" id="reject-claim-date-from">
                                <label for="reject-claim-date-to" class="form-label">To:</label>
                                <input type="date" class="form-control" id="reject-claim-date-to">
                                <button class="btn btn-primary ms-2">Filter</button>
                            </div>
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Claim ID</th>
                                            <th>Date</th>
                                            <th>Engineer/Branch</th>
                                            <th>Service ID</th>
                                            <th>Customer</th>
                                            <th>Amount</th>
                                            <th>Reject Date</th>
                                            <th>Reason</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>RC001</td>
                                            <td>20-Aug-2025</td>
                                            <td>Vikram Patel</td>
                                            <td>SR004</td>
                                            <td>Amit Singh</td>
                                            <td>₹1,800</td>
                                            <td>21-Aug-2025</td>
                                            <td>Invalid Claim</td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary me-1 view-claim" data-claim="RC001">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Repeat 60 Days Tab -->
                        <div class="tab-pane fade" id="repeat60-claim" role="tabpanel">
                            <div class="date-filter">
                                <label for="repeat60-claim-date-from" class="form-label">From:</label>
                                <input type="date" class="form-control" id="repeat60-claim-date-from">
                                <label for="repeat60-claim-date-to" class="form-label">To:</label>
                                <input type="date" class="form-control" id="repeat60-claim-date-to">
                                <button class="btn btn-primary ms-2">Filter</button>
                            </div>
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Claim ID</th>
                                            <th>Date</th>
                                            <th>Engineer/Branch</th>
                                            <th>Service ID</th>
                                            <th>Customer</th>
                                            <th>Product</th>
                                            <th>Repeat Count</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>EC001</td>
                                            <td>23-Aug-2025</td>
                                            <td>Rajesh Kumar</td>
                                            <td>SR001</td>
                                            <td>Vikram Patel</td>
                                            <td>LED TV</td>
                                            <td>2</td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary me-1 view-claim" data-claim="EC001">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Repeat 90 Days Tab -->
                        <div class="tab-pane fade" id="repeat90-claim" role="tabpanel">
                            <div class="date-filter">
                                <label for="repeat90-claim-date-from" class="form-label">From:</label>
                                <input type="date" class="form-control" id="repeat90-claim-date-from">
                                <label for="repeat90-claim-date-to" class="form-label">To:</label>
                                <input type="date" class="form-control" id="repeat90-claim-date-to">
                                <button class="btn btn-primary ms-2">Filter</button>
                            </div>
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Claim ID</th>
                                            <th>Date</th>
                                            <th>Engineer/Branch</th>
                                            <th>Service ID</th>
                                            <th>Customer</th>
                                            <th>Product</th>
                                            <th>Repeat Count</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>EC002</td>
                                            <td>15-Jul-2025</td>
                                            <td>Vikram Patel</td>
                                            <td>SR005</td>
                                            <td>Amit Singh</td>
                                            <td>AC</td>
                                            <td>3</td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary me-1 view-claim" data-claim="EC002">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Repeat 180 Days Tab -->
                        <div class="tab-pane fade" id="repeat180-claim" role="tabpanel">
                            <div class="date-filter">
                                <label for="repeat180-claim-date-from" class="form-label">From:</label>
                                <input type="date" class="form-control" id="repeat180-claim-date-from">
                                <label for="repeat180-claim-date-to" class="form-label">To:</label>
                                <input type="date" class="form-control" id="repeat180-claim-date-to">
                                <button class="btn btn-primary ms-2">Filter</button>
                            </div>
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Claim ID</th>
                                            <th>Date</th>
                                            <th>Engineer/Branch</th>
                                            <th>Service ID</th>
                                            <th>Customer</th>
                                            <th>Product</th>
                                            <th>Repeat Count</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>EC003</td>
                                            <td>10-May-2025</td>
                                            <td>Rajesh Kumar</td>
                                            <td>SR006</td>
                                            <td>Neha Sharma</td>
                                            <td>Washing Machine</td>
                                            <td>4</td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary me-1 view-claim" data-claim="EC003">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Claims Reports Tab -->
                        <div class="tab-pane fade" id="claims-reports" role="tabpanel">
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">90 Day Reports</h5>
                                            <p class="card-text">Claims analysis for last 90 days</p>
                                            <button class="btn btn-primary w-100 download-report" data-report="90day-claims">
                                                <i class="bi bi-download me-1"></i> Download Report
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">60 Day Reports</h5>
                                            <p class="card-text">Claims analysis for last 60 days</p>
                                            <button class="btn btn-primary w-100 download-report" data-report="60day-claims">
                                                <i class="bi bi-download me-1"></i> Download Report
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">30 Day Reports</h5>
                                            <p class="card-text">Claims analysis for last 30 days</p>
                                            <button class="btn btn-primary w-100 download-report" data-report="30day-claims">
                                                <i class="bi bi-download me-1"></i> Download Report
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">180 Day Reports</h5>
                                            <p class="card-text">Claims analysis for last 180 days</p>
                                            <button class="btn btn-primary w-100 download-report" data-report="180day-claims">
                                                <i class="bi bi-download me-1"></i> Download Report
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Engineer Performance</h5>
                                            <p class="card-text">Engineer-wise claims analysis</p>
                                            <button class="btn btn-primary w-100 download-report" data-report="engineer-performance">
                                                <i class="bi bi-download me-1"></i> Download Report
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Branch Performance</h5>
                                            <p class="card-text">Branch-wise claims analysis</p>
                                            <button class="btn btn-primary w-100 download-report" data-report="branch-performance">
                                                <i class="bi bi-download me-1"></i> Download Report
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Inventory Management Section -->
        <div class="content-section" id="inventory">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="mb-0">Inventory Management</h5>
                    <div>
                        <button class="btn btn-primary" id="newCategoryBtn">
                            <i class="bi bi-plus-circle me-1"></i> New Category
                        </button>
                        <button class="btn btn-outline-secondary ms-2" id="newItemBtn">
                            <i class="bi bi-plus-circle me-1"></i> New Item
                        </button>
                    </div>
                </div>
                <div class="card-body">
                    <!-- Line up items for better organization -->
                    <div class="line-up-container">
                        <div class="line-up-item active" data-tab="categories">
                            <i class="bi bi-tags"></i>
                            <div>Categories</div>
                        </div>
                        <div class="line-up-item" data-tab="items">
                            <i class="bi bi-box"></i>
                            <div>Items</div>
                        </div>
                        <div class="line-up-item" data-tab="variants">
                            <i class="bi bi-collection"></i>
                            <div>Variants</div>
                        </div>
                        <div class="line-up-item" data-tab="stocks">
                            <i class="bi bi-archive"></i>
                            <div>Stocks</div>
                        </div>
                        <div class="line-up-item" data-tab="stock-transfer">
                            <i class="bi bi-arrow-left-right"></i>
                            <div>Stock Transfer</div>
                        </div>
                        <div class="line-up-item" data-tab="branch-stock">
                            <i class="bi bi-building"></i>
                            <div>Branch Stock</div>
                        </div>
                        <div class="line-up-item" data-tab="engineer-stock">
                            <i class="bi bi-person-workspace"></i>
                            <div>Engineer Stock</div>
                        </div>
                        <div class="line-up-item" data-tab="adjustment">
                            <i class="bi bi-sliders"></i>
                            <div>Adjustment</div>
                        </div>
                        <div class="line-up-item" data-tab="parts-history">
                            <i class="bi bi-clock-history"></i>
                            <div>Parts History</div>
                        </div>
                    </div>
                    
                    <!-- Inventory Tabs Content -->
                    <div class="tab-content mt-3" id="inventoryTabsContent">
                        <!-- Categories Tab -->
                        <div class="tab-pane fade show active" id="categories" role="tabpanel">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Category Name</th>
                                            <th>Description</th>
                                            <th>Items Count</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>CAT001</td>
                                            <td>Televisions</td>
                                            <td>LED, LCD, OLED TVs</td>
                                            <td>45</td>
                                            <td><span class="status-badge status-paid">Active</span></td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary me-1 view-category" data-category="CAT001">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary">
                                                        <i class="bi bi-pencil"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>CAT002</td>
                                            <td>Washing Machines</td>
                                            <td>Top load, Front load washers</td>
                                            <td>32</td>
                                            <td><span class="status-badge status-paid">Active</span></td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary me-1 view-category" data-category="CAT002">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary">
                                                        <i class="bi bi-pencil"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Items Tab -->
                        <div class="tab-pane fade" id="items" role="tabpanel">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Item ID</th>
                                            <th>Name</th>
                                            <th>Category</th>
                                            <th>Brand</th>
                                            <th>Model</th>
                                            <th>Price</th>
                                            <th>Stock</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>ITM001</td>
                                            <td>55" LED TV</td>
                                            <td>Televisions</td>
                                            <td>Samsung</td>
                                            <td>UE55TU8000</td>
                                            <td>₹45,000</td>
                                            <td>15</td>
                                            <td><span class="status-badge status-paid">Active</span></td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary me-1 view-item" data-item="ITM001">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary">
                                                        <i class="bi bi-pencil"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Variants Tab -->
                        <div class="tab-pane fade" id="variants" role="tabpanel">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Variant ID</th>
                                            <th>Item</th>
                                            <th>Attributes</th>
                                            <th>SKU</th>
                                            <th>Price</th>
                                            <th>Stock</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>VAR001</td>
                                            <td>55" LED TV</td>
                                            <td>Black</td>
                                            <td>SAM-LED55-BLK</td>
                                            <td>₹45,000</td>
                                            <td>10</td>
                                            <td><span class="status-badge status-paid">Active</span></td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary me-1 view-variant" data-variant="VAR001">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary">
                                                        <i class="bi bi-pencil"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Stocks Tab -->
                        <div class="tab-pane fade" id="stocks" role="tabpanel">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Item</th>
                                            <th>Warehouse</th>
                                            <th>Available</th>
                                            <th>Reserved</th>
                                            <th>Total</th>
                                            <th>Last Updated</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>55" LED TV</td>
                                            <td>Main Warehouse</td>
                                            <td>15</td>
                                            <td>3</td>
                                            <td>18</td>
                                            <td>23-Aug-2025</td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary me-1 view-stock" data-stock="ITM001">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary">
                                                        <i class="bi bi-pencil"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Stock Transfer Tab -->
                        <div class="tab-pane fade" id="stock-transfer" role="tabpanel">
                            <div class="card mb-3">
                                <div class="card-header">
                                    <h5 class="mb-0">New Stock Transfer</h5>
                                </div>
                                <div class="card-body">
                                    <form id="stockTransferForm">
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label for="transferFrom" class="form-label">From</label>
                                                <select class="form-select" id="transferFrom">
                                                    <option value="">Select Location</option>
                                                    <option value="main-warehouse">Main Warehouse</option>
                                                    <option value="mumbai-branch">Mumbai Branch</option>
                                                    <option value="pune-branch">Pune Branch</option>
                                                </select>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="transferTo" class="form-label">To</label>
                                                <select class="form-select" id="transferTo">
                                                    <option value="">Select Location</option>
                                                    <option value="main-warehouse">Main Warehouse</option>
                                                    <option value="mumbai-branch">Mumbai Branch</option>
                                                    <option value="pune-branch">Pune Branch</option>
                                                    <option value="engineer">Engineer</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label for="transferItem" class="form-label">Item</label>
                                                <input type="text" class="form-control" id="transferItem" placeholder="Search for item">
                                            </div>
                                            <div class="col-md-6">
                                                <label for="transferQuantity" class="form-label">Quantity</label>
                                                <input type="number" class="form-control" id="transferQuantity">
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <label for="transferEngineer" class="form-label">Engineer (if transferring to engineer)</label>
                                            <select class="form-select" id="transferEngineer">
                                                <option value="">Select Engineer</option>
                                                <option value="rajesh">Rajesh Kumar</option>
                                                <option value="vikram">Vikram Patel</option>
                                                <option value="amit">Amit Singh</option>
                                                <option value="neha">Neha Sharma</option>
                                            </select>
                                        </div>
                                        <div class="mb-3">
                                            <label for="transferNotes" class="form-label">Notes</label>
                                            <textarea class="form-control" id="transferNotes" rows="3"></textarea>
                                        </div>
                                        <button type="submit" class="btn btn-primary">Transfer Stock</button>
                                    </form>
                                </div>
                            </div>
                            
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Recent Transfers</h5>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover">
                                            <thead>
                                                <tr>
                                                    <th>Transfer ID</th>
                                                    <th>Date</th>
                                                    <th>From</th>
                                                    <th>To</th>
                                                    <th>Item</th>
                                                    <th>Quantity</th>
                                                    <th>Status</th>
                                                    <th>Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>TR001</td>
                                                    <td>22-Aug-2025</td>
                                                    <td>Main Warehouse</td>
                                                    <td>Mumbai Branch</td>
                                                    <td>LED Panel</td>
                                                    <td>5</td>
                                                    <td><span class="status-badge status-paid">Completed</span></td>
                                                    <td>
                                                        <button class="btn btn-sm btn-outline-primary">
                                                            <i class="bi bi-eye"></i>
                                                        </button>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>TR002</td>
                                                    <td>21-Aug-2025</td>
                                                    <td>Main Warehouse</td>
                                                    <td>Rajesh Kumar (Engineer)</td>
                                                    <td>AC Compressor</td>
                                                    <td>2</td>
                                                    <td><span class="status-badge status-paid">Completed</span></td>
                                                    <td>
                                                        <button class="btn btn-sm btn-outline-primary">
                                                            <i class="bi bi-eye"></i>
                                                        </button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Branch Stock Tab -->
                        <div class="tab-pane fade" id="branch-stock" role="tabpanel">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Branch</th>
                                            <th>Item</th>
                                            <th>Available</th>
                                            <th>Reserved</th>
                                            <th>Total</th>
                                            <th>Last Updated</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Mumbai Branch</td>
                                            <td>55" LED TV</td>
                                            <td>5</td>
                                            <td>1</td>
                                            <td>6</td>
                                            <td>23-Aug-2025</td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary me-1 view-branch-stock" data-branch-stock="MUM-ITM001">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary">
                                                        <i class="bi bi-pencil"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Engineer Stock Tab -->
                        <div class="tab-pane fade" id="engineer-stock" role="tabpanel">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Engineer</th>
                                            <th>Part</th>
                                            <th>Part ID</th>
                                            <th>Quantity</th>
                                            <th>Issued Date</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>Rajesh Kumar</td>
                                            <td>LED Panel</td>
                                            <td>PART1001</td>
                                            <td>5</td>
                                            <td>20-Aug-2025</td>
                                            <td><span class="status-badge status-paid">Active</span></td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary me-1 view-engineer-stock" data-engineer-stock="ENG-PART1001">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary">
                                                        <i class="bi bi-arrow-repeat"></i> Return
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Adjustment Tab -->
                        <div class="tab-pane fade" id="adjustment" role="tabpanel">
                            <div class="card mb-3">
                                <div class="card-header">
                                    <h5 class="mb-0">New Stock Adjustment</h5>
                                </div>
                                <div class="card-body">
                                    <form>
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label for="adjustmentType" class="form-label">Adjustment Type</label>
                                                <select class="form-select" id="adjustmentType">
                                                    <option value="increase">Increase Stock</option>
                                                    <option value="decrease">Decrease Stock</option>
                                                </select>
                                            </div>
                                            <div class="col-md-6">
                                                <label for="adjustmentReason" class="form-label">Reason</label>
                                                <select class="form-select" id="adjustmentReason">
                                                    <option value="damaged">Damaged Goods</option>
                                                    <option value="lost">Lost</option>
                                                    <option value="correction">Stock Correction</option>
                                                    <option value="other">Other</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="row mb-3">
                                            <div class="col-md-6">
                                                <label for="adjustmentItem" class="form-label">Item</label>
                                                <input type="text" class="form-control" id="adjustmentItem" placeholder="Search for item">
                                            </div>
                                            <div class="col-md-6">
                                                <label for="adjustmentQuantity" class="form-label">Quantity</label>
                                                <input type="number" class="form-control" id="adjustmentQuantity">
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <label for="adjustmentNotes" class="form-label">Notes</label>
                                            <textarea class="form-control" id="adjustmentNotes" rows="3"></textarea>
                                        </div>
                                        <button type="submit" class="btn btn-primary">Submit Adjustment</button>
                                    </form>
                                </div>
                            </div>
                            
                            <div class="card">
                                <div class="card-header">
                                    <h5 class="mb-0">Recent Adjustments</h5>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table class="table table-hover">
                                            <thead>
                                                <tr>
                                                    <th>Date</th>
                                                    <th>Item</th>
                                                    <th>Type</th>
                                                    <th>Quantity</th>
                                                    <th>Reason</th>
                                                    <th>Adjusted By</th>
                                                    <th>Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>22-Aug-2025</td>
                                                    <td>LED Panel</td>
                                                    <td><span class="badge bg-danger">Decrease</span></td>
                                                    <td>2</td>
                                                    <td>Damaged</td>
                                                    <td>Vikram Patel</td>
                                                    <td>
                                                        <button class="btn btn-sm btn-outline-primary">
                                                            <i class="bi bi-eye"></i>
                                                        </button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Parts History Tab -->
                        <div class="tab-pane fade" id="parts-history" role="tabpanel">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Date</th>
                                            <th>Service ID</th>
                                            <th>Engineer</th>
                                            <th>Part Name</th>
                                            <th>Part ID</th>
                                            <th>Quantity</th>
                                            <th>Customer</th>
                                            <th>Product</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>23-Aug-2025</td>
                                            <td>SR001</td>
                                            <td>Rajesh Kumar</td>
                                            <td>LED Panel</td>
                                            <td>PART1001</td>
                                            <td>1</td>
                                            <td>Vikram Patel</td>
                                            <td>Samsung LED TV</td>
                                        </tr>
                                        <tr>
                                            <td>22-Aug-2025</td>
                                            <td>SR002</td>
                                            <td>Vikram Patel</td>
                                            <td>Motor</td>
                                            <td>PART2034</td>
                                            <td>1</td>
                                            <td>Neha Sharma</td>
                                            <td>LG Washing Machine</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Reports & Analytics Section -->
        <div class="content-section" id="reports">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">Reports & Analytics</h5>
                </div>
                <div class="card-body">
                    <!-- Line up items for better organization -->
                    <div class="line-up-container">
                        <div class="line-up-item active" data-tab="sales-reports">
                            <i class="bi bi-cart-check"></i>
                            <div>Sales Reports</div>
                        </div>
                        <div class="line-up-item" data-tab="service-reports">
                            <i class="bi bi-tools"></i>
                            <div>Service Reports</div>
                        </div>
                        <div class="line-up-item" data-tab="inventory-reports">
                            <i class="bi bi-box-seam"></i>
                            <div>Inventory Reports</div>
                        </div>
                        <div class="line-up-item" data-tab="financial-reports">
                            <i class="bi bi-cash-stack"></i>
                            <div>Financial Reports</div>
                        </div>
                        <div class="line-up-item" data-tab="customer-reports">
                            <i class="bi bi-people"></i>
                            <div>Customer Reports</div>
                        </div>
                        <div class="line-up-item" data-tab="employee-reports">
                            <i class="bi bi-person-badge"></i>
                            <div>Employee Reports</div>
                        </div>
                    </div>
                    
                    <!-- Reports Tabs Content -->
                    <div class="tab-content mt-3" id="reportsTabsContent">
                        <!-- Sales Reports Tab -->
                        <div class="tab-pane fade show active" id="sales-reports" role="tabpanel">
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Sales Summary</h5>
                                            <p class="card-text">Complete sales analysis</p>
                                            <button class="btn btn-primary w-100 download-report" data-report="sales-summary">
                                                <i class="bi bi-download me-1"></i> Download Report
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Product-wise Sales</h5>
                                            <p class="card-text">Sales by product category</p>
                                            <button class="btn btn-primary w-100 download-report" data-report="product-sales">
                                                <i class="bi bi-download me-1"></i> Download Report
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Customer-wise Sales</h5>
                                            <p class="card-text">Sales by customer segment</p>
                                            <button class="btn btn-primary w-100 download-report" data-report="customer-sales">
                                                <i class="bi bi-download me-1"></i> Download Report
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Service Reports Tab -->
                        <div class="tab-pane fade" id="service-reports" role="tabpanel">
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Service Summary</h5>
                                            <p class="card-text">Complete service analysis</p>
                                            <button class="btn btn-primary w-100 download-report" data-report="service-summary">
                                                <i class="bi bi-download me-1"></i> Download Report
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Engineer Performance</h5>
                                            <p class="card-text">Service completion rates</p>
                                            <button class="btn btn-primary w-100 download-report" data-report="engineer-performance">
                                                <i class="bi bi-download me-1"></i> Download Report
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Service Issues</h5>
                                            <p class="card-text">Common service problems</p>
                                            <button class="btn btn-primary w-100 download-report" data-report="service-issues">
                                                <i class="bi bi-download me-1"></i> Download Report
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Inventory Reports Tab -->
                        <div class="tab-pane fade" id="inventory-reports" role="tabpanel">
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Stock Summary</h5>
                                            <p class="card-text">Complete stock summary report</p>
                                            <button class="btn btn-primary w-100 download-report" data-report="stock-summary">
                                                <i class="bi bi-download me-1"></i> Download Report
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Low Stock Items</h5>
                                            <p class="card-text">Items with low stock levels</p>
                                            <button class="btn btn-primary w-100 download-report" data-report="low-stock">
                                                <i class="bi bi-download me-1"></i> Download Report
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">High Stock Items</h5>
                                            <p class="card-text">Items with high stock levels</p>
                                            <button class="btn btn-primary w-100 download-report" data-report="high-stock">
                                                <i class="bi bi-download me-1"></i> Download Report
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Highly Used Stock</h5>
                                            <p class="card-text">Most frequently used items</p>
                                            <button class="btn btn-primary w-100 download-report" data-report="highly-used">
                                                <i class="bi bi-download me-1"></i> Download Report
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Lowly Used Stock</h5>
                                            <p class="card-text">Least frequently used items</p>
                                            <button class="btn btn-primary w-100 download-report" data-report="lowly-used">
                                                <i class="bi bi-download me-1"></i> Download Report
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Parts Usage</h5>
                                            <p class="card-text">Parts usage by engineers</p>
                                            <button class="btn btn-primary w-100 download-report" data-report="parts-usage">
                                                <i class="bi bi-download me-1"></i> Download Report
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Financial Reports Tab -->
                        <div class="tab-pane fade" id="financial-reports" role="tabpanel">
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Revenue Report</h5>
                                            <p class="card-text">Complete revenue analysis</p>
                                            <button class="btn btn-primary w-100 download-report" data-report="revenue">
                                                <i class="bi bi-download me-1"></i> Download Report
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Expense Report</h5>
                                            <p class="card-text">Complete expense analysis</p>
                                            <button class="btn btn-primary w-100 download-report" data-report="expenses">
                                                <i class="bi bi-download me-1"></i> Download Report
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Profit & Loss</h5>
                                            <p class="card-text">Profit and loss statement</p>
                                            <button class="btn btn-primary w-100 download-report" data-report="profit-loss">
                                                <i class="bi bi-download me-1"></i> Download Report
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Customer Reports Tab -->
                        <div class="tab-pane fade" id="customer-reports" role="tabpanel">
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Customer Analysis</h5>
                                            <p class="card-text">Customer behavior and trends</p>
                                            <button class="btn btn-primary w-100 download-report" data-report="customer-analysis">
                                                <i class="bi bi-download me-1"></i> Download Report
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Customer Retention</h5>
                                            <p class="card-text">Customer retention rates</p>
                                            <button class="btn btn-primary w-100 download-report" data-report="customer-retention">
                                                <i class="bi bi-download me-1"></i> Download Report
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Customer Feedback</h5>
                                            <p class="card-text">Customer satisfaction metrics</p>
                                            <button class="btn btn-primary w-100 download-report" data-report="customer-feedback">
                                                <i class="bi bi-download me-1"></i> Download Report
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Employee Reports Tab -->
                        <div class="tab-pane fade" id="employee-reports" role="tabpanel">
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Employee Performance</h5>
                                            <p class="card-text">Employee performance analysis</p>
                                            <button class="btn btn-primary w-100 download-report" data-report="employee-performance">
                                                <i class="bi bi-download me-1"></i> Download Report
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Attendance Report</h5>
                                            <p class="card-text">Employee attendance records</p>
                                            <button class="btn btn-primary w-100 download-report" data-report="attendance">
                                                <i class="bi bi-download me-1"></i> Download Report
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="card">
                                        <div class="card-body">
                                            <h5 class="card-title">Productivity Report</h5>
                                            <p class="card-text">Employee productivity metrics</p>
                                            <button class="btn btn-primary w-100 download-report" data-report="productivity">
                                                <i class="bi bi-download me-1"></i> Download Report
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- System Settings Section -->
        <div class="content-section" id="settings">
            <div class="card">
                <div class="card-header">
                    <h5 class="mb-0">System Settings</h5>
                </div>
                <div class="card-body">
                    <!-- Settings Tabs -->
                    <ul class="nav nav-tabs" id="settingsTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="user-management-tab" data-bs-toggle="tab" data-bs-target="#user-management" type="button">User Management</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="branch-settings-tab" data-bs-toggle="tab" data-bs-target="#branch-settings" type="button">Branch Settings</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="role-permissions-tab" data-bs-toggle="tab" data-bs-target="#role-permissions" type="button">Role & Permissions</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="product-settings-tab" data-bs-toggle="tab" data-bs-target="#product-settings" type="button">Product Settings</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="pin-mapping-tab" data-bs-toggle="tab" data-bs-target="#pin-mapping" type="button">PIN Mapping</button>
                        </li>
                    </ul>
                    
                    <div class="tab-content mt-3" id="settingsTabsContent">
                        <!-- User Management Tab -->
                        <div class="tab-pane fade show active" id="user-management" role="tabpanel">
                            <div class="d-flex justify-content-between mb-3">
                                <h5>User Management</h5>
                                <button class="btn btn-primary" id="addUserBtn">
                                    <i class="bi bi-person-plus me-1"></i> Add User
                                </button>
                            </div>
                            
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>User ID</th>
                                            <th>Name</th>
                                            <th>Email</th>
                                            <th>Role</th>
                                            <th>Branch</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>USR001</td>
                                            <td>Rajesh Kumar</td>
                                            <td>rajesh@example.com</td>
                                            <td><span class="badge bg-primary">Service Engineer</span></td>
                                            <td>Mumbai</td>
                                            <td><span class="status-badge status-paid">Active</span></td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary me-1 view-user" data-user="USR001">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary me-1">
                                                        <i class="bi bi-pencil"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-danger">
                                                        <i class="bi bi-trash"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>USR002</td>
                                            <td>Vikram Patel</td>
                                            <td>vikram@example.com</td>
                                            <td><span class="badge bg-success">Branch Manager</span></td>
                                            <td>Pune</td>
                                            <td><span class="status-badge status-paid">Active</span></td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary me-1 view-user" data-user="USR002">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary me-1">
                                                        <i class="bi bi-pencil"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-danger">
                                                        <i class="bi bi-trash"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Branch Settings Tab -->
                        <div class="tab-pane fade" id="branch-settings" role="tabpanel">
                            <div class="d-flex justify-content-between mb-3">
                                <h5>Branch Settings</h5>
                                <button class="btn btn-primary" id="addBranchBtn">
                                    <i class="bi bi-building-add me-1"></i> Add Branch
                                </button>
                            </div>
                            
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Branch ID</th>
                                            <th>Name</th>
                                            <th>Location</th>
                                            <th>Manager</th>
                                            <th>Contact</th>
                                            <th>Products/Services</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>BR001</td>
                                            <td>Mumbai Central</td>
                                            <td>Mumbai, Maharashtra</td>
                                            <td>Vikram Patel</td>
                                            <td>9876543210</td>
                                            <td>TV, AC, Refrigerator</td>
                                            <td><span class="status-badge status-paid">Active</span></td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary me-1 view-branch" data-branch="BR001">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary me-1">
                                                        <i class="bi bi-pencil"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-danger">
                                                        <i class="bi bi-trash"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Role & Permissions Tab -->
                        <div class="tab-pane fade" id="role-permissions" role="tabpanel">
                            <div class="d-flex justify-content-between mb-3">
                                <h5>Role & Permissions</h5>
                                <button class="btn btn-primary" id="addRoleBtn">
                                    <i class="bi bi-shield-plus me-1"></i> Add Role
                                </button>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <div class="card">
                                        <div class="card-header">
                                            <h5 class="mb-0">Administrator</h5>
                                        </div>
                                        <div class="card-body">
                                            <ul class="list-group list-group-flush">
                                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                                    Full System Access
                                                    <i class="bi bi-check-circle-fill text-success"></i>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                                    User Management
                                                    <i class="bi bi-check-circle-fill text-success"></i>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                                    Financial Reports
                                                    <i class="bi bi-check-circle-fill text-success"></i>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                                    System Settings
                                                    <i class="bi bi-check-circle-fill text-success"></i>
                                                </li>
                                            </ul>
                                            <div class="mt-3">
                                                <button class="btn btn-sm btn-outline-primary w-100 edit-role" data-role="administrator">Edit Permissions</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="card">
                                        <div class="card-header">
                                            <h5 class="mb-0">Branch Manager</h5>
                                        </div>
                                        <div class="card-body">
                                            <ul class="list-group list-group-flush">
                                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                                    Branch Management
                                                    <i class="bi bi-check-circle-fill text-success"></i>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                                    Service Management
                                                    <i class="bi bi-check-circle-fill text-success"></i>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                                    Sales Management
                                                    <i class="bi bi-check-circle-fill text-success"></i>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                                    System Settings
                                                    <i class="bi bi-x-circle-fill text-danger"></i>
                                                </li>
                                            </ul>
                                            <div class="mt-3">
                                                <button class="btn btn-sm btn-outline-primary w-100 edit-role" data-role="branch-manager">Edit Permissions</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mb-3">
                                    <div class="card">
                                        <div class="card-header">
                                            <h5 class="mb-0">Service Engineer</h5>
                                        </div>
                                        <div class="card-body">
                                            <ul class="list-group list-group-flush">
                                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                                    Service Requests
                                                    <i class="bi bi-check-circle-fill text-success"></i>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                                    Parts Management
                                                    <i class="bi bi-check-circle-fill text-success"></i>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                                    Claims Management
                                                    <i class="bi bi-check-circle-fill text-success"></i>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                                    Financial Reports
                                                    <i class="bi bi-x-circle-fill text-danger"></i>
                                                </li>
                                            </ul>
                                            <div class="mt-3">
                                                <button class="btn btn-sm btn-outline-primary w-100 edit-role" data-role="service-engineer">Edit Permissions</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Product Settings Tab -->
                        <div class="tab-pane fade" id="product-settings" role="tabpanel">
                            <div class="d-flex justify-content-between mb-3">
                                <h5>Product Settings</h5>
                                <button class="btn btn-primary" id="addProductBtn">
                                    <i class="bi bi-plus-circle me-1"></i> Add Product
                                </button>
                            </div>
                            
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Product ID</th>
                                            <th>Name</th>
                                            <th>Category</th>
                                            <th>Branch</th>
                                            <th>Serviceable</th>
                                            <th>AMC Available</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>PRD001</td>
                                            <td>Samsung 55" LED TV</td>
                                            <td>Television</td>
                                            <td>All Branches</td>
                                            <td><i class="bi bi-check-circle-fill text-success"></i></td>
                                            <td><i class="bi bi-check-circle-fill text-success"></i></td>
                                            <td><span class="status-badge status-paid">Active</span></td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary me-1 view-product" data-product="PRD001">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary me-1">
                                                        <i class="bi bi-pencil"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-danger">
                                                        <i class="bi bi-trash"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- PIN Mapping Tab -->
                        <div class="tab-pane fade" id="pin-mapping" role="tabpanel">
                            <div class="d-flex justify-content-between mb-3">
                                <h5>PIN Mapping</h5>
                                <button class="btn btn-primary" id="addPinMappingBtn">
                                    <i class="bi bi-geo-alt me-1"></i> Add PIN Mapping
                                </button>
                            </div>
                            
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>PIN Code</th>
                                            <th>Area</th>
                                            <th>City</th>
                                            <th>State</th>
                                            <th>Branch</th>
                                            <th>Engineer</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>400001</td>
                                            <td>Mumbai Central</td>
                                            <td>Mumbai</td>
                                            <td>Maharashtra</td>
                                            <td>Mumbai Central</td>
                                            <td>Rajesh Kumar</td>
                                            <td><span class="status-badge status-paid">Active</span></td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="btn btn-sm btn-outline-primary me-1 view-pin-mapping" data-pin-mapping="400001">
                                                        <i class="bi bi-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary me-1">
                                                        <i class="bi bi-pencil"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-danger">
                                                        <i class="bi bi-trash"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Invoice Details Modal -->
    <div class="modal fade" id="invoiceDetailsModal" tabindex="-1" aria-labelledby="invoiceDetailsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="invoiceDetailsModalLabel">Invoice Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="invoice-details">
                        <h5>Invoice Information</h5>
                        <div class="invoice-row">
                            <span>Invoice Number:</span>
                            <span id="modalInvoiceNumber">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Date:</span>
                            <span id="modalInvoiceDate">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Customer:</span>
                            <span id="modalCustomerName">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Mobile:</span>
                            <span id="modalCustomerMobile">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Email:</span>
                            <span id="modalCustomerEmail">-</span>
                        </div>
                        
                        <h5 class="mt-4">Items</h5>
                        <div class="table-responsive">
                            <table class="table table-sm">
                                <thead>
                                    <tr>
                                        <th>Item</th>
                                        <th>Quantity</th>
                                        <th>Price</th>
                                        <th>Total</th>
                                    </tr>
                                </thead>
                                <tbody id="modalInvoiceItems">
                                    <tr>
                                        <td>Samsung 55" LED TV</td>
                                        <td>1</td>
                                        <td>₹45,000</td>
                                        <td>₹45,000</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="invoice-row invoice-total">
                            <span>Total Amount:</span>
                            <span id="modalTotalAmount">₹45,000</span>
                        </div>
                        <div class="invoice-row">
                            <span>Payment Status:</span>
                            <span id="modalPaymentStatus">Paid</span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="printInvoiceBtn">Print Invoice</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Generate Invoice Modal -->
    <div class="modal fade" id="generateInvoiceModal" tabindex="-1" aria-labelledby="generateInvoiceModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="generateInvoiceModalLabel">Generate New Invoice</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="generateInvoiceForm">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="invoiceCustomer" class="form-label">Customer</label>
                                <input type="text" class="form-control" id="invoiceCustomer" required>
                            </div>
                            <div class="col-md-6">
                                <label for="invoiceMobile" class="form-label">Mobile</label>
                                <input type="tel" class="form-control" id="invoiceMobile" required>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="invoiceEmail" class="form-label">Email</label>
                                <input type="email" class="form-control" id="invoiceEmail">
                            </div>
                            <div class="col-md-6">
                                <label for="invoiceDate" class="form-label">Date</label>
                                <input type="date" class="form-control" id="invoiceDate" required>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Tax Options</label>
                            <div class="tax-option">
                                <input type="radio" id="withTax" name="taxOption" value="withTax" checked>
                                <label for="withTax">With Tax</label>
                            </div>
                            <div class="tax-option">
                                <input type="radio" id="withoutTax" name="taxOption" value="withoutTax">
                                <label for="withoutTax">Without Tax</label>
                            </div>
                            <div class="tax-option">
                                <input type="radio" id="customTax" name="taxOption" value="customTax">
                                <label for="customTax">Custom Tax %</label>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="invoiceItems" class="form-label">Items</label>
                            <div class="table-responsive">
                                <table class="table table-sm" id="invoiceItemsTable">
                                    <thead>
                                        <tr>
                                            <th>Item</th>
                                            <th>Quantity</th>
                                            <th>Price</th>
                                            <th>Total</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><input type="text" class="form-control" placeholder="Item name"></td>
                                            <td><input type="number" class="form-control item-quantity" placeholder="1" value="1"></td>
                                            <td><input type="number" class="form-control item-price" placeholder="0"></td>
                                            <td class="item-total">₹0</td>
                                            <td><button type="button" class="btn btn-sm btn-danger remove-item"><i class="bi bi-trash"></i></button></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <button type="button" class="btn btn-sm btn-outline-primary mt-2" id="addInvoiceItem">Add Item</button>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="invoiceSubtotal" class="form-label">Subtotal</label>
                                <input type="text" class="form-control" id="invoiceSubtotal" readonly>
                            </div>
                            <div class="col-md-6">
                                <label for="invoiceTax" class="form-label">Tax (%)</label>
                                <input type="number" class="form-control" id="invoiceTax" value="18">
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="invoiceTotal" class="form-label">Total</label>
                                <input type="text" class="form-control" id="invoiceTotal" readonly>
                            </div>
                            <div class="col-md-6">
                                <label for="invoicePaymentStatus" class="form-label">Payment Status</label>
                                <select class="form-select" id="invoicePaymentStatus">
                                    <option value="paid">Paid</option>
                                    <option value="pending">Pending</option>
                                </select>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="saveInvoiceBtn">Save Invoice</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Order Details Modal -->
    <div class="modal fade" id="orderDetailsModal" tabindex="-1" aria-labelledby="orderDetailsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="orderDetailsModalLabel">Order Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="invoice-details">
                        <h5>Order Information</h5>
                        <div class="invoice-row">
                            <span>Order ID:</span>
                            <span id="modalOrderId">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Date:</span>
                            <span id="modalOrderDate">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Customer:</span>
                            <span id="modalOrderCustomer">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Mobile:</span>
                            <span id="modalOrderMobile">-</span>
                        </div>
                        
                        <h5 class="mt-4">Items</h5>
                        <div class="table-responsive">
                            <table class="table table-sm">
                                <thead>
                                    <tr>
                                        <th>Item</th>
                                        <th>Quantity</th>
                                        <th>Price</th>
                                        <th>Total</th>
                                    </tr>
                                </thead>
                                <tbody id="modalOrderItems">
                                    <tr>
                                        <td>Samsung 55" LED TV</td>
                                        <td>1</td>
                                        <td>₹45,000</td>
                                        <td>₹45,000</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="invoice-row invoice-total">
                            <span>Total Amount:</span>
                            <span id="modalOrderTotalAmount">₹45,000</span>
                        </div>
                        <div class="invoice-row">
                            <span>Status:</span>
                            <span id="modalOrderStatus">Processing</span>
                        </div>
                        <div class="invoice-row">
                            <span>Delivery Date:</span>
                            <span id="modalOrderDeliveryDate">25-Aug-2025</span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="printOrderBtn">Print Order</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Quotation Details Modal -->
    <div class="modal fade" id="quotationDetailsModal" tabindex="-1" aria-labelledby="quotationDetailsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="quotationDetailsModalLabel">Quotation Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="invoice-details">
                        <h5>Quotation Information</h5>
                        <div class="invoice-row">
                            <span>Quotation ID:</span>
                            <span id="modalQuotationId">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Date:</span>
                            <span id="modalQuotationDate">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Customer:</span>
                            <span id="modalQuotationCustomer">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Mobile:</span>
                            <span id="modalQuotationMobile">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Email:</span>
                            <span id="modalQuotationEmail">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Valid Till:</span>
                            <span id="modalQuotationValidTill">-</span>
                        </div>
                        
                        <h5 class="mt-4">Items</h5>
                        <div class="table-responsive">
                            <table class="table table-sm">
                                <thead>
                                    <tr>
                                        <th>Item</th>
                                        <th>Quantity</th>
                                        <th>Price</th>
                                        <th>Total</th>
                                    </tr>
                                </thead>
                                <tbody id="modalQuotationItems">
                                    <tr>
                                        <td>LG 7kg Washing Machine</td>
                                        <td>1</td>
                                        <td>₹25,000</td>
                                        <td>₹25,000</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="invoice-row invoice-total">
                            <span>Total Amount:</span>
                            <span id="modalQuotationTotalAmount">₹25,000</span>
                        </div>
                        <div class="invoice-row">
                            <span>Status:</span>
                            <span id="modalQuotationStatus">Pending</span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="printQuotationBtn">Print Quotation</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Payment Details Modal -->
    <div class="modal fade" id="paymentDetailsModal" tabindex="-1" aria-labelledby="paymentDetailsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="paymentDetailsModalLabel">Payment Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="invoice-details">
                        <h5>Payment Information</h5>
                        <div class="invoice-row">
                            <span>Payment ID:</span>
                            <span id="modalPaymentId">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Date:</span>
                            <span id="modalPaymentDate">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Invoice No:</span>
                            <span id="modalPaymentInvoice">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Customer:</span>
                            <span id="modalPaymentCustomer">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Amount:</span>
                            <span id="modalPaymentAmount">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Payment Mode:</span>
                            <span id="modalPaymentMode">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Status:</span>
                            <span id="modalPaymentStatus">-</span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="printPaymentBtn">Print Receipt</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Receivable Details Modal -->
    <div class="modal fade" id="receivableDetailsModal" tabindex="-1" aria-labelledby="receivableDetailsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="receivableDetailsModalLabel">Receivable Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="invoice-details">
                        <h5>Receivable Information</h5>
                        <div class="invoice-row">
                            <span>Invoice No:</span>
                            <span id="modalReceivableInvoice">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Date:</span>
                            <span id="modalReceivableDate">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Customer:</span>
                            <span id="modalReceivableCustomer">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Amount:</span>
                            <span id="modalReceivableAmount">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Due Date:</span>
                            <span id="modalReceivableDueDate">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Days Overdue:</span>
                            <span id="modalReceivableDaysOverdue">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Status:</span>
                            <span id="modalReceivableStatus">-</span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="sendReminderBtn">Send Reminder</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Service Details Modal -->
    <div class="modal fade" id="serviceDetailsModal" tabindex="-1" aria-labelledby="serviceDetailsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="serviceDetailsModalLabel">Service Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="invoice-details">
                        <h5>Service Information</h5>
                        <div class="invoice-row">
                            <span>Service ID:</span>
                            <span id="modalServiceId">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Date:</span>
                            <span id="modalServiceDate">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Customer:</span>
                            <span id="modalServiceCustomer">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Mobile:</span>
                            <span id="modalServiceMobile">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Product:</span>
                            <span id="modalServiceProduct">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Problem:</span>
                            <span id="modalServiceProblem">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Status:</span>
                            <span id="modalServiceStatus">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Assigned To:</span>
                            <span id="modalServiceAssignedTo">-</span>
                        </div>
                        
                        <h5 class="mt-4">Service History</h5>
                        <div class="table-responsive">
                            <table class="table table-sm">
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Action</th>
                                        <th>Notes</th>
                                        <th>By</th>
                                    </tr>
                                </thead>
                                <tbody id="modalServiceHistory">
                                    <tr>
                                        <td>23-Aug-2025</td>
                                        <td>Service Request Created</td>
                                        <td>Initial service request created</td>
                                        <td>System</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="printServiceBtn">Print Service Details</button>
                    <button type="button" class="btn btn-success" id="completeServiceBtn">Complete Service</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Service Completion Modal -->
    <div class="modal fade" id="serviceCompletionModal" tabindex="-1" aria-labelledby="serviceCompletionModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="serviceCompletionModalLabel">Complete Service Call</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="serviceCompletionForm">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="completionServiceId" class="form-label">Service ID</label>
                                <input type="text" class="form-control" id="completionServiceId" readonly>
                            </div>
                            <div class="col-md-6">
                                <label for="completionDate" class="form-label">Completion Date</label>
                                <input type="date" class="form-control" id="completionDate" required>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="completionNotes" class="form-label">Completion Notes</label>
                            <textarea class="form-control" id="completionNotes" rows="3" required></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="partsUsed" class="form-label">Parts Used</label>
                            <div class="table-responsive">
                                <table class="table table-sm" id="partsUsedTable">
                                    <thead>
                                        <tr>
                                            <th>Part Name</th>
                                            <th>Quantity</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><input type="text" class="form-control" placeholder="Part name"></td>
                                            <td><input type="number" class="form-control" placeholder="1" value="1"></td>
                                            <td><button type="button" class="btn btn-sm btn-danger remove-part"><i class="bi bi-trash"></i></button></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <button type="button" class="btn btn-sm btn-outline-primary mt-2" id="addPartUsed">Add Part</button>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Document Attachments</label>
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label for="serviceReport" class="form-label">Service Report</label>
                                    <input type="file" class="form-control" id="serviceReport" accept=".pdf,.jpg,.jpeg,.png">
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label for="customerSignature" class="form-label">Customer Signature</label>
                                    <input type="file" class="form-control" id="customerSignature" accept=".jpg,.jpeg,.png">
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="serviceStatus" class="form-label">Status</label>
                            <select class="form-select" id="serviceStatus" required>
                                <option value="">Select Status</option>
                                <option value="Completed">Completed</option>
                                <option value="Partially Completed">Partially Completed</option>
                                <option value="Parts Pending">Parts Pending</option>
                                <option value="Customer Approval Pending">Customer Approval Pending</option>
                            </select>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="saveCompletionBtn">Save & Complete</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Lead Details Modal -->
    <div class="modal fade" id="leadDetailsModal" tabindex="-1" aria-labelledby="leadDetailsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="leadDetailsModalLabel">Lead Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="invoice-details">
                        <h5>Lead Information</h5>
                        <div class="invoice-row">
                            <span>Lead ID:</span>
                            <span id="modalLeadId">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Date:</span>
                            <span id="modalLeadDate">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Time:</span>
                            <span id="modalLeadTime">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Customer:</span>
                            <span id="modalLeadCustomer">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Contact:</span>
                            <span id="modalLeadContact">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Source:</span>
                            <span id="modalLeadSource">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Product Interest:</span>
                            <span id="modalLeadProduct">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Status:</span>
                            <span id="modalLeadStatus">-</span>
                        </div>
                        
                        <h5 class="mt-4">Lead History</h5>
                        <div class="table-responsive">
                            <table class="table table-sm">
                                <thead>
                                    <tr>
                                        <th>Date</th>
                                        <th>Action</th>
                                        <th>Notes</th>
                                        <th>By</th>
                                    </tr>
                                </thead>
                                <tbody id="modalLeadHistory">
                                    <tr>
                                        <td>23-Aug-2025</td>
                                        <td>Lead Created</td>
                                        <td>Initial lead created from website</td>
                                        <td>System</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="convertLeadBtn">Convert to Customer</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Purchase Order Details Modal -->
    <div class="modal fade" id="purchaseOrderDetailsModal" tabindex="-1" aria-labelledby="purchaseOrderDetailsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="purchaseOrderDetailsModalLabel">Purchase Order Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="invoice-details">
                        <h5>Purchase Order Information</h5>
                        <div class="invoice-row">
                            <span>Order ID:</span>
                            <span id="modalPurchaseOrderId">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Date:</span>
                            <span id="modalPurchaseOrderDate">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Supplier:</span>
                            <span id="modalPurchaseOrderSupplier">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Product:</span>
                            <span id="modalPurchaseOrderProduct">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Quantity:</span>
                            <span id="modalPurchaseOrderQuantity">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Amount:</span>
                            <span id="modalPurchaseOrderAmount">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Status:</span>
                            <span id="modalPurchaseOrderStatus">-</span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="printPurchaseOrderBtn">Print Purchase Order</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Return Details Modal -->
    <div class="modal fade" id="returnDetailsModal" tabindex="-1" aria-labelledby="returnDetailsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="returnDetailsModalLabel">Return Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="invoice-details">
                        <h5>Return Information</h5>
                        <div class="invoice-row">
                            <span>Return ID:</span>
                            <span id="modalReturnId">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Order ID:</span>
                            <span id="modalReturnOrderId">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Date:</span>
                            <span id="modalReturnDate">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Supplier:</span>
                            <span id="modalReturnSupplier">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Product:</span>
                            <span id="modalReturnProduct">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Quantity:</span>
                            <span id="modalReturnQuantity">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Reason:</span>
                            <span id="modalReturnReason">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Status:</span>
                            <span id="modalReturnStatus">-</span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="printReturnBtn">Print Return Details</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Payable Details Modal -->
    <div class="modal fade" id="payableDetailsModal" tabindex="-1" aria-labelledby="payableDetailsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="payableDetailsModalLabel">Payable Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="invoice-details">
                        <h5>Payable Information</h5>
                        <div class="invoice-row">
                            <span>Invoice ID:</span>
                            <span id="modalPayableId">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Order ID:</span>
                            <span id="modalPayableOrderId">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Supplier:</span>
                            <span id="modalPayableSupplier">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Amount:</span>
                            <span id="modalPayableAmount">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Due Date:</span>
                            <span id="modalPayableDueDate">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Status:</span>
                            <span id="modalPayableStatus">-</span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="processPaymentBtn">Process Payment</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Claim Details Modal -->
    <div class="modal fade" id="claimDetailsModal" tabindex="-1" aria-labelledby="claimDetailsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="claimDetailsModalLabel">Claim Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="invoice-details">
                        <h5>Claim Information</h5>
                        <div class="invoice-row">
                            <span>Claim ID:</span>
                            <span id="modalClaimId">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Date:</span>
                            <span id="modalClaimDate">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Engineer/Branch:</span>
                            <span id="modalClaimEngineer">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Service ID:</span>
                            <span id="modalClaimServiceId">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Customer:</span>
                            <span id="modalClaimCustomer">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Amount:</span>
                            <span id="modalClaimAmount">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Status:</span>
                            <span id="modalClaimStatus">-</span>
                        </div>
                        
                        <h5 class="mt-4">Claim Items</h5>
                        <div class="table-responsive">
                            <table class="table table-sm">
                                <thead>
                                    <tr>
                                        <th>Item</th>
                                        <th>Quantity</th>
                                        <th>Price</th>
                                        <th>Total</th>
                                    </tr>
                                </thead>
                                <tbody id="modalClaimItems">
                                    <tr>
                                        <td>LED Panel</td>
                                        <td>1</td>
                                        <td>₹1,500</td>
                                        <td>₹1,500</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="printClaimBtn">Print Claim</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Category Details Modal -->
    <div class="modal fade" id="categoryDetailsModal" tabindex="-1" aria-labelledby="categoryDetailsModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="categoryDetailsModalLabel">Category Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="invoice-details">
                        <h5>Category Information</h5>
                        <div class="invoice-row">
                            <span>Category ID:</span>
                            <span id="modalCategoryId">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Category Name:</span>
                            <span id="modalCategoryName">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Description:</span>
                            <span id="modalCategoryDescription">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Items Count:</span>
                            <span id="modalCategoryItemsCount">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Status:</span>
                            <span id="modalCategoryStatus">-</span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="editCategoryBtn">Edit Category</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Item Details Modal -->
    <div class="modal fade" id="itemDetailsModal" tabindex="-1" aria-labelledby="itemDetailsModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="itemDetailsModalLabel">Item Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="invoice-details">
                        <h5>Item Information</h5>
                        <div class="invoice-row">
                            <span>Item ID:</span>
                            <span id="modalItemId">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Name:</span>
                            <span id="modalItemName">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Category:</span>
                            <span id="modalItemCategory">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Brand:</span>
                            <span id="modalItemBrand">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Model:</span>
                            <span id="modalItemModel">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Price:</span>
                            <span id="modalItemPrice">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Stock:</span>
                            <span id="modalItemStock">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Status:</span>
                            <span id="modalItemStatus">-</span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="editItemBtn">Edit Item</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Variant Details Modal -->
    <div class="modal fade" id="variantDetailsModal" tabindex="-1" aria-labelledby="variantDetailsModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="variantDetailsModalLabel">Variant Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="invoice-details">
                        <h5>Variant Information</h5>
                        <div class="invoice-row">
                            <span>Variant ID:</span>
                            <span id="modalVariantId">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Item:</span>
                            <span id="modalVariantItem">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Attributes:</span>
                            <span id="modalVariantAttributes">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>SKU:</span>
                            <span id="modalVariantSku">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Price:</span>
                            <span id="modalVariantPrice">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Stock:</span>
                            <span id="modalVariantStock">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Status:</span>
                            <span id="modalVariantStatus">-</span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="editVariantBtn">Edit Variant</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Stock Details Modal -->
    <div class="modal fade" id="stockDetailsModal" tabindex="-1" aria-labelledby="stockDetailsModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="stockDetailsModalLabel">Stock Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="invoice-details">
                        <h5>Stock Information</h5>
                        <div class="invoice-row">
                            <span>Item:</span>
                            <span id="modalStockItem">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Warehouse:</span>
                            <span id="modalStockWarehouse">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Available:</span>
                            <span id="modalStockAvailable">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Reserved:</span>
                            <span id="modalStockReserved">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Total:</span>
                            <span id="modalStockTotal">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Last Updated:</span>
                            <span id="modalStockLastUpdated">-</span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="editStockBtn">Edit Stock</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Branch Stock Details Modal -->
    <div class="modal fade" id="branchStockDetailsModal" tabindex="-1" aria-labelledby="branchStockDetailsModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="branchStockDetailsModalLabel">Branch Stock Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="invoice-details">
                        <h5>Branch Stock Information</h5>
                        <div class="invoice-row">
                            <span>Branch:</span>
                            <span id="modalBranchStockBranch">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Item:</span>
                            <span id="modalBranchStockItem">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Available:</span>
                            <span id="modalBranchStockAvailable">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Reserved:</span>
                            <span id="modalBranchStockReserved">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Total:</span>
                            <span id="modalBranchStockTotal">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Last Updated:</span>
                            <span id="modalBranchStockLastUpdated">-</span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="editBranchStockBtn">Edit Branch Stock</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Engineer Stock Details Modal -->
    <div class="modal fade" id="engineerStockDetailsModal" tabindex="-1" aria-labelledby="engineerStockDetailsModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="engineerStockDetailsModalLabel">Engineer Stock Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="invoice-details">
                        <h5>Engineer Stock Information</h5>
                        <div class="invoice-row">
                            <span>Engineer:</span>
                            <span id="modalEngineerStockEngineer">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Part:</span>
                            <span id="modalEngineerStockPart">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Part ID:</span>
                            <span id="modalEngineerStockPartId">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Quantity:</span>
                            <span id="modalEngineerStockQuantity">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Issued Date:</span>
                            <span id="modalEngineerStockIssuedDate">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Status:</span>
                            <span id="modalEngineerStockStatus">-</span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="returnEngineerStockBtn">Return Stock</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- User Details Modal -->
    <div class="modal fade" id="userDetailsModal" tabindex="-1" aria-labelledby="userDetailsModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="userDetailsModalLabel">User Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="invoice-details">
                        <h5>User Information</h5>
                        <div class="invoice-row">
                            <span>User ID:</span>
                            <span id="modalUserId">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Name:</span>
                            <span id="modalUserName">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Email:</span>
                            <span id="modalUserEmail">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Role:</span>
                            <span id="modalUserRole">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Branch:</span>
                            <span id="modalUserBranch">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Mobile:</span>
                            <span id="modalUserMobile">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Status:</span>
                            <span id="modalUserStatus">-</span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="editUserBtn">Edit User</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Branch Details Modal -->
    <div class="modal fade" id="branchDetailsModal" tabindex="-1" aria-labelledby="branchDetailsModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="branchDetailsModalLabel">Branch Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="invoice-details">
                        <h5>Branch Information</h5>
                        <div class="invoice-row">
                            <span>Branch ID:</span>
                            <span id="modalBranchId">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Name:</span>
                            <span id="modalBranchName">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Location:</span>
                            <span id="modalBranchLocation">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Manager:</span>
                            <span id="modalBranchManager">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Contact:</span>
                            <span id="modalBranchContact">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Products/Services:</span>
                            <span id="modalBranchProducts">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Status:</span>
                            <span id="modalBranchStatus">-</span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="editBranchBtn">Edit Branch</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Product Details Modal -->
    <div class="modal fade" id="productDetailsModal" tabindex="-1" aria-labelledby="productDetailsModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="productDetailsModalLabel">Product Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="invoice-details">
                        <h5>Product Information</h5>
                        <div class="invoice-row">
                            <span>Product ID:</span>
                            <span id="modalProductId">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Name:</span>
                            <span id="modalProductName">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Category:</span>
                            <span id="modalProductCategory">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Branch:</span>
                            <span id="modalProductBranch">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Serviceable:</span>
                            <span id="modalProductServiceable">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>AMC Available:</span>
                            <span id="modalProductAmcAvailable">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Status:</span>
                            <span id="modalProductStatus">-</span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="editProductBtn">Edit Product</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- PIN Mapping Details Modal -->
    <div class="modal fade" id="pinMappingDetailsModal" tabindex="-1" aria-labelledby="pinMappingDetailsModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="pinMappingDetailsModalLabel">PIN Mapping Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="invoice-details">
                        <h5>PIN Mapping Information</h5>
                        <div class="invoice-row">
                            <span>PIN Code:</span>
                            <span id="modalPinMappingPin">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Area:</span>
                            <span id="modalPinMappingArea">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>City:</span>
                            <span id="modalPinMappingCity">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>State:</span>
                            <span id="modalPinMappingState">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Branch:</span>
                            <span id="modalPinMappingBranch">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Engineer:</span>
                            <span id="modalPinMappingEngineer">-</span>
                        </div>
                        <div class="invoice-row">
                            <span>Status:</span>
                            <span id="modalPinMappingStatus">-</span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" id="editPinMappingBtn">Edit PIN Mapping</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- New Quotation Modal -->
    <div class="modal fade" id="newQuotationModal" tabindex="-1" aria-labelledby="newQuotationModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="newQuotationModalLabel">Create New Quotation</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="newQuotationForm">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="quotationCustomer" class="form-label">Customer</label>
                                <input type="text" class="form-control" id="quotationCustomer" required>
                            </div>
                            <div class="col-md-6">
                                <label for="quotationMobile" class="form-label">Mobile</label>
                                <input type="tel" class="form-control" id="quotationMobile" required>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="quotationEmail" class="form-label">Email</label>
                                <input type="email" class="form-control" id="quotationEmail">
                            </div>
                            <div class="col-md-6">
                                <label for="quotationDate" class="form-label">Date</label>
                                <input type="date" class="form-control" id="quotationDate" required>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="quotationValidTill" class="form-label">Valid Till</label>
                                <input type="date" class="form-control" id="quotationValidTill" required>
                            </div>
                            <div class="col-md-6">
                                <label for="quotationStatus" class="form-label">Status</label>
                                <select class="form-select" id="quotationStatus">
                                    <option value="pending">Pending</option>
                                    <option value="accepted">Accepted</option>
                                    <option value="rejected">Rejected</option>
                                </select>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="quotationItems" class="form-label">Items</label>
                            <div class="table-responsive">
                                <table class="table table-sm" id="quotationItemsTable">
                                    <thead>
                                        <tr>
                                            <th>Item</th>
                                            <th>Quantity</th>
                                            <th>Price</th>
                                            <th>Total</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><input type="text" class="form-control" placeholder="Item name"></td>
                                            <td><input type="number" class="form-control item-quantity" placeholder="1" value="1"></td>
                                            <td><input type="number" class="form-control item-price" placeholder="0"></td>
                                            <td class="item-total">₹0</td>
                                            <td><button type="button" class="btn btn-sm btn-danger remove-item"><i class="bi bi-trash"></i></button></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <button type="button" class="btn btn-sm btn-outline-primary mt-2" id="addQuotationItem">Add Item</button>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="quotationSubtotal" class="form-label">Subtotal</label>
                                <input type="text" class="form-control" id="quotationSubtotal" readonly>
                            </div>
                            <div class="col-md-6">
                                <label for="quotationTax" class="form-label">Tax (%)</label>
                                <input type="number" class="form-control" id="quotationTax" value="18">
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="quotationTotal" class="form-label">Total</label>
                                <input type="text" class="form-control" id="quotationTotal" readonly>
                            </div>
                            <div class="col-md-6">
                                <label for="quotationNotes" class="form-label">Notes</label>
                                <textarea class="form-control" id="quotationNotes" rows="1"></textarea>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="saveQuotationBtn">Save Quotation</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Configure Portal Modal -->
    <div class="modal fade" id="configurePortalModal" tabindex="-1" aria-labelledby="configurePortalModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="configurePortalModalLabel">Configure Portal Integration</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="configurePortalForm">
                        <div class="mb-3">
                            <label for="portalName" class="form-label">Portal Name</label>
                            <input type="text" class="form-control" id="portalName" readonly>
                        </div>
                        <div class="mb-3">
                            <label for="portalApiKey" class="form-label">API Key</label>
                            <input type="text" class="form-control" id="portalApiKey" placeholder="Enter API key">
                        </div>
                        <div class="mb-3">
                            <label for="portalApiSecret" class="form-label">API Secret</label>
                            <input type="password" class="form-control" id="portalApiSecret" placeholder="Enter API secret">
                        </div>
                        <div class="mb-3">
                            <label for="portalWebhookUrl" class="form-label">Webhook URL</label>
                            <input type="text" class="form-control" id="portalWebhookUrl" placeholder="Enter webhook URL">
                        </div>
                        <div class="mb-3">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="portalActive">
                                <label class="form-check-label" for="portalActive">
                                    Active
                                </label>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="savePortalConfigBtn">Save Configuration</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- AMC Plan Management Modal -->
    <div class="modal fade" id="amcPlanModal" tabindex="-1" aria-labelledby="amcPlanModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="amcPlanModalLabel">AMC Plan Management</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="amcPlanForm">
                        <div class="mb-3">
                            <label for="amcPlanName" class="form-label">Plan Name</label>
                            <input type="text" class="form-control" id="amcPlanName" readonly>
                        </div>
                        <div class="mb-3">
                            <label for="amcPlanPrice" class="form-label">Price (₹)</label>
                            <input type="number" class="form-control" id="amcPlanPrice" placeholder="Enter price">
                        </div>
                        <div class="mb-3">
                            <label for="amcPlanDuration" class="form-label">Duration (Months)</label>
                            <input type="number" class="form-control" id="amcPlanDuration" placeholder="Enter duration">
                        </div>
                        <div class="mb-3">
                            <label for="amcPlanFeatures" class="form-label">Features</label>
                            <textarea class="form-control" id="amcPlanFeatures" rows="3" placeholder="Enter features, one per line"></textarea>
                        </div>
                        <div class="mb-3">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="amcPlanActive">
                                <label class="form-check-label" for="amcPlanActive">
                                    Active
                                </label>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="saveAmcPlanBtn">Save Plan</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- AMC Contract Management Modal -->
    <div class="modal fade" id="amcContractModal" tabindex="-1" aria-labelledby="amcContractModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="amcContractModalLabel">AMC Contract Management</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="amcContractForm">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="amcContractId" class="form-label">Contract ID</label>
                                <input type="text" class="form-control" id="amcContractId" readonly>
                            </div>
                            <div class="col-md-6">
                                <label for="amcCustomer" class="form-label">Customer</label>
                                <input type="text" class="form-control" id="amcCustomer" required>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="amcProduct" class="form-label">Product</label>
                                <input type="text" class="form-control" id="amcProduct" required>
                            </div>
                            <div class="col-md-6">
                                <label for="amcPlanType" class="form-label">Plan Type</label>
                                <select class="form-select" id="amcPlanType" required>
                                    <option value="">Select Plan</option>
                                    <option value="basic">Basic</option>
                                    <option value="premium">Premium</option>
                                    <option value="silver">Silver</option>
                                    <option value="gold">Gold</option>
                                </select>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="amcStartDate" class="form-label">Start Date</label>
                                <input type="date" class="form-control" id="amcStartDate" required>
                            </div>
                            <div class="col-md-6">
                                <label for="amcEndDate" class="form-label">End Date</label>
                                <input type="date" class="form-control" id="amcEndDate" required>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="amcAmount" class="form-label">Amount (₹)</label>
                                <input type="number" class="form-control" id="amcAmount" required>
                            </div>
                            <div class="col-md-6">
                                <label for="amcStatus" class="form-label">Status</label>
                                <select class="form-select" id="amcStatus" required>
                                    <option value="active">Active</option>
                                    <option value="expired">Expired</option>
                                    <option value="cancelled">Cancelled</option>
                                </select>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="amcNotes" class="form-label">Notes</label>
                            <textarea class="form-control" id="amcNotes" rows="3"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="saveAmcContractBtn">Save Contract</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- New Category Modal -->
    <div class="modal fade" id="newCategoryModal" tabindex="-1" aria-labelledby="newCategoryModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="newCategoryModalLabel">Create New Category</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="newCategoryForm">
                        <div class="mb-3">
                            <label for="categoryName" class="form-label">Category Name</label>
                            <input type="text" class="form-control" id="categoryName" required>
                        </div>
                        <div class="mb-3">
                            <label for="categoryDescription" class="form-label">Description</label>
                            <textarea class="form-control" id="categoryDescription" rows="3"></textarea>
                        </div>
                        <div class="mb-3">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="categoryActive" checked>
                                <label class="form-check-label" for="categoryActive">
                                    Active
                                </label>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="saveCategoryBtn">Save Category</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- New Item Modal -->
    <div class="modal fade" id="newItemModal" tabindex="-1" aria-labelledby="newItemModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="newItemModalLabel">Create New Item</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="newItemForm">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="itemName" class="form-label">Item Name</label>
                                <input type="text" class="form-control" id="itemName" required>
                            </div>
                            <div class="col-md-6">
                                <label for="itemCategory" class="form-label">Category</label>
                                <select class="form-select" id="itemCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="TV">TV</option>
                                    <option value="Washing Machine">Washing Machine</option>
                                    <option value="Refrigerator">Refrigerator</option>
                                    <option value="AC">AC</option>
                                </select>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="itemBrand" class="form-label">Brand</label>
                                <input type="text" class="form-control" id="itemBrand" required>
                            </div>
                            <div class="col-md-6">
                                <label for="itemModel" class="form-label">Model</label>
                                <input type="text" class="form-control" id="itemModel" required>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="itemPrice" class="form-label">Price (₹)</label>
                                <input type="number" class="form-control" id="itemPrice" required>
                            </div>
                            <div class="col-md-6">
                                <label for="itemStock" class="form-label">Stock</label>
                                <input type="number" class="form-control" id="itemStock" required>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="itemDescription" class="form-label">Description</label>
                            <textarea class="form-control" id="itemDescription" rows="3"></textarea>
                        </div>
                        <div class="mb-3">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="itemActive" checked>
                                <label class="form-check-label" for="itemActive">
                                    Active
                                </label>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="saveItemBtn">Save Item</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- User Management Modal -->
    <div class="modal fade" id="userManagementModal" tabindex="-1" aria-labelledby="userManagementModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="userManagementModalLabel">Add New User</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="userManagementForm">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="userName" class="form-label">Name</label>
                                <input type="text" class="form-control" id="userName" required>
                            </div>
                            <div class="col-md-6">
                                <label for="userEmail" class="form-label">Email</label>
                                <input type="email" class="form-control" id="userEmail" required>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="userPassword" class="form-label">Password</label>
                                <input type="password" class="form-control" id="userPassword" required>
                            </div>
                            <div class="col-md-6">
                                <label for="userConfirmPassword" class="form-label">Confirm Password</label>
                                <input type="password" class="form-control" id="userConfirmPassword" required>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="userRole" class="form-label">Role</label>
                                <select class="form-select" id="userRole" required>
                                    <option value="">Select Role</option>
                                    <option value="administrator">Administrator</option>
                                    <option value="branch-manager">Branch Manager</option>
                                    <option value="service-engineer">Service Engineer</option>
                                    <option value="sales-executive">Sales Executive</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="userBranch" class="form-label">Branch</label>
                                <select class="form-select" id="userBranch" required>
                                    <option value="">Select Branch</option>
                                    <option value="mumbai">Mumbai</option>
                                    <option value="pune">Pune</option>
                                    <option value="delhi">Delhi</option>
                                    <option value="bangalore">Bangalore</option>
                                </select>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="userMobile" class="form-label">Mobile</label>
                                <input type="tel" class="form-control" id="userMobile" required>
                            </div>
                            <div class="col-md-6">
                                <label for="userStatus" class="form-label">Status</label>
                                <select class="form-select" id="userStatus" required>
                                    <option value="active">Active</option>
                                    <option value="inactive">Inactive</option>
                                </select>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="saveUserBtn">Save User</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Branch Management Modal -->
    <div class="modal fade" id="branchManagementModal" tabindex="-1" aria-labelledby="branchManagementModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="branchManagementModalLabel">Add New Branch</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="branchManagementForm">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="branchName" class="form-label">Branch Name</label>
                                <input type="text" class="form-control" id="branchName" required>
                            </div>
                            <div class="col-md-6">
                                <label for="branchCode" class="form-label">Branch Code</label>
                                <input type="text" class="form-control" id="branchCode" required>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="branchLocation" class="form-label">Location</label>
                                <input type="text" class="form-control" id="branchLocation" required>
                            </div>
                            <div class="col-md-6">
                                <label for="branchManager" class="form-label">Manager</label>
                                <input type="text" class="form-control" id="branchManager" required>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="branchContact" class="form-label">Contact</label>
                                <input type="tel" class="form-control" id="branchContact" required>
                            </div>
                            <div class="col-md-6">
                                <label for="branchEmail" class="form-label">Email</label>
                                <input type="email" class="form-control" id="branchEmail">
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="branchProducts" class="form-label">Products/Services</label>
                            <input type="text" class="form-control" id="branchProducts" placeholder="e.g., TV, AC, Refrigerator">
                        </div>
                        <div class="mb-3">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="branchActive" checked>
                                <label class="form-check-label" for="branchActive">
                                    Active
                                </label>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="saveBranchBtn">Save Branch</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Role Management Modal -->
    <div class="modal fade" id="roleManagementModal" tabindex="-1" aria-labelledby="roleManagementModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="roleManagementModalLabel">Role Permissions</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="roleManagementForm">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="roleName" class="form-label">Role Name</label>
                                <input type="text" class="form-control" id="roleName" readonly>
                            </div>
                            <div class="col-md-6">
                                <label for="roleDescription" class="form-label">Description</label>
                                <input type="text" class="form-control" id="roleDescription">
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Permissions</label>
                            <div class="row">
                                <div class="col-md-4">
                                    <div class="form-check">
                                        <input class="form-check-input role-permission" type="checkbox" id="perm-dashboard" value="dashboard">
                                        <label class="form-check-label" for="perm-dashboard">
                                            Dashboard
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input role-permission" type="checkbox" id="perm-sales" value="sales">
                                        <label class="form-check-label" for="perm-sales">
                                            Sales
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input role-permission" type="checkbox" id="perm-service" value="service">
                                        <label class="form-check-label" for="perm-service">
                                            Service
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input role-permission" type="checkbox" id="perm-inventory" value="inventory">
                                        <label class="form-check-label" for="perm-inventory">
                                            Inventory
                                        </label>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-check">
                                        <input class="form-check-input role-permission" type="checkbox" id="perm-purchase" value="purchase">
                                        <label class="form-check-label" for="perm-purchase">
                                            Purchase
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input role-permission" type="checkbox" id="perm-claims" value="claims">
                                        <label class="form-check-label" for="perm-claims">
                                            Claims
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input role-permission" type="checkbox" id="perm-reports" value="reports">
                                        <label class="form-check-label" for="perm-reports">
                                            Reports
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input role-permission" type="checkbox" id="perm-settings" value="settings">
                                        <label class="form-check-label" for="perm-settings">
                                            Settings
                                        </label>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <div class="form-check">
                                        <input class="form-check-input role-permission" type="checkbox" id="perm-users" value="users">
                                        <label class="form-check-label" for="perm-users">
                                            User Management
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input role-permission" type="checkbox" id="perm-branches" value="branches">
                                        <label class="form-check-label" for="perm-branches">
                                            Branch Management
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input role-permission" type="checkbox" id="perm-financial" value="financial">
                                        <label class="form-check-label" for="perm-financial">
                                            Financial Reports
                                        </label>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input role-permission" type="checkbox" id="perm-all" value="all">
                                        <label class="form-check-label" for="perm-all">
                                            Full Access
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="saveRoleBtn">Save Permissions</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Product Management Modal -->
    <div class="modal fade" id="productManagementModal" tabindex="-1" aria-labelledby="productManagementModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="productManagementModalLabel">Add New Product</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="productManagementForm">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="productName" class="form-label">Product Name</label>
                                <input type="text" class="form-control" id="productName" required>
                            </div>
                            <div class="col-md-6">
                                <label for="productCategory" class="form-label">Category</label>
                                <select class="form-select" id="productCategory" required>
                                    <option value="">Select Category</option>
                                    <option value="TV">TV</option>
                                    <option value="Washing Machine">Washing Machine</option>
                                    <option value="Refrigerator">Refrigerator</option>
                                    <option value="AC">AC</option>
                                </select>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="productBranch" class="form-label">Branch</label>
                                <select class="form-select" id="productBranch" required>
                                    <option value="">Select Branch</option>
                                    <option value="all">All Branches</option>
                                    <option value="mumbai">Mumbai</option>
                                    <option value="pune">Pune</option>
                                    <option value="delhi">Delhi</option>
                                    <option value="bangalore">Bangalore</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="productPrice" class="form-label">Price (₹)</label>
                                <input type="number" class="form-control" id="productPrice" required>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="productServiceable" checked>
                                    <label class="form-check-label" for="productServiceable">
                                        Serviceable
                                    </label>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="productAmcAvailable" checked>
                                    <label class="form-check-label" for="productAmcAvailable">
                                        AMC Available
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="productActive" checked>
                                <label class="form-check-label" for="productActive">
                                    Active
                                </label>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="saveProductBtn">Save Product</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- PIN Mapping Management Modal -->
    <div class="modal fade" id="pinMappingManagementModal" tabindex="-1" aria-labelledby="pinMappingManagementModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="pinMappingManagementModalLabel">Add PIN Mapping</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="pinMappingManagementForm">
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="pinCode" class="form-label">PIN Code</label>
                                <input type="text" class="form-control" id="pinCode" required>
                            </div>
                            <div class="col-md-6">
                                <label for="pinArea" class="form-label">Area</label>
                                <input type="text" class="form-control" id="pinArea" required>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="pinCity" class="form-label">City</label>
                                <input type="text" class="form-control" id="pinCity" required>
                            </div>
                            <div class="col-md-6">
                                <label for="pinState" class="form-label">State</label>
                                <input type="text" class="form-control" id="pinState" required>
                            </div>
                        </div>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="pinBranch" class="form-label">Branch</label>
                                <select class="form-select" id="pinBranch" required>
                                    <option value="">Select Branch</option>
                                    <option value="mumbai">Mumbai</option>
                                    <option value="pune">Pune</option>
                                    <option value="delhi">Delhi</option>
                                    <option value="bangalore">Bangalore</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="pinEngineer" class="form-label">Engineer</label>
                                <select class="form-select" id="pinEngineer" required>
                                    <option value="">Select Engineer</option>
                                    <option value="rajesh">Rajesh Kumar</option>
                                    <option value="vikram">Vikram Patel</option>
                                    <option value="amit">Amit Singh</option>
                                    <option value="neha">Neha Sharma</option>
                                </select>
                            </div>
                        </div>
                        <div class="mb-3">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="pinActive" checked>
                                <label class="form-check-label" for="pinActive">
                                    Active
                                </label>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="savePinMappingBtn">Save PIN Mapping</button>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Sidebar Navigation
            const sidebarLinks = document.querySelectorAll('.sidebar-menu .nav-link');
            const contentSections = document.querySelectorAll('.content-section');
            
            sidebarLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Remove active class from all links and sections
                    sidebarLinks.forEach(l => l.classList.remove('active'));
                    contentSections.forEach(s => s.classList.remove('active'));
                    
                    // Add active class to clicked link
                    this.classList.add('active');
                    
                    // Show corresponding section
                    const sectionId = this.getAttribute('data-section');
                    const section = document.getElementById(sectionId);
                    if (section) {
                        section.classList.add('active');
                    }
                });
            });
            
            // Submenu Toggle
            const submenuToggles = document.querySelectorAll('[data-toggle]');
            submenuToggles.forEach(toggle => {
                toggle.addEventListener('click', function(e) {
                    e.preventDefault();
                    const submenuId = this.getAttribute('data-toggle');
                    const submenu = document.getElementById(submenuId);
                    if (submenu) {
                        submenu.classList.toggle('show');
                        const icon = this.querySelector('i.bi-chevron-down');
                        if (icon) {
                            icon.classList.toggle('bi-chevron-down');
                            icon.classList.toggle('bi-chevron-up');
                        }
                    }
                });
            });
            
            // Mobile Menu Toggle
            const mobileMenuToggle = document.getElementById('mobileMenuToggle');
            const sidebar = document.getElementById('sidebar');
            
            if (mobileMenuToggle) {
                mobileMenuToggle.addEventListener('click', function() {
                    sidebar.classList.toggle('show');
                });
            }
            
            // AMC Customers Filter
            const showAmcCustomersOnly = document.getElementById('showAmcCustomersOnly');
            if (showAmcCustomersOnly) {
                showAmcCustomersOnly.addEventListener('change', filterServiceCallsByAmc);
            }
            
            // Function to filter service calls by AMC status
            function filterServiceCallsByAmc() {
                const showOnlyAmc = document.getElementById('showAmcCustomersOnly').checked;
                const serviceRows = document.querySelectorAll('#service-requests tbody tr');
                
                // Get list of AMC customers
                const amcCustomers = [];
                document.querySelectorAll('#amc tbody tr').forEach(row => {
                    const customerName = row.querySelector('td:nth-child(2)').textContent.trim().toLowerCase();
                    const status = row.querySelector('td:nth-child(8) .status-badge').textContent.trim();
                    if (status === 'Active') {
                        amcCustomers.push(customerName);
                    }
                });
                
                // Filter service rows
                serviceRows.forEach(row => {
                    const customerName = row.querySelector('td:nth-child(3)').textContent.trim().toLowerCase();
                    if (showOnlyAmc) {
                        row.style.display = amcCustomers.includes(customerName) ? '' : 'none';
                    } else {
                        row.style.display = '';
                    }
                });
            }
            
            // Sales Management Functions
            const generateInvoiceBtn = document.getElementById('generateInvoiceBtn');
            if (generateInvoiceBtn) {
                generateInvoiceBtn.addEventListener('click', function() {
                    const modal = new bootstrap.Modal(document.getElementById('generateInvoiceModal'));
                    modal.show();
                    
                    // Set today's date as default
                    const today = new Date().toISOString().split('T')[0];
                    document.getElementById('invoiceDate').value = today;
                    
                    // Calculate totals
                    calculateInvoiceTotals();
                });
            }
            
            const newQuotationBtn = document.getElementById('newQuotationBtn');
            if (newQuotationBtn) {
                newQuotationBtn.addEventListener('click', function() {
                    const modal = new bootstrap.Modal(document.getElementById('newQuotationModal'));
                    modal.show();
                    
                    // Set today's date as default
                    const today = new Date().toISOString().split('T')[0];
                    document.getElementById('quotationDate').value = today;
                    
                    // Set valid till date (30 days from now)
                    const validTill = new Date();
                    validTill.setDate(validTill.getDate() + 30);
                    document.getElementById('quotationValidTill').value = validTill.toISOString().split('T')[0];
                    
                    // Calculate totals
                    calculateQuotationTotals();
                });
            }
            
            // Line up items for Sales Management
            const lineUpItems = document.querySelectorAll('.line-up-item');
            lineUpItems.forEach(item => {
                item.addEventListener('click', function() {
                    // Remove active class from all items
                    lineUpItems.forEach(i => i.classList.remove('active'));
                    
                    // Add active class to clicked item
                    this.classList.add('active');
                    
                    // Show corresponding tab
                    const tabId = this.getAttribute('data-tab');
                    const tab = document.getElementById(tabId);
                    if (tab) {
                        // Hide all tabs
                        document.querySelectorAll('#salesTabsContent .tab-pane').forEach(t => {
                            t.classList.remove('show', 'active');
                        });
                        
                        // Show selected tab
                        tab.classList.add('show', 'active');
                    }
                });
            });
            
            // Line up items for Inventory Management
            const inventoryLineUpItems = document.querySelectorAll('#inventory .line-up-item');
            inventoryLineUpItems.forEach(item => {
                item.addEventListener('click', function() {
                    // Remove active class from all items
                    inventoryLineUpItems.forEach(i => i.classList.remove('active'));
                    
                    // Add active class to clicked item
                    this.classList.add('active');
                    
                    // Show corresponding tab
                    const tabId = this.getAttribute('data-tab');
                    const tab = document.getElementById(tabId);
                    if (tab) {
                        // Hide all tabs
                        document.querySelectorAll('#inventoryTabsContent .tab-pane').forEach(t => {
                            t.classList.remove('show', 'active');
                        });
                        
                        // Show selected tab
                        tab.classList.add('show', 'active');
                    }
                });
            });
            
            // Line up items for Reports & Analytics
            const reportsLineUpItems = document.querySelectorAll('#reports .line-up-item');
            reportsLineUpItems.forEach(item => {
                item.addEventListener('click', function() {
                    // Remove active class from all items
                    reportsLineUpItems.forEach(i => i.classList.remove('active'));
                    
                    // Add active class to clicked item
                    this.classList.add('active');
                    
                    // Show corresponding tab
                    const tabId = this.getAttribute('data-tab');
                    const tab = document.getElementById(tabId);
                    if (tab) {
                        // Hide all tabs
                        document.querySelectorAll('#reportsTabsContent .tab-pane').forEach(t => {
                            t.classList.remove('show', 'active');
                        });
                        
                        // Show selected tab
                        tab.classList.add('show', 'active');
                    }
                });
            });
            
            // View Invoice Details
            document.querySelectorAll('.view-invoice').forEach(button => {
                button.addEventListener('click', function() {
                    const invoiceId = this.getAttribute('data-invoice');
                    
                    // Mock data - in a real app, this would come from an API
                    const invoiceData = {
                        '11IVSB1': {
                            invoiceNumber: '11IVSB1',
                            date: '23-Aug-2025',
                            customer: 'shailendra gupta',
                            mobile: '92022202207',
                            email: 'shailendra@gmail.com',
                            items: [
                                { name: 'Samsung 55" LED TV', quantity: 1, price: 21000, total: 21000 }
                            ],
                            totalAmount: '₹21,000',
                            paymentStatus: 'Paid'
                        },
                        '11IVSB0': {
                            invoiceNumber: '11IVSB0',
                            date: '22-Aug-2025',
                            customer: 'rajesh kumar',
                            mobile: '9876543210',
                            email: 'rajesh@example.com',
                            items: [
                                { name: 'LG 7kg Washing Machine', quantity: 1, price: 15500, total: 15500 }
                            ],
                            totalAmount: '₹15,500',
                            paymentStatus: 'Paid'
                        },
                        '11IVSA9': {
                            invoiceNumber: '11IVSA9',
                            date: '21-Aug-2025',
                            customer: 'amit singh',
                            mobile: '8765432109',
                            email: 'amit@example.com',
                            items: [
                                { name: 'Samsung 32" LED TV', quantity: 1, price: 32000, total: 32000 }
                            ],
                            totalAmount: '₹32,000',
                            paymentStatus: 'Pending'
                        }
                    };
                    
                    const invoice = invoiceData[invoiceId];
                    if (invoice) {
                        document.getElementById('modalInvoiceNumber').textContent = invoice.invoiceNumber;
                        document.getElementById('modalInvoiceDate').textContent = invoice.date;
                        document.getElementById('modalCustomerName').textContent = invoice.customer;
                        document.getElementById('modalCustomerMobile').textContent = invoice.mobile;
                        document.getElementById('modalCustomerEmail').textContent = invoice.email;
                        document.getElementById('modalTotalAmount').textContent = invoice.totalAmount;
                        document.getElementById('modalPaymentStatus').textContent = invoice.paymentStatus;
                        
                        // Populate items table
                        const itemsTable = document.getElementById('modalInvoiceItems');
                        itemsTable.innerHTML = '';
                        invoice.items.forEach(item => {
                            const row = document.createElement('tr');
                            row.innerHTML = `
                                <td>${item.name}</td>
                                <td>${item.quantity}</td>
                                <td>₹${item.price.toLocaleString()}</td>
                                <td>₹${item.total.toLocaleString()}</td>
                            `;
                            itemsTable.appendChild(row);
                        });
                        
                        const modal = new bootstrap.Modal(document.getElementById('invoiceDetailsModal'));
                        modal.show();
                    }
                });
            });
            
            // View Order Details
            document.querySelectorAll('.view-order').forEach(button => {
                button.addEventListener('click', function() {
                    const orderId = this.getAttribute('data-order');
                    
                    // Mock data - in a real app, this would come from an API
                    const orderData = {
                        'ORD001': {
                            orderId: 'ORD001',
                            date: '23-Aug-2025',
                            customer: 'shailendra gupta',
                            mobile: '92022202207',
                            product: 'Samsung 55" LED TV',
                            items: [
                                { name: 'Samsung 55" LED TV', quantity: 1, price: 45000, total: 45000 }
                            ],
                            totalAmount: '₹45,000',
                            status: 'Processing',
                            deliveryDate: '25-Aug-2025'
                        }
                    };
                    
                    const order = orderData[orderId];
                    if (order) {
                        document.getElementById('modalOrderId').textContent = order.orderId;
                        document.getElementById('modalOrderDate').textContent = order.date;
                        document.getElementById('modalOrderCustomer').textContent = order.customer;
                        document.getElementById('modalOrderMobile').textContent = order.mobile;
                        document.getElementById('modalOrderTotalAmount').textContent = order.totalAmount;
                        document.getElementById('modalOrderStatus').textContent = order.status;
                        document.getElementById('modalOrderDeliveryDate').textContent = order.deliveryDate;
                        
                        // Populate items table
                        const itemsTable = document.getElementById('modalOrderItems');
                        itemsTable.innerHTML = '';
                        order.items.forEach(item => {
                            const row = document.createElement('tr');
                            row.innerHTML = `
                                <td>${item.name}</td>
                                <td>${item.quantity}</td>
                                <td>₹${item.price.toLocaleString()}</td>
                                <td>₹${item.total.toLocaleString()}</td>
                            `;
                            itemsTable.appendChild(row);
                        });
                        
                        const modal = new bootstrap.Modal(document.getElementById('orderDetailsModal'));
                        modal.show();
                    }
                });
            });
            
            // View Quotation Details
            document.querySelectorAll('.view-quotation').forEach(button => {
                button.addEventListener('click', function() {
                    const quotationId = this.getAttribute('data-quotation');
                    
                    // Mock data - in a real app, this would come from an API
                    const quotationData = {
                        'Q001': {
                            quotationId: 'Q001',
                            date: '22-Aug-2025',
                            customer: 'rajesh kumar',
                            mobile: '9876543210',
                            email: 'rajesh@example.com',
                            validTill: '05-Sep-2025',
                            items: [
                                { name: 'LG 7kg Washing Machine', quantity: 1, price: 25000, total: 25000 }
                            ],
                            totalAmount: '₹25,000',
                            status: 'Pending'
                        }
                    };
                    
                    const quotation = quotationData[quotationId];
                    if (quotation) {
                        document.getElementById('modalQuotationId').textContent = quotation.quotationId;
                        document.getElementById('modalQuotationDate').textContent = quotation.date;
                        document.getElementById('modalQuotationCustomer').textContent = quotation.customer;
                        document.getElementById('modalQuotationMobile').textContent = quotation.mobile;
                        document.getElementById('modalQuotationEmail').textContent = quotation.email;
                        document.getElementById('modalQuotationValidTill').textContent = quotation.validTill;
                        document.getElementById('modalQuotationTotalAmount').textContent = quotation.totalAmount;
                        document.getElementById('modalQuotationStatus').textContent = quotation.status;
                        
                        // Populate items table
                        const itemsTable = document.getElementById('modalQuotationItems');
                        itemsTable.innerHTML = '';
                        quotation.items.forEach(item => {
                            const row = document.createElement('tr');
                            row.innerHTML = `
                                <td>${item.name}</td>
                                <td>${item.quantity}</td>
                                <td>₹${item.price.toLocaleString()}</td>
                                <td>₹${item.total.toLocaleString()}</td>
                            `;
                            itemsTable.appendChild(row);
                        });
                        
                        const modal = new bootstrap.Modal(document.getElementById('quotationDetailsModal'));
                        modal.show();
                    }
                });
            });
            
            // View Payment Details
            document.querySelectorAll('.view-payment').forEach(button => {
                button.addEventListener('click', function() {
                    const paymentId = this.getAttribute('data-payment');
                    
                    // Mock data - in a real app, this would come from an API
                    const paymentData = {
                        'PAY001': {
                            paymentId: 'PAY001',
                            date: '23-Aug-2025',
                            invoice: '11IVSB1',
                            customer: 'shailendra gupta',
                            amount: '₹21,000',
                            paymentMode: 'Cash',
                            status: 'Received'
                        }
                    };
                    
                    const payment = paymentData[paymentId];
                    if (payment) {
                        document.getElementById('modalPaymentId').textContent = payment.paymentId;
                        document.getElementById('modalPaymentDate').textContent = payment.date;
                        document.getElementById('modalPaymentInvoice').textContent = payment.invoice;
                        document.getElementById('modalPaymentCustomer').textContent = payment.customer;
                        document.getElementById('modalPaymentAmount').textContent = payment.amount;
                        document.getElementById('modalPaymentMode').textContent = payment.paymentMode;
                        document.getElementById('modalPaymentStatus').textContent = payment.status;
                        
                        const modal = new bootstrap.Modal(document.getElementById('paymentDetailsModal'));
                        modal.show();
                    }
                });
            });
            
            // View Receivable Details
            document.querySelectorAll('.view-receivable').forEach(button => {
                button.addEventListener('click', function() {
                    const receivableId = this.getAttribute('data-receivable');
                    
                    // Mock data - in a real app, this would come from an API
                    const receivableData = {
                        '11IVSA9': {
                            invoice: '11IVSA9',
                            date: '21-Aug-2025',
                            customer: 'amit singh',
                            amount: '₹32,000',
                            dueDate: '05-Sep-2025',
                            daysOverdue: '-',
                            status: 'Pending'
                        }
                    };
                    
                    const receivable = receivableData[receivableId];
                    if (receivable) {
                        document.getElementById('modalReceivableInvoice').textContent = receivable.invoice;
                        document.getElementById('modalReceivableDate').textContent = receivable.date;
                        document.getElementById('modalReceivableCustomer').textContent = receivable.customer;
                        document.getElementById('modalReceivableAmount').textContent = receivable.amount;
                        document.getElementById('modalReceivableDueDate').textContent = receivable.dueDate;
                        document.getElementById('modalReceivableDaysOverdue').textContent = receivable.daysOverdue;
                        document.getElementById('modalReceivableStatus').textContent = receivable.status;
                        
                        const modal = new bootstrap.Modal(document.getElementById('receivableDetailsModal'));
                        modal.show();
                    }
                });
            });
            
            // View Service Details
            document.querySelectorAll('.view-service').forEach(button => {
                button.addEventListener('click', function() {
                    const serviceId = this.getAttribute('data-service');
                    
                    // Mock data - in a real app, this would come from an API
                    const serviceData = {
                        'SR001': {
                            serviceId: 'SR001',
                            date: '23-Aug-2025',
                            customer: 'vikram patel',
                            mobile: '9876543210',
                            product: 'LED TV',
                            problem: 'Display Issue',
                            status: 'Pending',
                            assignedTo: '-',
                            history: [
                                { date: '23-Aug-2025', action: 'Service Request Created', notes: 'Initial service request created', by: 'System' }
                            ]
                        },
                        'SR002': {
                            serviceId: 'SR002',
                            date: '22-Aug-2025',
                            customer: 'neha sharma',
                            mobile: '8765432109',
                            product: 'Washing Machine',
                            problem: 'Not Starting',
                            status: 'In Progress',
                            assignedTo: 'Rajesh Kumar',
                            history: [
                                { date: '22-Aug-2025', action: 'Service Request Created', notes: 'Initial service request created', by: 'System' },
                                { date: '22-Aug-2025', action: 'Assigned to Engineer', notes: 'Assigned to Rajesh Kumar', by: 'Vikram Patel' }
                            ]
                        },
                        'SR003': {
                            serviceId: 'SR003',
                            date: '21-Aug-2025',
                            customer: 'rahul verma',
                            mobile: '7654321098',
                            product: 'Refrigerator',
                            problem: 'Cooling Issue',
                            status: 'Completed',
                            assignedTo: 'Vikram Patel',
                            history: [
                                { date: '21-Aug-2025', action: 'Service Request Created', notes: 'Initial service request created', by: 'System' },
                                { date: '21-Aug-2025', action: 'Assigned to Engineer', notes: 'Assigned to Vikram Patel', by: 'Vikram Patel' },
                                { date: '22-Aug-2025', action: 'Service Completed', notes: 'Service completed successfully', by: 'Vikram Patel' }
                            ]
                        }
                    };
                    
                    const service = serviceData[serviceId];
                    if (service) {
                        document.getElementById('modalServiceId').textContent = service.serviceId;
                        document.getElementById('modalServiceDate').textContent = service.date;
                        document.getElementById('modalServiceCustomer').textContent = service.customer;
                        document.getElementById('modalServiceMobile').textContent = service.mobile;
                        document.getElementById('modalServiceProduct').textContent = service.product;
                        document.getElementById('modalServiceProblem').textContent = service.problem;
                        document.getElementById('modalServiceStatus').textContent = service.status;
                        document.getElementById('modalServiceAssignedTo').textContent = service.assignedTo;
                        
                        // Populate service history table
                        const historyTable = document.getElementById('modalServiceHistory');
                        historyTable.innerHTML = '';
                        service.history.forEach(item => {
                            const row = document.createElement('tr');
                            row.innerHTML = `
                                <td>${item.date}</td>
                                <td>${item.action}</td>
                                <td>${item.notes}</td>
                                <td>${item.by}</td>
                            `;
                            historyTable.appendChild(row);
                        });
                        
                        // Show or hide Complete Service button based on status
                        const completeServiceBtn = document.getElementById('completeServiceBtn');
                        if (service.status === 'Completed') {
                            completeServiceBtn.style.display = 'none';
                        } else {
                            completeServiceBtn.style.display = 'block';
                            completeServiceBtn.setAttribute('data-service-id', service.serviceId);
                        }
                        
                        const modal = new bootstrap.Modal(document.getElementById('serviceDetailsModal'));
                        modal.show();
                    }
                });
            });
            
            // Complete Service Button Click
            document.getElementById('completeServiceBtn').addEventListener('click', function() {
                const serviceId = this.getAttribute('data-service-id');
                document.getElementById('completionServiceId').value = serviceId;
                
                // Set today's date as default completion date
                const today = new Date();
                const formattedDate = today.toISOString().substr(0, 10);
                document.getElementById('completionDate').value = formattedDate;
                
                // Clear previous form data
                document.getElementById('completionNotes').value = '';
                document.getElementById('serviceReport').value = '';
                document.getElementById('customerSignature').value = '';
                document.getElementById('serviceStatus').value = '';
                
                // Reset parts used table to have only one empty row
                const partsTable = document.getElementById('partsUsedTable').querySelector('tbody');
                partsTable.innerHTML = `
                    <tr>
                        <td><input type="text" class="form-control" placeholder="Part name"></td>
                        <td><input type="number" class="form-control" placeholder="1" value="1"></td>
                        <td><button type="button" class="btn btn-sm btn-danger remove-part"><i class="bi bi-trash"></i></button></td>
                    </tr>
                `;
                
                // Hide service details modal and show completion modal
                const serviceDetailsModal = bootstrap.Modal.getInstance(document.getElementById('serviceDetailsModal'));
                serviceDetailsModal.hide();
                
                const completionModal = new bootstrap.Modal(document.getElementById('serviceCompletionModal'));
                completionModal.show();
            });
            
            // Add Part Used
            document.getElementById('addPartUsed').addEventListener('click', function() {
                const partsTable = document.getElementById('partsUsedTable').querySelector('tbody');
                const newRow = document.createElement('tr');
                newRow.innerHTML = `
                    <td><input type="text" class="form-control" placeholder="Part name"></td>
                    <td><input type="number" class="form-control" placeholder="1" value="1"></td>
                    <td><button type="button" class="btn btn-sm btn-danger remove-part"><i class="bi bi-trash"></i></button></td>
                `;
                partsTable.appendChild(newRow);
                
                // Add event listener to the new remove button
                newRow.querySelector('.remove-part').addEventListener('click', function() {
                    this.closest('tr').remove();
                });
            });
            
            // Remove Part Used
            document.addEventListener('click', function(e) {
                if (e.target.closest('.remove-part')) {
                    e.target.closest('tr').remove();
                }
            });
            
            // Save & Complete Service
            document.getElementById('saveCompletionBtn').addEventListener('click', function() {
                // Validate form
                const form = document.getElementById('serviceCompletionForm');
                if (!form.checkValidity()) {
                    form.reportValidity();
                    return;
                }
                
                const serviceId = document.getElementById('completionServiceId').value;
                const completionDate = document.getElementById('completionDate').value;
                const completionNotes = document.getElementById('completionNotes').value;
                const serviceStatus = document.getElementById('serviceStatus').value;
                
                // Get parts used
                const partsUsed = [];
                document.querySelectorAll('#partsUsedTable tbody tr').forEach(row => {
                    const partName = row.querySelector('td:first-child input').value;
                    const quantity = parseInt(row.querySelector('td:nth-child(2) input').value) || 0;
                    if (partName && quantity > 0) {
                        partsUsed.push({ name: partName, quantity: quantity });
                    }
                });
                
                // Get document attachments
                const serviceReport = document.getElementById('serviceReport').files[0];
                const customerSignature = document.getElementById('customerSignature').files[0];
                
                // In a real app, you would upload these files to a server
                // For this demo, we'll just show a success message
                
                // Update inventory for each part used
                if (partsUsed.length > 0) {
                    updateInventoryForPartsUsed(partsUsed, serviceId);
                }
                
                // Update service status in the service requests table
                const serviceRow = document.querySelector(`tr[data-service-id="${serviceId}"]`);
                if (serviceRow) {
                    serviceRow.querySelector('.status-badge').textContent = serviceStatus;
                    serviceRow.querySelector('.status-badge').className = `status-badge status-${serviceStatus.toLowerCase().replace(' ', '-')}`;
                }
                
                // Close the modal
                const modal = bootstrap.Modal.getInstance(document.getElementById('serviceCompletionModal'));
                modal.hide();
                
                // Show success message
                alert(`Service call ${serviceId} has been marked as ${serviceStatus}. ${partsUsed.length} parts used. ${serviceReport ? 'Service report uploaded.' : ''} ${customerSignature ? 'Customer signature uploaded.' : ''}`);
            });
            
            // Function to update inventory when parts are used in service
            function updateInventoryForPartsUsed(partsUsed, serviceId) {
                // Get engineer name from service details
                const engineerName = "Rajesh Kumar"; // In a real app, this would come from the service data
                
                // Get current date in DD-MMM-YYYY format
                const today = new Date();
                const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
                const formattedDate = `${today.getDate().toString().padStart(2, '0')}-${months[today.getMonth()]}-${today.getFullYear()}`;
                
                // Get customer and product info from service details
                const customerName = "Vikram Patel"; // In a real app, this would come from the service data
                const productName = "Samsung LED TV"; // In a real app, this would come from the service data
                
                // For each part used, update inventory and add to parts history
                partsUsed.forEach(part => {
                    // 1. Reduce stock quantity (in a real app, this would update a database)
                    console.log(`Reducing stock for ${part.name} by ${part.quantity} units`);
                    
                    // 2. Add entry to parts history table
                    const partsHistoryTable = document.querySelector('#parts-history table tbody');
                    const newRow = document.createElement('tr');
                    
                    // Generate a random part ID for demo purposes
                    const partId = 'PART' + Math.floor(1000 + Math.random() * 9000);
                    
                    newRow.innerHTML = `
                        <td>${formattedDate}</td>
                        <td>${serviceId}</td>
                        <td>${engineerName}</td>
                        <td>${part.name}</td>
                        <td>${partId}</td>
                        <td>${part.quantity}</td>
                        <td>${customerName}</td>
                        <td>${productName}</td>
                    `;
                    
                    // Add the new row at the top of the table
                    if (partsHistoryTable.firstChild) {
                        partsHistoryTable.insertBefore(newRow, partsHistoryTable.firstChild);
                    } else {
                        partsHistoryTable.appendChild(newRow);
                    }
                });
                
                console.log(`Inventory updated for service ${serviceId}`);
            }
            
            // View Lead Details
            document.querySelectorAll('.view-lead').forEach(button => {
                button.addEventListener('click', function() {
                    const leadId = this.getAttribute('data-lead');
                    
                    // Mock data - in a real app, this would come from an API
                    const leadData = {
                        'L001': {
                            leadId: 'L001',
                            date: '23-Aug-2025',
                            time: '10:30 AM',
                            customer: 'sunil verma',
                            contact: '9876543210',
                            source: 'Website',
                            product: 'AC',
                            status: 'New',
                            history: [
                                { date: '23-Aug-2025', action: 'Lead Created', notes: 'Initial lead created from website', by: 'System' }
                            ]
                        }
                    };
                    
                    const lead = leadData[leadId];
                    if (lead) {
                        document.getElementById('modalLeadId').textContent = lead.leadId;
                        document.getElementById('modalLeadDate').textContent = lead.date;
                        document.getElementById('modalLeadTime').textContent = lead.time;
                        document.getElementById('modalLeadCustomer').textContent = lead.customer;
                        document.getElementById('modalLeadContact').textContent = lead.contact;
                        document.getElementById('modalLeadSource').textContent = lead.source;
                        document.getElementById('modalLeadProduct').textContent = lead.product;
                        document.getElementById('modalLeadStatus').textContent = lead.status;
                        
                        // Populate lead history table
                        const historyTable = document.getElementById('modalLeadHistory');
                        historyTable.innerHTML = '';
                        lead.history.forEach(item => {
                            const row = document.createElement('tr');
                            row.innerHTML = `
                                <td>${item.date}</td>
                                <td>${item.action}</td>
                                <td>${item.notes}</td>
                                <td>${item.by}</td>
                            `;
                            historyTable.appendChild(row);
                        });
                        
                        const modal = new bootstrap.Modal(document.getElementById('leadDetailsModal'));
                        modal.show();
                    }
                });
            });
            
            // View Purchase Order Details
            document.querySelectorAll('.view-purchase-order').forEach(button => {
                button.addEventListener('click', function() {
                    const purchaseOrderId = this.getAttribute('data-purchase-order');
                    
                    // Mock data - in a real app, this would come from an API
                    const purchaseOrderData = {
                        'PO001': {
                            purchaseOrderId: 'PO001',
                            date: '23-Aug-2025',
                            supplier: 'ElectroParts Ltd.',
                            product: 'LED Panels',
                            quantity: 10,
                            amount: '₹25,000',
                            status: 'Pending'
                        },
                        'PO002': {
                            purchaseOrderId: 'PO002',
                            date: '22-Aug-2025',
                            supplier: 'TechSupply Co.',
                            product: 'AC Compressors',
                            quantity: 5,
                            amount: '₹35,000',
                            status: 'Confirmed',
                            expectedDelivery: '30-Aug-2025'
                        },
                        'PO003': {
                            purchaseOrderId: 'PO003',
                            date: '20-Aug-2025',
                            supplier: 'HomeAppliances Inc.',
                            product: 'Washing Machine Motors',
                            quantity: 15,
                            amount: '₹45,000',
                            status: 'Received'
                        }
                    };
                    
                    const purchaseOrder = purchaseOrderData[purchaseOrderId];
                    if (purchaseOrder) {
                        document.getElementById('modalPurchaseOrderId').textContent = purchaseOrder.purchaseOrderId;
                        document.getElementById('modalPurchaseOrderDate').textContent = purchaseOrder.date;
                        document.getElementById('modalPurchaseOrderSupplier').textContent = purchaseOrder.supplier;
                        document.getElementById('modalPurchaseOrderProduct').textContent = purchaseOrder.product;
                        document.getElementById('modalPurchaseOrderQuantity').textContent = purchaseOrder.quantity;
                        document.getElementById('modalPurchaseOrderAmount').textContent = purchaseOrder.amount;
                        document.getElementById('modalPurchaseOrderStatus').textContent = purchaseOrder.status;
                        
                        const modal = new bootstrap.Modal(document.getElementById('purchaseOrderDetailsModal'));
                        modal.show();
                    }
                });
            });
            
            // View Return Details
            document.querySelectorAll('.view-return').forEach(button => {
                button.addEventListener('click', function() {
                    const returnId = this.getAttribute('data-return');
                    
                    // Mock data - in a real app, this would come from an API
                    const returnData = {
                        'RM001': {
                            returnId: 'RM001',
                            orderId: 'PO004',
                            date: '21-Aug-2025',
                            supplier: 'ElectroParts Ltd.',
                            product: 'LED Panels',
                            quantity: 2,
                            reason: 'Defective',
                            status: 'Processing'
                        }
                    };
                    
                    const returnItem = returnData[returnId];
                    if (returnItem) {
                        document.getElementById('modalReturnId').textContent = returnItem.returnId;
                        document.getElementById('modalReturnOrderId').textContent = returnItem.orderId;
                        document.getElementById('modalReturnDate').textContent = returnItem.date;
                        document.getElementById('modalReturnSupplier').textContent = returnItem.supplier;
                        document.getElementById('modalReturnProduct').textContent = returnItem.product;
                        document.getElementById('modalReturnQuantity').textContent = returnItem.quantity;
                        document.getElementById('modalReturnReason').textContent = returnItem.reason;
                        document.getElementById('modalReturnStatus').textContent = returnItem.status;
                        
                        const modal = new bootstrap.Modal(document.getElementById('returnDetailsModal'));
                        modal.show();
                    }
                });
            });
            
            // View Payable Details
            document.querySelectorAll('.view-payable').forEach(button => {
                button.addEventListener('click', function() {
                    const payableId = this.getAttribute('data-payable');
                    
                    // Mock data - in a real app, this would come from an API
                    const payableData = {
                        'INV001': {
                            payableId: 'INV001',
                            orderId: 'PO005',
                            supplier: 'TechSupply Co.',
                            amount: '₹28,000',
                            dueDate: '05-Sep-2025',
                            status: 'Pending'
                        }
                    };
                    
                    const payable = payableData[payableId];
                    if (payable) {
                        document.getElementById('modalPayableId').textContent = payable.payableId;
                        document.getElementById('modalPayableOrderId').textContent = payable.orderId;
                        document.getElementById('modalPayableSupplier').textContent = payable.supplier;
                        document.getElementById('modalPayableAmount').textContent = payable.amount;
                        document.getElementById('modalPayableDueDate').textContent = payable.dueDate;
                        document.getElementById('modalPayableStatus').textContent = payable.status;
                        
                        const modal = new bootstrap.Modal(document.getElementById('payableDetailsModal'));
                        modal.show();
                    }
                });
            });
            
            // View Claim Details
            document.querySelectorAll('.view-claim').forEach(button => {
                button.addEventListener('click', function() {
                    const claimId = this.getAttribute('data-claim');
                    
                    // Mock data - in a real app, this would come from an API
                    const claimData = {
                        'EC001': {
                            claimId: 'EC001',
                            date: '23-Aug-2025',
                            engineer: 'Rajesh Kumar',
                            serviceId: 'SR001',
                            customer: 'Vikram Patel',
                            amount: '₹1,500',
                            status: 'Pending',
                            items: [
                                { name: 'LED Panel', quantity: 1, price: 1500, total: 1500 }
                            ]
                        },
                        'BC001': {
                            claimId: 'BC001',
                            date: '22-Aug-2025',
                            engineer: 'Mumbai Central',
                            serviceId: 'SR002',
                            customer: 'Neha Sharma',
                            amount: '₹2,000',
                            status: 'Pending',
                            items: [
                                { name: 'Motor', quantity: 1, price: 2000, total: 2000 }
                            ]
                        },
                        'AC001': {
                            claimId: 'AC001',
                            date: '21-Aug-2025',
                            engineer: 'Rajesh Kumar',
                            serviceId: 'SR003',
                            customer: 'Rahul Verma',
                            amount: '₹1,200',
                            status: 'Approved',
                            approvedDate: '22-Aug-2025',
                            items: [
                                { name: 'Compressor', quantity: 1, price: 1200, total: 1200 }
                            ]
                        },
                        'RC001': {
                            claimId: 'RC001',
                            date: '20-Aug-2025',
                            engineer: 'Vikram Patel',
                            serviceId: 'SR004',
                            customer: 'Amit Singh',
                            amount: '₹1,800',
                            status: 'Rejected',
                            rejectDate: '21-Aug-2025',
                            reason: 'Invalid Claim',
                            items: [
                                { name: 'LED Panel', quantity: 1, price: 1800, total: 1800 }
                            ]
                        }
                    };
                    
                    const claim = claimData[claimId];
                    if (claim) {
                        document.getElementById('modalClaimId').textContent = claim.claimId;
                        document.getElementById('modalClaimDate').textContent = claim.date;
                        document.getElementById('modalClaimEngineer').textContent = claim.engineer;
                        document.getElementById('modalClaimServiceId').textContent = claim.serviceId;
                        document.getElementById('modalClaimCustomer').textContent = claim.customer;
                        document.getElementById('modalClaimAmount').textContent = claim.amount;
                        document.getElementById('modalClaimStatus').textContent = claim.status;
                        
                        // Populate claim items table
                        const itemsTable = document.getElementById('modalClaimItems');
                        itemsTable.innerHTML = '';
                        claim.items.forEach(item => {
                            const row = document.createElement('tr');
                            row.innerHTML = `
                                <td>${item.name}</td>
                                <td>${item.quantity}</td>
                                <td>₹${item.price.toLocaleString()}</td>
                                <td>₹${item.total.toLocaleString()}</td>
                            `;
                            itemsTable.appendChild(row);
                        });
                        
                        const modal = new bootstrap.Modal(document.getElementById('claimDetailsModal'));
                        modal.show();
                    }
                });
            });
            
            // View Category Details
            document.querySelectorAll('.view-category').forEach(button => {
                button.addEventListener('click', function() {
                    const categoryId = this.getAttribute('data-category');
                    
                    // Mock data - in a real app, this would come from an API
                    const categoryData = {
                        'CAT001': {
                            categoryId: 'CAT001',
                            categoryName: 'Televisions',
                            description: 'LED, LCD, OLED TVs',
                            itemsCount: 45,
                            status: 'Active'
                        },
                        'CAT002': {
                            categoryId: 'CAT002',
                            categoryName: 'Washing Machines',
                            description: 'Top load, Front load washers',
                            itemsCount: 32,
                            status: 'Active'
                        }
                    };
                    
                    const category = categoryData[categoryId];
                    if (category) {
                        document.getElementById('modalCategoryId').textContent = category.categoryId;
                        document.getElementById('modalCategoryName').textContent = category.categoryName;
                        document.getElementById('modalCategoryDescription').textContent = category.description;
                        document.getElementById('modalCategoryItemsCount').textContent = category.itemsCount;
                        document.getElementById('modalCategoryStatus').textContent = category.status;
                        
                        const modal = new bootstrap.Modal(document.getElementById('categoryDetailsModal'));
                        modal.show();
                    }
                });
            });
            
            // View Item Details
            document.querySelectorAll('.view-item').forEach(button => {
                button.addEventListener('click', function() {
                    const itemId = this.getAttribute('data-item');
                    
                    // Mock data - in a real app, this would come from an API
                    const itemData = {
                        'ITM001': {
                            itemId: 'ITM001',
                            itemName: '55" LED TV',
                            category: 'Televisions',
                            brand: 'Samsung',
                            model: 'UE55TU8000',
                            price: '₹45,000',
                            stock: 15,
                            status: 'Active'
                        }
                    };
                    
                    const item = itemData[itemId];
                    if (item) {
                        document.getElementById('modalItemId').textContent = item.itemId;
                        document.getElementById('modalItemName').textContent = item.itemName;
                        document.getElementById('modalItemCategory').textContent = item.category;
                        document.getElementById('modalItemBrand').textContent = item.brand;
                        document.getElementById('modalItemModel').textContent = item.model;
                        document.getElementById('modalItemPrice').textContent = item.price;
                        document.getElementById('modalItemStock').textContent = item.stock;
                        document.getElementById('modalItemStatus').textContent = item.status;
                        
                        const modal = new bootstrap.Modal(document.getElementById('itemDetailsModal'));
                        modal.show();
                    }
                });
            });
            
            // View Variant Details
            document.querySelectorAll('.view-variant').forEach(button => {
                button.addEventListener('click', function() {
                    const variantId = this.getAttribute('data-variant');
                    
                    // Mock data - in a real app, this would come from an API
                    const variantData = {
                        'VAR001': {
                            variantId: 'VAR001',
                            item: '55" LED TV',
                            attributes: 'Black',
                            sku: 'SAM-LED55-BLK',
                            price: '₹45,000',
                            stock: 10,
                            status: 'Active'
                        }
                    };
                    
                    const variant = variantData[variantId];
                    if (variant) {
                        document.getElementById('modalVariantId').textContent = variant.variantId;
                        document.getElementById('modalVariantItem').textContent = variant.item;
                        document.getElementById('modalVariantAttributes').textContent = variant.attributes;
                        document.getElementById('modalVariantSku').textContent = variant.sku;
                        document.getElementById('modalVariantPrice').textContent = variant.price;
                        document.getElementById('modalVariantStock').textContent = variant.stock;
                        document.getElementById('modalVariantStatus').textContent = variant.status;
                        
                        const modal = new bootstrap.Modal(document.getElementById('variantDetailsModal'));
                        modal.show();
                    }
                });
            });
            
            // View Stock Details
            document.querySelectorAll('.view-stock').forEach(button => {
                button.addEventListener('click', function() {
                    const stockId = this.getAttribute('data-stock');
                    
                    // Mock data - in a real app, this would come from an API
                    const stockData = {
                        'ITM001': {
                            item: '55" LED TV',
                            warehouse: 'Main Warehouse',
                            available: 15,
                            reserved: 3,
                            total: 18,
                            lastUpdated: '23-Aug-2025'
                        }
                    };
                    
                    const stock = stockData[stockId];
                    if (stock) {
                        document.getElementById('modalStockItem').textContent = stock.item;
                        document.getElementById('modalStockWarehouse').textContent = stock.warehouse;
                        document.getElementById('modalStockAvailable').textContent = stock.available;
                        document.getElementById('modalStockReserved').textContent = stock.reserved;
                        document.getElementById('modalStockTotal').textContent = stock.total;
                        document.getElementById('modalStockLastUpdated').textContent = stock.lastUpdated;
                        
                        const modal = new bootstrap.Modal(document.getElementById('stockDetailsModal'));
                        modal.show();
                    }
                });
            });
            
            // View Branch Stock Details
            document.querySelectorAll('.view-branch-stock').forEach(button => {
                button.addEventListener('click', function() {
                    const branchStockId = this.getAttribute('data-branch-stock');
                    
                    // Mock data - in a real app, this would come from an API
                    const branchStockData = {
                        'MUM-ITM001': {
                            branch: 'Mumbai Branch',
                            item: '55" LED TV',
                            available: 5,
                            reserved: 1,
                            total: 6,
                            lastUpdated: '23-Aug-2025'
                        }
                    };
                    
                    const branchStock = branchStockData[branchStockId];
                    if (branchStock) {
                        document.getElementById('modalBranchStockBranch').textContent = branchStock.branch;
                        document.getElementById('modalBranchStockItem').textContent = branchStock.item;
                        document.getElementById('modalBranchStockAvailable').textContent = branchStock.available;
                        document.getElementById('modalBranchStockReserved').textContent = branchStock.reserved;
                        document.getElementById('modalBranchStockTotal').textContent = branchStock.total;
                        document.getElementById('modalBranchStockLastUpdated').textContent = branchStock.lastUpdated;
                        
                        const modal = new bootstrap.Modal(document.getElementById('branchStockDetailsModal'));
                        modal.show();
                    }
                });
            });
            
            // View Engineer Stock Details
            document.querySelectorAll('.view-engineer-stock').forEach(button => {
                button.addEventListener('click', function() {
                    const engineerStockId = this.getAttribute('data-engineer-stock');
                    
                    // Mock data - in a real app, this would come from an API
                    const engineerStockData = {
                        'ENG-PART1001': {
                            engineer: 'Rajesh Kumar',
                            part: 'LED Panel',
                            partId: 'PART1001',
                            quantity: 5,
                            issuedDate: '20-Aug-2025',
                            status: 'Active'
                        }
                    };
                    
                    const engineerStock = engineerStockData[engineerStockId];
                    if (engineerStock) {
                        document.getElementById('modalEngineerStockEngineer').textContent = engineerStock.engineer;
                        document.getElementById('modalEngineerStockPart').textContent = engineerStock.part;
                        document.getElementById('modalEngineerStockPartId').textContent = engineerStock.partId;
                        document.getElementById('modalEngineerStockQuantity').textContent = engineerStock.quantity;
                        document.getElementById('modalEngineerStockIssuedDate').textContent = engineerStock.issuedDate;
                        document.getElementById('modalEngineerStockStatus').textContent = engineerStock.status;
                        
                        const modal = new bootstrap.Modal(document.getElementById('engineerStockDetailsModal'));
                        modal.show();
                    }
                });
            });
            
            // View User Details
            document.querySelectorAll('.view-user').forEach(button => {
                button.addEventListener('click', function() {
                    const userId = this.getAttribute('data-user');
                    
                    // Mock data - in a real app, this would come from an API
                    const userData = {
                        'USR001': {
                            userId: 'USR001',
                            userName: 'Rajesh Kumar',
                            email: 'rajesh@example.com',
                            role: 'Service Engineer',
                            branch: 'Mumbai',
                            mobile: '9876543210',
                            status: 'Active'
                        },
                        'USR002': {
                            userId: 'USR002',
                            userName: 'Vikram Patel',
                            email: 'vikram@example.com',
                            role: 'Branch Manager',
                            branch: 'Pune',
                            mobile: '8765432109',
                            status: 'Active'
                        }
                    };
                    
                    const user = userData[userId];
                    if (user) {
                        document.getElementById('modalUserId').textContent = user.userId;
                        document.getElementById('modalUserName').textContent = user.userName;
                        document.getElementById('modalUserEmail').textContent = user.email;
                        document.getElementById('modalUserRole').textContent = user.role;
                        document.getElementById('modalUserBranch').textContent = user.branch;
                        document.getElementById('modalUserMobile').textContent = user.mobile;
                        document.getElementById('modalUserStatus').textContent = user.status;
                        
                        const modal = new bootstrap.Modal(document.getElementById('userDetailsModal'));
                        modal.show();
                    }
                });
            });
            
            // View Branch Details
            document.querySelectorAll('.view-branch').forEach(button => {
                button.addEventListener('click', function() {
                    const branchId = this.getAttribute('data-branch');
                    
                    // Mock data - in a real app, this would come from an API
                    const branchData = {
                        'BR001': {
                            branchId: 'BR001',
                            branchName: 'Mumbai Central',
                            location: 'Mumbai, Maharashtra',
                            manager: 'Vikram Patel',
                            contact: '9876543210',
                            products: 'TV, AC, Refrigerator',
                            status: 'Active'
                        }
                    };
                    
                    const branch = branchData[branchId];
                    if (branch) {
                        document.getElementById('modalBranchId').textContent = branch.branchId;
                        document.getElementById('modalBranchName').textContent = branch.branchName;
                        document.getElementById('modalBranchLocation').textContent = branch.location;
                        document.getElementById('modalBranchManager').textContent = branch.manager;
                        document.getElementById('modalBranchContact').textContent = branch.contact;
                        document.getElementById('modalBranchProducts').textContent = branch.products;
                        document.getElementById('modalBranchStatus').textContent = branch.status;
                        
                        const modal = new bootstrap.Modal(document.getElementById('branchDetailsModal'));
                        modal.show();
                    }
                });
            });
            
            // View Product Details
            document.querySelectorAll('.view-product').forEach(button => {
                button.addEventListener('click', function() {
                    const productId = this.getAttribute('data-product');
                    
                    // Mock data - in a real app, this would come from an API
                    const productData = {
                        'PRD001': {
                            productId: 'PRD001',
                            productName: 'Samsung 55" LED TV',
                            category: 'Television',
                            branch: 'All Branches',
                            serviceable: 'Yes',
                            amcAvailable: 'Yes',
                            status: 'Active'
                        }
                    };
                    
                    const product = productData[productId];
                    if (product) {
                        document.getElementById('modalProductId').textContent = product.productId;
                        document.getElementById('modalProductName').textContent = product.productName;
                        document.getElementById('modalProductCategory').textContent = product.category;
                        document.getElementById('modalProductBranch').textContent = product.branch;
                        document.getElementById('modalProductServiceable').textContent = product.serviceable;
                        document.getElementById('modalProductAmcAvailable').textContent = product.amcAvailable;
                        document.getElementById('modalProductStatus').textContent = product.status;
                        
                        const modal = new bootstrap.Modal(document.getElementById('productDetailsModal'));
                        modal.show();
                    }
                });
            });
            
            // View PIN Mapping Details
            document.querySelectorAll('.view-pin-mapping').forEach(button => {
                button.addEventListener('click', function() {
                    const pinMappingId = this.getAttribute('data-pin-mapping');
                    
                    // Mock data - in a real app, this would come from an API
                    const pinMappingData = {
                        '400001': {
                            pin: '400001',
                            area: 'Mumbai Central',
                            city: 'Mumbai',
                            state: 'Maharashtra',
                            branch: 'Mumbai Central',
                            engineer: 'Rajesh Kumar',
                            status: 'Active'
                        }
                    };
                    
                    const pinMapping = pinMappingData[pinMappingId];
                    if (pinMapping) {
                        document.getElementById('modalPinMappingPin').textContent = pinMapping.pin;
                        document.getElementById('modalPinMappingArea').textContent = pinMapping.area;
                        document.getElementById('modalPinMappingCity').textContent = pinMapping.city;
                        document.getElementById('modalPinMappingState').textContent = pinMapping.state;
                        document.getElementById('modalPinMappingBranch').textContent = pinMapping.branch;
                        document.getElementById('modalPinMappingEngineer').textContent = pinMapping.engineer;
                        document.getElementById('modalPinMappingStatus').textContent = pinMapping.status;
                        
                        const modal = new bootstrap.Modal(document.getElementById('pinMappingDetailsModal'));
                        modal.show();
                    }
                });
            });
            
            // Print Invoice
            document.querySelectorAll('.print-invoice').forEach(button => {
                button.addEventListener('click', function() {
                    const invoiceId = this.getAttribute('data-invoice');
                    console.log('Printing invoice: ' + invoiceId);
                    alert('Preparing to print invoice: ' + invoiceId);
                    window.print();
                });
            });
            
            // Print Order
            document.getElementById('printOrderBtn')?.addEventListener('click', function() {
                console.log('Printing order');
                alert('Preparing to print order');
                window.print();
            });
            
            // Print Quotation
            document.getElementById('printQuotationBtn')?.addEventListener('click', function() {
                console.log('Printing quotation');
                alert('Preparing to print quotation');
                window.print();
            });
            
            // Print Payment
            document.getElementById('printPaymentBtn')?.addEventListener('click', function() {
                console.log('Printing payment receipt');
                alert('Preparing to print payment receipt');
                window.print();
            });
            
            // Print Service
            document.getElementById('printServiceBtn')?.addEventListener('click', function() {
                console.log('Printing service details');
                alert('Preparing to print service details');
                window.print();
            });
            
            // Print Purchase Order
            document.getElementById('printPurchaseOrderBtn')?.addEventListener('click', function() {
                console.log('Printing purchase order');
                alert('Preparing to print purchase order');
                window.print();
            });
            
            // Print Return
            document.getElementById('printReturnBtn')?.addEventListener('click', function() {
                console.log('Printing return details');
                alert('Preparing to print return details');
                window.print();
            });
            
            // Print Claim
            document.getElementById('printClaimBtn')?.addEventListener('click', function() {
                console.log('Printing claim');
                alert('Preparing to print claim');
                window.print();
            });
            
            // Send Reminder
            document.getElementById('sendReminderBtn')?.addEventListener('click', function() {
                const invoice = document.getElementById('modalReceivableInvoice').textContent;
                const customer = document.getElementById('modalReceivableCustomer').textContent;
                const mobile = document.getElementById('modalReceivableMobile').textContent;
                
                const message = `Dear ${customer}, this is a reminder that your invoice ${invoice} is pending payment. Please make the payment at your earliest convenience. Thank you.`;
                
                // Open WhatsApp with pre-filled message
                const whatsappUrl = `https://wa.me/${mobile}?text=${encodeURIComponent(message)}`;
                window.open(whatsappUrl, '_blank');
            });
            
            // Process Payment
            document.getElementById('processPaymentBtn')?.addEventListener('click', function() {
                const payableId = document.getElementById('modalPayableId').textContent;
                const amount = document.getElementById('modalPayableAmount').textContent;
                const supplier = document.getElementById('modalPayableSupplier').textContent;
                
                alert(`Processing payment of ${amount} to ${supplier} for ${payableId}`);
                bootstrap.Modal.getInstance(document.getElementById('payableDetailsModal')).hide();
            });
            
            // Convert Lead
            document.getElementById('convertLeadBtn')?.addEventListener('click', function() {
                const leadId = document.getElementById('modalLeadId').textContent;
                const customer = document.getElementById('modalLeadCustomer').textContent;
                
                alert(`Converting lead ${leadId} for customer ${customer} to a customer record`);
                bootstrap.Modal.getInstance(document.getElementById('leadDetailsModal')).hide();
            });
            
            // Return Engineer Stock
            document.getElementById('returnEngineerStockBtn')?.addEventListener('click', function() {
                const engineer = document.getElementById('modalEngineerStockEngineer').textContent;
                const part = document.getElementById('modalEngineerStockPart').textContent;
                const quantity = document.getElementById('modalEngineerStockQuantity').textContent;
                
                alert(`Returning ${quantity} units of ${part} from ${engineer}'s stock`);
                bootstrap.Modal.getInstance(document.getElementById('engineerStockDetailsModal')).hide();
            });
            
            // Edit Category
            document.getElementById('editCategoryBtn')?.addEventListener('click', function() {
                const categoryId = document.getElementById('modalCategoryId').textContent;
                const categoryName = document.getElementById('modalCategoryName').textContent;
                const description = document.getElementById('modalCategoryDescription').textContent;
                
                // Close the details modal
                bootstrap.Modal.getInstance(document.getElementById('categoryDetailsModal')).hide();
                
                // Open the edit modal with pre-filled data
                const modal = new bootstrap.Modal(document.getElementById('newCategoryModal'));
                document.getElementById('categoryName').value = categoryName;
                document.getElementById('categoryDescription').value = description;
                modal.show();
            });
            
            // Edit Item
            document.getElementById('editItemBtn')?.addEventListener('click', function() {
                const itemId = document.getElementById('modalItemId').textContent;
                const itemName = document.getElementById('modalItemName').textContent;
                const itemCategory = document.getElementById('modalItemCategory').textContent;
                const itemBrand = document.getElementById('modalItemBrand').textContent;
                const itemModel = document.getElementById('modalItemModel').textContent;
                const itemPrice = document.getElementById('modalItemPrice').textContent.replace('₹', '');
                const itemStock = document.getElementById('modalItemStock').textContent;
                
                // Close the details modal
                bootstrap.Modal.getInstance(document.getElementById('itemDetailsModal')).hide();
                
                // Open the edit modal with pre-filled data
                const modal = new bootstrap.Modal(document.getElementById('newItemModal'));
                document.getElementById('itemName').value = itemName;
                document.getElementById('itemCategory').value = itemCategory;
                document.getElementById('itemBrand').value = itemBrand;
                document.getElementById('itemModel').value = itemModel;
                document.getElementById('itemPrice').value = itemPrice;
                document.getElementById('itemStock').value = itemStock;
                modal.show();
            });
            
            // Edit Stock
            document.getElementById('editStockBtn')?.addEventListener('click', function() {
                const item = document.getElementById('modalStockItem').textContent;
                const warehouse = document.getElementById('modalStockWarehouse').textContent;
                const available = document.getElementById('modalStockAvailable').textContent;
                const reserved = document.getElementById('modalStockReserved').textContent;
                
                alert(`Editing stock for ${item} in ${warehouse} warehouse. Available: ${available}, Reserved: ${reserved}`);
            });
            
            // Edit Branch Stock
            document.getElementById('editBranchStockBtn')?.addEventListener('click', function() {
                const branch = document.getElementById('modalBranchStockBranch').textContent;
                const item = document.getElementById('modalBranchStockItem').textContent;
                const available = document.getElementById('modalBranchStockAvailable').textContent;
                const reserved = document.getElementById('modalBranchStockReserved').textContent;
                
                alert(`Editing branch stock for ${item} in ${branch} branch. Available: ${available}, Reserved: ${reserved}`);
            });
            
            // Edit Variant
            document.getElementById('editVariantBtn')?.addEventListener('click', function() {
                const variantId = document.getElementById('modalVariantId').textContent;
                const item = document.getElementById('modalVariantItem').textContent;
                const attributes = document.getElementById('modalVariantAttributes').textContent;
                const sku = document.getElementById('modalVariantSku').textContent;
                const price = document.getElementById('modalVariantPrice').textContent.replace('₹', '');
                const stock = document.getElementById('modalVariantStock').textContent;
                
                alert(`Editing variant ${variantId} for item ${item}. Attributes: ${attributes}, SKU: ${sku}, Price: ${price}, Stock: ${stock}`);
            });
            
            // Edit User
            document.getElementById('editUserBtn')?.addEventListener('click', function() {
                const userId = document.getElementById('modalUserId').textContent;
                const userName = document.getElementById('modalUserName').textContent;
                const userEmail = document.getElementById('modalUserEmail').textContent;
                const userRole = document.getElementById('modalUserRole').textContent;
                const userBranch = document.getElementById('modalUserBranch').textContent;
                const userMobile = document.getElementById('modalUserMobile').textContent;
                const userStatus = document.getElementById('modalUserStatus').textContent;
                
                // Close the details modal
                bootstrap.Modal.getInstance(document.getElementById('userDetailsModal')).hide();
                
                // Open the edit modal with pre-filled data
                const modal = new bootstrap.Modal(document.getElementById('userManagementModal'));
                document.getElementById('userName').value = userName;
                document.getElementById('userEmail').value = userEmail;
                document.getElementById('userRole').value = userRole.toLowerCase().replace(' ', '-');
                document.getElementById('userBranch').value = userBranch.toLowerCase();
                document.getElementById('userMobile').value = userMobile;
                document.getElementById('userStatus').value = userStatus.toLowerCase();
                modal.show();
            });
            
            // Edit Branch
            document.getElementById('editBranchBtn')?.addEventListener('click', function() {
                const branchId = document.getElementById('modalBranchId').textContent;
                const branchName = document.getElementById('modalBranchName').textContent;
                const branchLocation = document.getElementById('modalBranchLocation').textContent;
                const branchManager = document.getElementById('modalBranchManager').textContent;
                const branchContact = document.getElementById('modalBranchContact').textContent;
                const branchProducts = document.getElementById('modalBranchProducts').textContent;
                const branchStatus = document.getElementById('modalBranchStatus').textContent;
                
                // Close the details modal
                bootstrap.Modal.getInstance(document.getElementById('branchDetailsModal')).hide();
                
                // Open the edit modal with pre-filled data
                const modal = new bootstrap.Modal(document.getElementById('branchManagementModal'));
                document.getElementById('branchName').value = branchName;
                document.getElementById('branchCode').value = branchId;
                document.getElementById('branchLocation').value = branchLocation;
                document.getElementById('branchManager').value = branchManager;
                document.getElementById('branchContact').value = branchContact;
                document.getElementById('branchProducts').value = branchProducts;
                document.getElementById('branchActive').checked = branchStatus === 'Active';
                modal.show();
            });
            
            // Edit Product
            document.getElementById('editProductBtn')?.addEventListener('click', function() {
                const productId = document.getElementById('modalProductId').textContent;
                const productName = document.getElementById('modalProductName').textContent;
                const productCategory = document.getElementById('modalProductCategory').textContent;
                const productBranch = document.getElementById('modalProductBranch').textContent;
                const productServiceable = document.getElementById('modalProductServiceable').textContent;
                const productAmcAvailable = document.getElementById('modalProductAmcAvailable').textContent;
                const productStatus = document.getElementById('modalProductStatus').textContent;
                
                // Close the details modal
                bootstrap.Modal.getInstance(document.getElementById('productDetailsModal')).hide();
                
                // Open the edit modal with pre-filled data
                const modal = new bootstrap.Modal(document.getElementById('productManagementModal'));
                document.getElementById('productName').value = productName;
                document.getElementById('productCategory').value = productCategory;
                document.getElementById('productBranch').value = productBranch.toLowerCase().replace(' ', '');
                document.getElementById('productServiceable').checked = productServiceable === 'Yes';
                document.getElementById('productAmcAvailable').checked = productAmcAvailable === 'Yes';
                document.getElementById('productActive').checked = productStatus === 'Active';
                modal.show();
            });
            
            // Edit PIN Mapping
            document.getElementById('editPinMappingBtn')?.addEventListener('click', function() {
                const pin = document.getElementById('modalPinMappingPin').textContent;
                const area = document.getElementById('modalPinMappingArea').textContent;
                const city = document.getElementById('modalPinMappingCity').textContent;
                const state = document.getElementById('modalPinMappingState').textContent;
                const branch = document.getElementById('modalPinMappingBranch').textContent;
                const engineer = document.getElementById('modalPinMappingEngineer').textContent;
                const status = document.getElementById('modalPinMappingStatus').textContent;
                
                // Close the details modal
                bootstrap.Modal.getInstance(document.getElementById('pinMappingDetailsModal')).hide();
                
                // Open the edit modal with pre-filled data
                const modal = new bootstrap.Modal(document.getElementById('pinMappingManagementModal'));
                document.getElementById('pinCode').value = pin;
                document.getElementById('pinArea').value = area;
                document.getElementById('pinCity').value = city;
                document.getElementById('pinState').value = state;
                document.getElementById('pinBranch').value = branch.toLowerCase();
                document.getElementById('pinEngineer').value = engineer.toLowerCase().replace(' ', '');
                document.getElementById('pinActive').checked = status === 'Active';
                modal.show();
            });
            
            // WhatsApp Integration
            document.querySelectorAll('.whatsapp-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const customer = this.getAttribute('data-customer');
                    const mobile = this.getAttribute('data-mobile');
                    const invoice = this.getAttribute('data-invoice');
                    const order = this.getAttribute('data-order');
                    const quote = this.getAttribute('data-quote');
                    const type = this.getAttribute('data-type');
                    
                    let message = '';
                    
                    if (invoice) {
                        if (type === 'reminder') {
                            message = `Dear ${customer}, this is a reminder that your invoice ${invoice} is pending payment. Please make the payment at your earliest convenience. Thank you.`;
                        } else {
                            message = `Dear ${customer}, thank you for your purchase. Your invoice ${invoice} has been generated. Please find the details attached.`;
                        }
                    } else if (order) {
                        message = `Dear ${customer}, your order ${order} has been confirmed. We will notify you once it is ready for delivery.`;
                    } else if (quote) {
                        message = `Dear ${customer}, thank you for your inquiry. We have prepared a quotation for you (Quote ID: ${quote}). Please find the details attached.`;
                    }
                    
                    // Open WhatsApp with pre-filled message
                    const whatsappUrl = `https://wa.me/${mobile}?text=${encodeURIComponent(message)}`;
                    window.open(whatsappUrl, '_blank');
                });
            });
            
            // Form Steps Navigation
            const nextStepButtons = document.querySelectorAll('.next-step');
            const prevStepButtons = document.querySelectorAll('.prev-step');
            
            nextStepButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const currentStep = this.closest('.form-step');
                    const nextStep = currentStep.nextElementSibling;
                    
                    if (nextStep && nextStep.classList.contains('form-step')) {
                        currentStep.classList.remove('active');
                        nextStep.classList.add('active');
                        
                        // Update step indicator
                        const steps = document.querySelectorAll('.step');
                        const currentStepIndex = Array.from(document.querySelectorAll('.form-step')).indexOf(currentStep);
                        if (steps[currentStepIndex + 1]) {
                            steps[currentStepIndex].classList.remove('active');
                            steps[currentStepIndex].classList.add('completed');
                            steps[currentStepIndex + 1].classList.add('active');
                        }
                    }
                });
            });
            
            prevStepButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const currentStep = this.closest('.form-step');
                    const prevStep = currentStep.previousElementSibling;
                    
                    if (prevStep && prevStep.classList.contains('form-step')) {
                        currentStep.classList.remove('active');
                        prevStep.classList.add('active');
                        
                        // Update step indicator
                        const steps = document.querySelectorAll('.step');
                        const currentStepIndex = Array.from(document.querySelectorAll('.form-step')).indexOf(currentStep);
                        if (steps[currentStepIndex - 1]) {
                            steps[currentStepIndex].classList.remove('active');
                            steps[currentStepIndex - 1].classList.add('active');
                            steps[currentStepIndex - 1].classList.remove('completed');
                        }
                    }
                });
            });
            
            // New Service Request Form Submission
            const newCallForm = document.getElementById('newCallForm');
            if (newCallForm) {
                newCallForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    alert('Service request submitted successfully!');
                    this.reset();
                    
                    // Reset form steps
                    document.querySelectorAll('.form-step').forEach(step => {
                        step.classList.remove('active');
                    });
                    document.getElementById('step1').classList.add('active');
                    
                    // Reset step indicators
                    document.querySelectorAll('.step').forEach((step, index) => {
                        step.classList.remove('active', 'completed');
                        if (index === 0) step.classList.add('active');
                    });
                });
            }
            
            // Assign Service Form
            const assignServiceButtons = document.querySelectorAll('.assign-service');
            assignServiceButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const serviceId = this.getAttribute('data-service');
                    const customer = this.getAttribute('data-customer');
                    
                    // Pre-fill the assign call form
                    document.getElementById('serviceId').value = serviceId;
                    document.getElementById('customerNameAssign').value = customer;
                    
                    // Switch to Assign Call tab
                    const assignCallTab = document.getElementById('assign-call-tab');
                    if (assignCallTab) {
                        assignCallTab.click();
                    }
                });
            });
            
            // Assign Call Form Submission
            const assignCallForm = document.getElementById('assignCallForm');
            if (assignCallForm) {
                assignCallForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    const serviceId = document.getElementById('serviceId').value;
                    const customer = document.getElementById('customerNameAssign').value;
                    const branch = document.getElementById('assignBranch').value;
                    const engineer = document.getElementById('assignEngineer').value;
                    const notes = document.getElementById('assignNotes').value;
                    
                    alert(`Service call ${serviceId} for ${customer} has been assigned to ${engineer} at ${branch} branch.`);
                    this.reset();
                    
                    // Update the service status in the service requests table
                    // In a real app, this would be done via an API call
                });
            }
            
            // Configure Portal
            document.querySelectorAll('.configure-portal').forEach(button => {
                button.addEventListener('click', function() {
                    const portal = this.getAttribute('data-portal');
                    document.getElementById('portalName').value = portal.charAt(0).toUpperCase() + portal.slice(1);
                    
                    const modal = new bootstrap.Modal(document.getElementById('configurePortalModal'));
                    modal.show();
                });
            });
            
            // Save Portal Configuration
            const savePortalConfigBtn = document.getElementById('savePortalConfigBtn');
            if (savePortalConfigBtn) {
                savePortalConfigBtn.addEventListener('click', function() {
                    const portalName = document.getElementById('portalName').value;
                    const apiKey = document.getElementById('portalApiKey').value;
                    const apiSecret = document.getElementById('portalApiSecret').value;
                    const webhookUrl = document.getElementById('portalWebhookUrl').value;
                    const isActive = document.getElementById('portalActive').checked;
                    
                    // In a real app, this would save to a database
                    console.log('Saving portal configuration:', {
                        portalName,
                        apiKey,
                        apiSecret,
                        webhookUrl,
                        isActive
                    });
                    
                    alert(`${portalName} portal configuration saved successfully!`);
                    bootstrap.Modal.getInstance(document.getElementById('configurePortalModal')).hide();
                });
            }
            
            // AMC Plan Management
            document.querySelectorAll('.manage-amc, .manage-amc-contract').forEach(button => {
                button.addEventListener('click', function() {
                    const plan = this.getAttribute('data-plan');
                    document.getElementById('amcPlanName').value = plan.charAt(0).toUpperCase() + plan.slice(1);
                    
                    // Set default values based on plan type
                    if (plan === 'basic') {
                        document.getElementById('amcPlanPrice').value = '5000';
                        document.getElementById('amcPlanDuration').value = '12';
                        document.getElementById('amcPlanFeatures').value = 'Quarterly Maintenance\nBasic Repairs\nPhone Support';
                    } else if (plan === 'premium') {
                        document.getElementById('amcPlanPrice').value = '8000';
                        document.getElementById('amcPlanDuration').value = '12';
                        document.getElementById('amcPlanFeatures').value = 'Bi-monthly Maintenance\nPriority Repairs\nPhone & Email Support\nDiscount on Spares';
                    } else if (plan === 'silver') {
                        document.getElementById('amcPlanPrice').value = '12000';
                        document.getElementById('amcPlanDuration').value = '12';
                        document.getElementById('amcPlanFeatures').value = 'Monthly Maintenance\nFree Repairs\n24/7 Support\nDiscount on Spares\nAnnual Health Check';
                    } else if (plan === 'gold') {
                        document.getElementById('amcPlanPrice').value = '20000';
                        document.getElementById('amcPlanDuration').value = '12';
                        document.getElementById('amcPlanFeatures').value = 'Bi-weekly Maintenance\nFree Repairs & Spares\n24/7 Priority Support\nFree Annual Health Check\nReplacement Guarantee';
                    }
                    
                    const modal = new bootstrap.Modal(document.getElementById('amcPlanModal'));
                    modal.show();
                });
            });
            
            // Save AMC Plan
            const saveAmcPlanBtn = document.getElementById('saveAmcPlanBtn');
            if (saveAmcPlanBtn) {
                saveAmcPlanBtn.addEventListener('click', function() {
                    const planName = document.getElementById('amcPlanName').value;
                    const price = document.getElementById('amcPlanPrice').value;
                    const duration = document.getElementById('amcPlanDuration').value;
                    const features = document.getElementById('amcPlanFeatures').value;
                    const isActive = document.getElementById('amcPlanActive').checked;
                    
                    // In a real app, this would save to a database
                    console.log('Saving AMC plan:', {
                        planName,
                        price,
                        duration,
                        features,
                        isActive
                    });
                    
                    alert(`${planName} plan saved successfully!`);
                    bootstrap.Modal.getInstance(document.getElementById('amcPlanModal')).hide();
                });
            }
            
            // View AMC Contract
            document.querySelectorAll('.view-amc').forEach(button => {
                button.addEventListener('click', function() {
                    const contractId = this.getAttribute('data-contract');
                    
                    // Mock data - in a real app, this would come from an API
                    const contractData = {
                        'AMC001': {
                            contractId: 'AMC001',
                            customer: 'Vikram Patel',
                            product: 'Samsung LED TV',
                            planType: 'Basic',
                            startDate: '01-Jan-2025',
                            endDate: '31-Dec-2025',
                            amount: '5000',
                            status: 'Active',
                            notes: 'Basic AMC contract for Samsung LED TV'
                        },
                        'AMC002': {
                            contractId: 'AMC002',
                            customer: 'Neha Sharma',
                            product: 'LG Washing Machine',
                            planType: 'Silver',
                            startDate: '15-Feb-2025',
                            endDate: '14-Feb-2026',
                            amount: '8500',
                            status: 'Active',
                            notes: 'Silver AMC contract for LG Washing Machine'
                        }
                    };
                    
                    const contract = contractData[contractId];
                    if (contract) {
                        document.getElementById('amcContractId').value = contract.contractId;
                        document.getElementById('amcCustomer').value = contract.customer;
                        document.getElementById('amcProduct').value = contract.product;
                        document.getElementById('amcPlanType').value = contract.planType.toLowerCase();
                        document.getElementById('amcStartDate').value = contract.startDate;
                        document.getElementById('amcEndDate').value = contract.endDate;
                        document.getElementById('amcAmount').value = contract.amount;
                        document.getElementById('amcStatus').value = contract.status.toLowerCase();
                        document.getElementById('amcNotes').value = contract.notes;
                        
                        // Make form readonly for view mode
                        document.querySelectorAll('#amcContractForm input, #amcContractForm select, #amcContractForm textarea').forEach(input => {
                            input.setAttribute('readonly', true);
                            input.setAttribute('disabled', true);
                        });
                        
                        const modal = new bootstrap.Modal(document.getElementById('amcContractModal'));
                        modal.show();
                    }
                });
            });
            
            // Edit AMC Contract
            document.querySelectorAll('.edit-amc').forEach(button => {
                button.addEventListener('click', function() {
                    const contractId = this.getAttribute('data-contract');
                    
                    // Mock data - in a real app, this would come from an API
                    const contractData = {
                        'AMC001': {
                            contractId: 'AMC001',
                            customer: 'Vikram Patel',
                            product: 'Samsung LED TV',
                            planType: 'Basic',
                            startDate: '01-Jan-2025',
                            endDate: '31-Dec-2025',
                            amount: '5000',
                            status: 'Active',
                            notes: 'Basic AMC contract for Samsung LED TV'
                        },
                        'AMC002': {
                            contractId: 'AMC002',
                            customer: 'Neha Sharma',
                            product: 'LG Washing Machine',
                            planType: 'Silver',
                            startDate: '15-Feb-2025',
                            endDate: '14-Feb-2026',
                            amount: '8500',
                            status: 'Active',
                            notes: 'Silver AMC contract for LG Washing Machine'
                        }
                    };
                    
                    const contract = contractData[contractId];
                    if (contract) {
                        document.getElementById('amcContractId').value = contract.contractId;
                        document.getElementById('amcCustomer').value = contract.customer;
                        document.getElementById('amcProduct').value = contract.product;
                        document.getElementById('amcPlanType').value = contract.planType.toLowerCase();
                        document.getElementById('amcStartDate').value = contract.startDate;
                        document.getElementById('amcEndDate').value = contract.endDate;
                        document.getElementById('amcAmount').value = contract.amount;
                        document.getElementById('amcStatus').value = contract.status.toLowerCase();
                        document.getElementById('amcNotes').value = contract.notes;
                        
                        // Make form editable
                        document.querySelectorAll('#amcContractForm input, #amcContractForm select, #amcContractForm textarea').forEach(input => {
                            input.removeAttribute('readonly');
                            input.removeAttribute('disabled');
                        });
                        
                        // Keep contract ID readonly
                        document.getElementById('amcContractId').setAttribute('readonly', true);
                        
                        const modal = new bootstrap.Modal(document.getElementById('amcContractModal'));
                        modal.show();
                    }
                });
            });
            
            // Save AMC Contract
            const saveAmcContractBtn = document.getElementById('saveAmcContractBtn');
            if (saveAmcContractBtn) {
                saveAmcContractBtn.addEventListener('click', function() {
                    const contractId = document.getElementById('amcContractId').value;
                    const customer = document.getElementById('amcCustomer').value;
                    const product = document.getElementById('amcProduct').value;
                    const planType = document.getElementById('amcPlanType').value;
                    const startDate = document.getElementById('amcStartDate').value;
                    const endDate = document.getElementById('amcEndDate').value;
                    const amount = document.getElementById('amcAmount').value;
                    const status = document.getElementById('amcStatus').value;
                    const notes = document.getElementById('amcNotes').value;
                    
                    // In a real app, this would save to a database
                    console.log('Saving AMC contract:', {
                        contractId,
                        customer,
                        product,
                        planType,
                        startDate,
                        endDate,
                        amount,
                        status,
                        notes
                    });
                    
                    alert(`AMC contract for ${customer} saved successfully!`);
                    bootstrap.Modal.getInstance(document.getElementById('amcContractModal')).hide();
                });
            }
            
            // New Category
            const newCategoryBtn = document.getElementById('newCategoryBtn');
            if (newCategoryBtn) {
                newCategoryBtn.addEventListener('click', function() {
                    const modal = new bootstrap.Modal(document.getElementById('newCategoryModal'));
                    modal.show();
                });
            }
            
            // Save Category
            const saveCategoryBtn = document.getElementById('saveCategoryBtn');
            if (saveCategoryBtn) {
                saveCategoryBtn.addEventListener('click', function() {
                    const categoryName = document.getElementById('categoryName').value;
                    const categoryDescription = document.getElementById('categoryDescription').value;
                    const isActive = document.getElementById('categoryActive').checked;
                    
                    // In a real app, this would save to a database
                    console.log('Saving category:', {
                        categoryName,
                        categoryDescription,
                        isActive
                    });
                    
                    alert(`Category "${categoryName}" saved successfully!`);
                    bootstrap.Modal.getInstance(document.getElementById('newCategoryModal')).hide();
                });
            }
            
            // New Item
            const newItemBtn = document.getElementById('newItemBtn');
            if (newItemBtn) {
                newItemBtn.addEventListener('click', function() {
                    const modal = new bootstrap.Modal(document.getElementById('newItemModal'));
                    modal.show();
                });
            }
            
            // Save Item
            const saveItemBtn = document.getElementById('saveItemBtn');
            if (saveItemBtn) {
                saveItemBtn.addEventListener('click', function() {
                    const itemName = document.getElementById('itemName').value;
                    const itemCategory = document.getElementById('itemCategory').value;
                    const itemBrand = document.getElementById('itemBrand').value;
                    const itemModel = document.getElementById('itemModel').value;
                    const itemPrice = document.getElementById('itemPrice').value;
                    const itemStock = document.getElementById('itemStock').value;
                    const itemDescription = document.getElementById('itemDescription').value;
                    const isActive = document.getElementById('itemActive').checked;
                    
                    // In a real app, this would save to a database
                    console.log('Saving item:', {
                        itemName,
                        itemCategory,
                        itemBrand,
                        itemModel,
                        itemPrice,
                        itemStock,
                        itemDescription,
                        isActive
                    });
                    
                    // Update inventory when item is saved
                    alert(`Item "${itemName}" saved successfully!`);
                    bootstrap.Modal.getInstance(document.getElementById('newItemModal')).hide();
                });
            }
            
            // Stock Transfer Form
            const stockTransferForm = document.getElementById('stockTransferForm');
            if (stockTransferForm) {
                stockTransferForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    const from = document.getElementById('transferFrom').value;
                    const to = document.getElementById('transferTo').value;
                    const item = document.getElementById('transferItem').value;
                    const quantity = document.getElementById('transferQuantity').value;
                    const engineer = document.getElementById('transferEngineer').value;
                    const notes = document.getElementById('transferNotes').value;
                    
                    // In a real app, this would save to a database and update inventory
                    console.log('Transferring stock:', {
                        from,
                        to,
                        item,
                        quantity,
                        engineer,
                        notes
                    });
                    
                    alert(`Stock transfer of ${quantity} units of ${item} from ${from} to ${to} has been processed.`);
                    this.reset();
                });
            }
            
            // Download Report
            document.querySelectorAll('.download-report').forEach(button => {
                button.addEventListener('click', function() {
                    const reportType = this.getAttribute('data-report');
                    console.log('Downloading report:', reportType);
                    
                    // In a real app, this would generate and download the report
                    alert(`Preparing to download ${reportType.replace('-', ' ')} report...`);
                    
                    // Simulate download
                    setTimeout(() => {
                        alert(`${reportType.replace('-', ' ')} report downloaded successfully!`);
                    }, 1500);
                });
            });
            
            // User Management
            const addUserBtn = document.getElementById('addUserBtn');
            if (addUserBtn) {
                addUserBtn.addEventListener('click', function() {
                    const modal = new bootstrap.Modal(document.getElementById('userManagementModal'));
                    modal.show();
                });
            }
            
            // Save User
            const saveUserBtn = document.getElementById('saveUserBtn');
            if (saveUserBtn) {
                saveUserBtn.addEventListener('click', function() {
                    const userName = document.getElementById('userName').value;
                    const userEmail = document.getElementById('userEmail').value;
                    const userPassword = document.getElementById('userPassword').value;
                    const userConfirmPassword = document.getElementById('userConfirmPassword').value;
                    const userRole = document.getElementById('userRole').value;
                    const userBranch = document.getElementById('userBranch').value;
                    const userMobile = document.getElementById('userMobile').value;
                    const userStatus = document.getElementById('userStatus').value;
                    
                    // Validate passwords match
                    if (userPassword !== userConfirmPassword) {
                        alert('Passwords do not match!');
                        return;
                    }
                    
                    // In a real app, this would save to a database
                    console.log('Saving user:', {
                        userName,
                        userEmail,
                        userRole,
                        userBranch,
                        userMobile,
                        userStatus
                    });
                    
                    alert(`User "${userName}" saved successfully!`);
                    bootstrap.Modal.getInstance(document.getElementById('userManagementModal')).hide();
                });
            }
            
            // Branch Management
            const addBranchBtn = document.getElementById('addBranchBtn');
            if (addBranchBtn) {
                addBranchBtn.addEventListener('click', function() {
                    const modal = new bootstrap.Modal(document.getElementById('branchManagementModal'));
                    modal.show();
                });
            }
            
            // Save Branch
            const saveBranchBtn = document.getElementById('saveBranchBtn');
            if (saveBranchBtn) {
                saveBranchBtn.addEventListener('click', function() {
                    const branchName = document.getElementById('branchName').value;
                    const branchCode = document.getElementById('branchCode').value;
                    const branchLocation = document.getElementById('branchLocation').value;
                    const branchManager = document.getElementById('branchManager').value;
                    const branchContact = document.getElementById('branchContact').value;
                    const branchEmail = document.getElementById('branchEmail').value;
                    const branchProducts = document.getElementById('branchProducts').value;
                    const isActive = document.getElementById('branchActive').checked;
                    
                    // In a real app, this would save to a database
                    console.log('Saving branch:', {
                        branchName,
                        branchCode,
                        branchLocation,
                        branchManager,
                        branchContact,
                        branchEmail,
                        branchProducts,
                        isActive
                    });
                    
                    alert(`Branch "${branchName}" saved successfully!`);
                    bootstrap.Modal.getInstance(document.getElementById('branchManagementModal')).hide();
                });
            }
            
            // Role Management
            document.querySelectorAll('.edit-role').forEach(button => {
                button.addEventListener('click', function() {
                    const role = this.getAttribute('data-role');
                    document.getElementById('roleName').value = role.charAt(0).toUpperCase() + role.slice(1).replace('-', ' ');
                    
                    // Set role description based on role
                    if (role === 'administrator') {
                        document.getElementById('roleDescription').value = 'Full system access with all permissions';
                    } else if (role === 'branch-manager') {
                        document.getElementById('roleDescription').value = 'Manages branch operations and staff';
                    } else if (role === 'service-engineer') {
                        document.getElementById('roleDescription').value = 'Handles service requests and repairs';
                    }
                    
                    // Set permissions based on role
                    document.querySelectorAll('.role-permission').forEach(checkbox => {
                        checkbox.checked = false;
                    });
                    
                    if (role === 'administrator') {
                        document.getElementById('perm-all').checked = true;
                    } else if (role === 'branch-manager') {
                        document.getElementById('perm-dashboard').checked = true;
                        document.getElementById('perm-sales').checked = true;
                        document.getElementById('perm-service').checked = true;
                        document.getElementById('perm-inventory').checked = true;
                        document.getElementById('perm-reports').checked = true;
                    } else if (role === 'service-engineer') {
                        document.getElementById('perm-dashboard').checked = true;
                        document.getElementById('perm-service').checked = true;
                        document.getElementById('perm-inventory').checked = true;
                        document.getElementById('perm-claims').checked = true;
                    }
                    
                    const modal = new bootstrap.Modal(document.getElementById('roleManagementModal'));
                    modal.show();
                });
            });
            
            // Save Role
            const saveRoleBtn = document.getElementById('saveRoleBtn');
            if (saveRoleBtn) {
                saveRoleBtn.addEventListener('click', function() {
                    const roleName = document.getElementById('roleName').value;
                    const roleDescription = document.getElementById('roleDescription').value;
                    
                    // Get all selected permissions
                    const permissions = [];
                    document.querySelectorAll('.role-permission:checked').forEach(checkbox => {
                        permissions.push(checkbox.value);
                    });
                    
                    // In a real app, this would save to a database
                    console.log('Saving role:', {
                        roleName,
                        roleDescription,
                        permissions
                    });
                    
                    alert(`Role "${roleName}" permissions saved successfully!`);
                    bootstrap.Modal.getInstance(document.getElementById('roleManagementModal')).hide();
                });
            }
            
            // Product Management
            const addProductBtn = document.getElementById('addProductBtn');
            if (addProductBtn) {
                addProductBtn.addEventListener('click', function() {
                    const modal = new bootstrap.Modal(document.getElementById('productManagementModal'));
                    modal.show();
                });
            }
            
            // Save Product
            const saveProductBtn = document.getElementById('saveProductBtn');
            if (saveProductBtn) {
                saveProductBtn.addEventListener('click', function() {
                    const productName = document.getElementById('productName').value;
                    const productCategory = document.getElementById('productCategory').value;
                    const productBranch = document.getElementById('productBranch').value;
                    const productPrice = document.getElementById('productPrice').value;
                    const productServiceable = document.getElementById('productServiceable').checked;
                    const productAmcAvailable = document.getElementById('productAmcAvailable').checked;
                    const productActive = document.getElementById('productActive').checked;
                    
                    // In a real app, this would save to a database
                    console.log('Saving product:', {
                        productName,
                        productCategory,
                        productBranch,
                        productPrice,
                        productServiceable,
                        productAmcAvailable,
                        productActive
                    });
                    
                    alert(`Product "${productName}" saved successfully!`);
                    bootstrap.Modal.getInstance(document.getElementById('productManagementModal')).hide();
                });
            }
            
            // PIN Mapping Management
            const addPinMappingBtn = document.getElementById('addPinMappingBtn');
            if (addPinMappingBtn) {
                addPinMappingBtn.addEventListener('click', function() {
                    const modal = new bootstrap.Modal(document.getElementById('pinMappingManagementModal'));
                    modal.show();
                });
            }
            
            // Save PIN Mapping
            const savePinMappingBtn = document.getElementById('savePinMappingBtn');
            if (savePinMappingBtn) {
                savePinMappingBtn.addEventListener('click', function() {
                    const pinCode = document.getElementById('pinCode').value;
                    const pinArea = document.getElementById('pinArea').value;
                    const pinCity = document.getElementById('pinCity').value;
                    const pinState = document.getElementById('pinState').value;
                    const pinBranch = document.getElementById('pinBranch').value;
                    const pinEngineer = document.getElementById('pinEngineer').value;
                    const pinActive = document.getElementById('pinActive').checked;
                    
                    // In a real app, this would save to a database
                    console.log('Saving PIN mapping:', {
                        pinCode,
                        pinArea,
                        pinCity,
                        pinState,
                        pinBranch,
                        pinEngineer,
                        pinActive
                    });
                    
                    alert(`PIN mapping for ${pinArea} (${pinCode}) saved successfully!`);
                    bootstrap.Modal.getInstance(document.getElementById('pinMappingManagementModal')).hide();
                });
            }
            
            // New AMC Contract
            const newAmcBtn = document.getElementById('newAmcBtn');
            const newAmcContractBtn = document.getElementById('newAmcContractBtn');
            
            [newAmcBtn, newAmcContractBtn].forEach(btn => {
                if (btn) {
                    btn.addEventListener('click', function() {
                        // Generate a new contract ID
                        const contractId = 'AMC' + Math.floor(Math.random() * 1000).toString().padStart(3, '0');
                        
                        // Reset form
                        document.getElementById('amcContractForm').reset();
                        document.getElementById('amcContractId').value = contractId;
                        
                        // Set default dates
                        const today = new Date().toISOString().split('T')[0];
                        document.getElementById('amcStartDate').value = today;
                        
                        const nextYear = new Date();
                        nextYear.setFullYear(nextYear.getFullYear() + 1);
                        document.getElementById('amcEndDate').value = nextYear.toISOString().split('T')[0];
                        
                        // Make form editable
                        document.querySelectorAll('#amcContractForm input, #amcContractForm select, #amcContractForm textarea').forEach(input => {
                            input.removeAttribute('readonly');
                            input.removeAttribute('disabled');
                        });
                        
                        // Keep contract ID readonly
                        document.getElementById('amcContractId').setAttribute('readonly', true);
                        
                        const modal = new bootstrap.Modal(document.getElementById('amcContractModal'));
                        modal.show();
                    });
                }
            });
            
            // New Service Request
            const newServiceBtn = document.getElementById('newServiceBtn');
            if (newServiceBtn) {
                newServiceBtn.addEventListener('click', function() {
                    // Switch to New Call tab
                    const newCallTab = document.getElementById('new-call-tab');
                    if (newCallTab) {
                        newCallTab.click();
                    }
                });
            }
            
            // New Purchase Order
            const newPurchaseOrderBtn = document.getElementById('newPurchaseOrderBtn');
            if (newPurchaseOrderBtn) {
                newPurchaseOrderBtn.addEventListener('click', function() {
                    alert('New Purchase Order form would open to create a new purchase order.');
                });
            }
            
            // New Claim
            const newClaimBtn = document.getElementById('newClaimBtn');
            if (newClaimBtn) {
                newClaimBtn.addEventListener('click', function() {
                    alert('New Claim form would open to create a new claim.');
                });
            }
            
            // Import Leads
            const importLeadsBtn = document.getElementById('importLeadsBtn');
            const importLeadsBtn2 = document.getElementById('importLeadsBtn2');
            
            [importLeadsBtn, importLeadsBtn2].forEach(btn => {
                if (btn) {
                    btn.addEventListener('click', function() {
                        alert('Import leads functionality would open a file selection dialog and process the uploaded file.');
                    });
                }
            });
            
            // Export Leads
            const exportLeadsBtn = document.getElementById('exportLeadsBtn');
            const exportLeadsBtn2 = document.getElementById('exportLeadsBtn2');
            
            [exportLeadsBtn, exportLeadsBtn2].forEach(btn => {
                if (btn) {
                    btn.addEventListener('click', function() {
                        alert('Export leads functionality would generate and download a file with the filtered leads data.');
                    });
                }
            });
            
            // Import Leads Form
            const importLeadsForm = document.getElementById('importLeadsForm');
            if (importLeadsForm) {
                importLeadsForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    const file = document.getElementById('importFile').files[0];
                    const source = document.getElementById('importSource').value;
                    const hasHeader = document.getElementById('importHeader').checked;
                    
                    if (!file) {
                        alert('Please select a file to import.');
                        return;
                    }
                    
                    if (!source) {
                        alert('Please select a source platform.');
                        return;
                    }
                    
                    // In a real app, this would process the file and save to database
                    console.log('Importing leads:', {
                        fileName: file.name,
                        fileSize: file.size,
                        source,
                        hasHeader
                    });
                    
                    alert(`Leads imported successfully from ${source}!`);
                    this.reset();
                });
            }
            
            // Export Leads Form
            const exportLeadsForm = document.getElementById('exportLeadsForm');
            if (exportLeadsForm) {
                exportLeadsForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    const startDate = document.getElementById('exportStartDate').value;
                    const endDate = document.getElementById('exportEndDate').value;
                    const source = document.getElementById('exportSource').value;
                    const format = document.getElementById('exportFormat').value;
                    
                    if (!startDate || !endDate) {
                        alert('Please select both start and end dates.');
                        return;
                    }
                    
                    // In a real app, this would generate and download the file
                    console.log('Exporting leads:', {
                        startDate,
                        endDate,
                        source,
                        format
                    });
                    
                    alert(`Leads exported successfully in ${format.toUpperCase()} format!`);
                });
            }
            
            // Invoice Items Management
            function calculateInvoiceTotals() {
                let subtotal = 0;
                document.querySelectorAll('#invoiceItemsTable tbody tr').forEach(row => {
                    const quantity = parseFloat(row.querySelector('.item-quantity').value) || 0;
                    const price = parseFloat(row.querySelector('.item-price').value) || 0;
                    const total = quantity * price;
                    row.querySelector('.item-total').textContent = `₹${total.toFixed(2)}`;
                    subtotal += total;
                });
                
                const taxOption = document.querySelector('input[name="taxOption"]:checked').value;
                const tax = parseFloat(document.getElementById('invoiceTax').value) || 0;
                let taxAmount = 0;
                
                if (taxOption === 'withTax') {
                    taxAmount = subtotal * (18 / 100); // Fixed 18% tax
                } else if (taxOption === 'customTax') {
                    taxAmount = subtotal * (tax / 100); // Custom tax percentage
                }
                // If withoutTax, taxAmount remains 0
                
                const total = subtotal + taxAmount;
                
                document.getElementById('invoiceSubtotal').value = `₹${subtotal.toFixed(2)}`;
                document.getElementById('invoiceTotal').value = `₹${total.toFixed(2)}`;
            }
            
            // Function to toggle tax input field visibility
            function toggleTaxInputVisibility() {
                const taxOption = document.querySelector('input[name="taxOption"]:checked').value;
                const taxInputContainer = document.getElementById('invoiceTax').parentElement;
                
                if (taxOption === 'customTax') {
                    taxInputContainer.style.display = 'block';
                } else if (taxOption === 'withTax') {
                    document.getElementById('invoiceTax').value = '18'; // Set default 18% for withTax
                    taxInputContainer.style.display = 'none';
                } else {
                    document.getElementById('invoiceTax').value = '0'; // Set 0% for withoutTax
                    taxInputContainer.style.display = 'none';
                }
                
                calculateInvoiceTotals();
            }
            
            // Initialize tax input visibility
            document.addEventListener('DOMContentLoaded', function() {
                toggleTaxInputVisibility();
            });
            
            // Add event listeners for invoice item inputs
            document.addEventListener('input', function(e) {
                if (e.target.matches('#invoiceItemsTable .item-quantity, #invoiceItemsTable .item-price, #invoiceTax')) {
                    calculateInvoiceTotals();
                }
            });
            
            // Add event listeners for tax option changes
            document.querySelectorAll('input[name="taxOption"]').forEach(radio => {
                radio.addEventListener('change', toggleTaxInputVisibility);
            });
            
            // Add new invoice item
            const addInvoiceItemBtn = document.getElementById('addInvoiceItem');
            if (addInvoiceItemBtn) {
                addInvoiceItemBtn.addEventListener('click', function() {
                    const tbody = document.querySelector('#invoiceItemsTable tbody');
                    const newRow = document.createElement('tr');
                    newRow.innerHTML = `
                        <td>
                            <div class="input-group">
                                <input type="text" class="form-control item-name" placeholder="Item name">
                                <button class="btn btn-outline-secondary search-inventory-btn" type="button">
                                    <i class="bi bi-search"></i>
                                </button>
                            </div>
                        </td>
                        <td><input type="number" class="form-control item-quantity" placeholder="1" value="1"></td>
                        <td><input type="number" class="form-control item-price" placeholder="0"></td>
                        <td class="item-total">₹0</td>
                        <td><button type="button" class="btn btn-sm btn-danger remove-item"><i class="bi bi-trash"></i></button></td>
                    `;
                    tbody.appendChild(newRow);
                    
                    // Add event listener for the search inventory button
                    newRow.querySelector('.search-inventory-btn').addEventListener('click', function() {
                        searchInventoryItems(this.closest('tr'));
                    });
                });
            }
            
            // Remove invoice item
            document.addEventListener('click', function(e) {
                if (e.target.matches('#invoiceItemsTable .remove-item') || e.target.matches('#invoiceItemsTable .remove-item i')) {
                    const row = e.target.closest('tr');
                    row.remove();
                    calculateInvoiceTotals();
                }
            });
            
            // Save Invoice
            const saveInvoiceBtn = document.getElementById('saveInvoiceBtn');
            if (saveInvoiceBtn) {
                saveInvoiceBtn.addEventListener('click', function() {
                    const customer = document.getElementById('invoiceCustomer').value;
                    const mobile = document.getElementById('invoiceMobile').value;
                    const date = document.getElementById('invoiceDate').value;
                    const total = document.getElementById('invoiceTotal').value;
                    const paymentStatus = document.getElementById('invoicePaymentStatus').value;
                    
                    // Get invoice items for inventory update
                    const invoiceItems = [];
                    document.querySelectorAll('#invoiceItemsTable tbody tr').forEach(row => {
                        const itemName = row.querySelector('td:first-child input').value;
                        const quantity = parseInt(row.querySelector('.item-quantity').value) || 0;
                        const price = parseFloat(row.querySelector('.item-price').value) || 0;
                        
                        if (itemName && quantity > 0) {
                            invoiceItems.push({ name: itemName, quantity: quantity, price: price });
                        }
                    });
                    
                    // In a real app, this would save to a database
                    console.log('Saving invoice:', {
                        customer,
                        mobile,
                        date,
                        total,
                        paymentStatus,
                        items: invoiceItems
                    });
                    
                    // Update inventory when invoice is saved
                    if (invoiceItems.length > 0) {
                        updateInventoryForSales(invoiceItems, customer);
                    }
                    
                    alert(`Invoice for "${customer}" saved successfully!`);
                    bootstrap.Modal.getInstance(document.getElementById('generateInvoiceModal')).hide();
                });
            }
            
            // Function to update inventory when items are sold
            function updateInventoryForSales(items, customer) {
                // Get current date in DD-MMM-YYYY format
                const today = new Date();
                const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
                const formattedDate = `${today.getDate().toString().padStart(2, '0')}-${months[today.getMonth()]}-${today.getFullYear()}`;
                
                // Generate a random invoice ID for demo purposes
                const invoiceId = 'INV' + Math.floor(1000 + Math.random() * 9000);
                
                // For each item sold, update inventory
                items.forEach(item => {
                    // 1. Reduce stock quantity (in a real app, this would update a database)
                    console.log(`Reducing stock for ${item.name} by ${item.quantity} units`);
                    
                    // 2. Add entry to stock adjustment history (in a real app)
                    console.log(`Recording stock adjustment: ${item.name}, -${item.quantity} units, reason: Sale to ${customer}`);
                });
                
                console.log(`Inventory updated for invoice ${invoiceId}`);
            }
            
            // Quotation Items Management
            function calculateQuotationTotals() {
                let subtotal = 0;
                document.querySelectorAll('#quotationItemsTable tbody tr').forEach(row => {
                    const quantity = parseFloat(row.querySelector('.item-quantity').value) || 0;
                    const price = parseFloat(row.querySelector('.item-price').value) || 0;
                    const total = quantity * price;
                    row.querySelector('.item-total').textContent = `₹${total.toFixed(2)}`;
                    subtotal += total;
                });
                
                const tax = parseFloat(document.getElementById('quotationTax').value) || 0;
                const taxAmount = subtotal * (tax / 100);
                const total = subtotal + taxAmount;
                
                document.getElementById('quotationSubtotal').value = `₹${subtotal.toFixed(2)}`;
                document.getElementById('quotationTotal').value = `₹${total.toFixed(2)}`;
            }
            
            // Add event listeners for quotation item inputs
            document.addEventListener('input', function(e) {
                if (e.target.matches('#quotationItemsTable .item-quantity, #quotationItemsTable .item-price, #quotationTax')) {
                    calculateQuotationTotals();
                }
            });
            
            // Add new quotation item
            const addQuotationItemBtn = document.getElementById('addQuotationItem');
            if (addQuotationItemBtn) {
                addQuotationItemBtn.addEventListener('click', function() {
                    const tbody = document.querySelector('#quotationItemsTable tbody');
                    const newRow = document.createElement('tr');
                    newRow.innerHTML = `
                        <td><input type="text" class="form-control" placeholder="Item name"></td>
                        <td><input type="number" class="form-control item-quantity" placeholder="1" value="1"></td>
                        <td><input type="number" class="form-control item-price" placeholder="0"></td>
                        <td class="item-total">₹0</td>
                        <td><button type="button" class="btn btn-sm btn-danger remove-item"><i class="bi bi-trash"></i></button></td>
                    `;
                    tbody.appendChild(newRow);
                });
            }
            
            // Remove quotation item
            document.addEventListener('click', function(e) {
                if (e.target.matches('#quotationItemsTable .remove-item') || e.target.matches('#quotationItemsTable .remove-item i')) {
                    const row = e.target.closest('tr');
                    row.remove();
                    calculateQuotationTotals();
                }
            });
            
            // Save Quotation
            const saveQuotationBtn = document.getElementById('saveQuotationBtn');
            if (saveQuotationBtn) {
                saveQuotationBtn.addEventListener('click', function() {
                    const customer = document.getElementById('quotationCustomer').value;
                    const mobile = document.getElementById('quotationMobile').value;
                    const date = document.getElementById('quotationDate').value;
                    const validTill = document.getElementById('quotationValidTill').value;
                    const total = document.getElementById('quotationTotal').value;
                    const status = document.getElementById('quotationStatus').value;
                    
                    // In a real app, this would save to a database
                    console.log('Saving quotation:', {
                        customer,
                        mobile,
                        date,
                        validTill,
                        total,
                        status
                    });
                    
                    alert(`Quotation for "${customer}" saved successfully!`);
                    bootstrap.Modal.getInstance(document.getElementById('newQuotationModal')).hide();
                });
            }
            
            // Print Invoice from Modal
            const printInvoiceBtn = document.getElementById('printInvoiceBtn');
            if (printInvoiceBtn) {
                printInvoiceBtn.addEventListener('click', function() {
                    window.print();
                });
            }
            
            // Initialize tooltips
            const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
            tooltipTriggerList.map(function (tooltipTriggerEl) {
                return new bootstrap.Tooltip(tooltipTriggerEl);
            });
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- ====== MISSING MODALS (CRITICAL FIX) ====== -->

<!-- Invoice Details Modal -->
<div class="modal fade" id="invoiceDetailsModal" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title">Invoice Details</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <div class="row mb-3">
          <div class="col-md-6"><strong>Invoice Number:</strong> <span id="modalInvoiceNumber">-</span></div>
          <div class="col-md-6"><strong>Date:</strong> <span id="modalInvoiceDate">-</span></div>
        </div>
        <div class="row mb-3">
          <div class="col-md-6"><strong>Customer:</strong> <span id="modalCustomerName">-</span></div>
          <div class="col-md-6"><strong>Mobile:</strong> <span id="modalCustomerMobile">-</span></div>
        </div>
        <div class="row mb-3">
          <div class="col-md-12"><strong>Email:</strong> <span id="modalCustomerEmail">-</span></div>
        </div>
        <hr>
        <h6>Items:</h6>
        <table class="table table-sm">
          <thead>
            <tr><th>Item</th><th>Qty</th><th>Price</th><th>Total</th></tr>
          </thead>
          <tbody id="modalInvoiceItems"></tbody>
        </table>
        <hr>
        <div class="text-end"><strong>Total: <span id="modalTotalAmount">-</span></strong></div>
        <div class="text-end"><strong>Status: <span id="modalPaymentStatus" class="badge bg-success">-</span></strong></div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary" id="printInvoiceBtn">Print</button>
        <button class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

    <!-- Service Details Modal -->
<div class="modal fade" id="serviceDetailsModal" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header bg-warning text-dark">
        <h5 class="modal-title">Service Details</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <div class="row mb-3">
          <div class="col-md-6"><strong>Service ID:</strong> <span id="modalServiceId">-</span></div>
          <div class="col-md-6"><strong>Date:</strong> <span id="modalServiceDate">-</span></div>
        </div>
        <div class="row mb-3">
          <div class="col-md-6"><strong>Customer:</strong> <span id="modalServiceCustomer">-</span></div>
          <div class="col-md-6"><strong>Mobile:</strong> <span id="modalServiceMobile">-</span></div>
        </div>
        <div class="row mb-3">
          <div class="col-md-6"><strong>Product:</strong> <span id="modalServiceProduct">-</span></div>
          <div class="col-md-6"><strong>Problem:</strong> <span id="modalServiceProblem">-</span></div>
        </div>
        <div class="row mb-3">
          <div class="col-md-6"><strong>Status:</strong> <span id="modalServiceStatus" class="badge bg-info">-</span></div>
          <div class="col-md-6"><strong>Assigned To:</strong> <span id="modalServiceAssignedTo">-</span></div>
        </div>
        <hr>
        <h6>Service History:</h6>
        <table class="table table-sm">
          <thead><tr><th>Date</th><th>Action</th><th>Notes</th><th>By</th></tr></thead>
          <tbody id="modalServiceHistory"></tbody>
        </table>
      </div>
      <div class="modal-footer">
        <button class="btn btn-success" id="completeServiceBtn">Complete Service</button>
        <button class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

    <!-- ====== CRITICAL: CRM DATABASE & DATA MANAGEMENT ====== -->
<script>
// ===== CRM DATABASE SYSTEM (localStorage) =====
class CRMDatabase {
  constructor() {
    this.db = {
      invoices: [],
      sales: [],
      services: [],
      quotations: [],
      orders: [],
      payments: [],
      customers: [],
      leads: []
    };
    this.loadFromStorage();
  }
  
  loadFromStorage() {
    const saved = localStorage.getItem('crmDatabase');
    if (saved) {
      try {
        this.db = JSON.parse(saved);
      } catch(e) {
        console.error('Error loading database:', e);
      }
    }
  }
  
  saveToStorage() {
    localStorage.setItem('crmDatabase', JSON.stringify(this.db));
  }
  
  // Invoice Operations
  saveInvoice(invoiceData) {
    invoiceData.id = 'INV' + Date.now();
    invoiceData.createdDate = new Date().toLocaleDateString('en-GB');
    this.db.invoices.push(invoiceData);
    this.saveToStorage();
    return invoiceData;
  }
  
  getInvoices() {
    return this.db.invoices;
  }
  
  getInvoiceById(id) {
    return this.db.invoices.find(inv => inv.id === id);
  }
  
  // Service Operations
  saveService(serviceData) {
    serviceData.id = 'SRV' + Date.now();
    serviceData.createdDate = new Date().toLocaleDateString('en-GB');
    serviceData.status = 'Pending';
    this.db.services.push(serviceData);
    this.saveToStorage();
    return serviceData;
  }
  
  getServices() {
    return this.db.services;
  }
  
  updateService(id, updates) {
    const service = this.db.services.find(s => s.id === id);
    if (service) {
      Object.assign(service, updates);
      this.saveToStorage();
    }
    return service;
  }
  
  // Quotation Operations
  saveQuotation(quotationData) {
    quotationData.id = 'QT' + Date.now();
    quotationData.createdDate = new Date().toLocaleDateString('en-GB');
    quotationData.status = quotationData.status || 'Pending';
    this.db.quotations.push(quotationData);
    this.saveToStorage();
    return quotationData;
  }
  
  getQuotations() {
    return this.db.quotations;
  }
}

// Initialize CRM Database
const crmDB = new CRMDatabase();

// ===== LOAD DATA ON PAGE LOAD =====
window.addEventListener('load', function() {
  loadAllDataToTables();
  updateDashboardStats();
});

function loadAllDataToTables() {
  // Load invoices to table
  updateInvoiceTable();
  updateServiceTable();
}

function updateDashboardStats() {
  const stats = {
    totalSales: crmDB.getInvoices().reduce((sum, inv) => sum + (parseFloat(inv.amount) || 0), 0),
    serviceCount: crmDB.getServices().length,
    pendingPayments: crmDB.getInvoices().filter(inv => inv.status === 'Pending').length
  };
  
  // Update dashboard if elements exist
  const salesTotalEl = document.querySelector('[data-stat="totalSales"]');
  if (salesTotalEl) {
    salesTotalEl.textContent = '₹' + stats.totalSales.toLocaleString();
  }
}
</script>
    
<!-- ===== FORM HANDLERS WITH DATA PERSISTENCE ===== -->
<script>
// Override the existing saveInvoiceBtn handler
const oldSaveInvoiceBtn = document.getElementById('saveInvoiceBtn');
if (oldSaveInvoiceBtn) {
  oldSaveInvoiceBtn.replaceWith(oldSaveInvoiceBtn.cloneNode(true));
}

document.addEventListener('DOMContentLoaded', function() {
  // ===== INVOICE FORM HANDLER =====
  const saveInvoiceBtn = document.getElementById('saveInvoiceBtn');
  if (saveInvoiceBtn) {
    saveInvoiceBtn.addEventListener('click', function(e) {
      e.preventDefault();
      
      const invoiceData = {
        customer: document.getElementById('invoiceCustomer')?.value || 'Unknown',
        mobile: document.getElementById('invoiceMobile')?.value || '',
        email: document.getElementById('invoiceEmail')?.value || '',
        date: document.getElementById('invoiceDate')?.value || new Date().toISOString().split('T')[0],
        amount: document.getElementById('invoiceTotal')?.value?.replace('₹', '').trim() || '0',
        paymentStatus: document.getElementById('invoicePaymentStatus')?.value || 'Pending',
        items: []
      };
      
      // Get invoice items
      document.querySelectorAll('#invoiceItemsTable tbody tr').forEach(row => {
        const itemName = row.querySelector('input[type="text"]')?.value;
        const qty = row.querySelector('.item-quantity')?.value;
        const price = row.querySelector('.item-price')?.value;
        
        if (itemName && qty && price) {
          invoiceData.items.push({
            name: itemName,
            quantity: qty,
            price: price,
            total: qty * price
          });
        }
      });
      
      // Save to database
      const saved = crmDB.saveInvoice(invoiceData);
      
      // Show success message
      alert(`✓ Invoice #${saved.id} saved successfully!\n\nCustomer: ${saved.customer}\nAmount: ₹${saved.amount}`);
      
      // Clear form
      document.getElementById('generateInvoiceModal')?.querySelector('form')?.reset();
      
      // Hide modal
      const modal = bootstrap.Modal.getInstance(document.getElementById('generateInvoiceModal'));
      if (modal) modal.hide();
      
      // Update tables
      updateInvoiceTable();
      updateDashboardStats();
    });
  }
  
  // ===== SERVICE FORM HANDLER =====
  const submitServiceBtn = document.querySelector('#newCallForm button[type="submit"]');
  if (submitServiceBtn) {
    submitServiceBtn.addEventListener('click', function(e) {
      e.preventDefault();
      
      const serviceData = {
        customerName: document.getElementById('customerName')?.value || 'Unknown',
        customerPhone: document.getElementById('customerPhone')?.value || '',
        customerEmail: document.getElementById('customerEmail')?.value || '',
        productCategory: document.getElementById('productCategory')?.value || '',
        productBrand: document.getElementById('productBrand')?.value || '',
        productModel: document.getElementById('productModel')?.value || '',
        problemDescription: document.getElementById('problemDescription')?.value || '',
        priority: document.getElementById('priority')?.value || 'Medium',
        preferredDate: document.getElementById('preferredDate')?.value || ''
      };
      
      // Save service
      const saved = crmDB.saveService(serviceData);
      
      alert(`✓ Service Request #${saved.id} created!\n\nCustomer: ${saved.customerName}\nPriority: ${saved.priority}`);
      
      // Reset form
      document.getElementById('newCallForm')?.reset();
      document.querySelectorAll('.form-step').forEach(el => el.classList.remove('active'));
      document.getElementById('step1')?.classList.add('active');
      
      // Update tables
      updateServiceTable();
    });
  }
  
  // ===== QUOTATION FORM HANDLER =====
  const saveQuotationBtn = document.getElementById('saveQuotationBtn');
  if (saveQuotationBtn) {
    saveQuotationBtn.addEventListener('click', function(e) {
      e.preventDefault();
      
      const quotationData = {
        customer: document.getElementById('quotationCustomer')?.value || 'Unknown',
        mobile: document.getElementById('quotationMobile')?.value || '',
        email: document.getElementById('quotationEmail')?.value || '',
        date: document.getElementById('quotationDate')?.value || new Date().toISOString().split('T')[0],
        validTill: document.getElementById('quotationValidTill')?.value || '',
        amount: document.getElementById('quotationTotal')?.value?.replace('₹', '').trim() || '0',
        status: document.getElementById('quotationStatus')?.value || 'Pending',
        items: []
      };
      
      // Get items
      document.querySelectorAll('#quotationItemsTable tbody tr').forEach(row => {
        const itemName = row.querySelector('input[type="text"]')?.value;
        const qty = row.querySelector('.item-quantity')?.value;
        const price = row.querySelector('.item-price')?.value;
        
        if (itemName && qty && price) {
          quotationData.items.push({ name: itemName, quantity: qty, price: price });
        }
      });
      
      // Save quotation
      const saved = crmDB.saveQuotation(quotationData);
      
      alert(`✓ Quotation #${saved.id} saved!\n\nCustomer: ${saved.customer}\nAmount: ₹${saved.amount}\nValid Till: ${saved.validTill}`);
      
      document.getElementById('newQuotationModal')?.querySelector('form')?.reset();
      const modal = bootstrap.Modal.getInstance(document.getElementById('newQuotationModal'));
      if (modal) modal.hide();
    });
  }
  
  // ===== LOAD EXISTING DATA WHEN VIEWING =====
  document.querySelectorAll('.view-invoice').forEach(btn => {
    btn.addEventListener('click', function(e) {
      e.preventDefault();
      const invoiceId = this.getAttribute('data-invoice');
      const invoice = crmDB.getInvoiceById(invoiceId);
      
      if (invoice) {
        document.getElementById('modalInvoiceNumber').textContent = invoice.id;
        document.getElementById('modalInvoiceDate').textContent = invoice.date;
        document.getElementById('modalCustomerName').textContent = invoice.customer;
        document.getElementById('modalCustomerMobile').textContent = invoice.mobile;
        document.getElementById('modalCustomerEmail').textContent = invoice.email;
        document.getElementById('modalTotalAmount').textContent = '₹' + invoice.amount;
        document.getElementById('modalPaymentStatus').textContent = invoice.paymentStatus;
        
        // Populate items
        const itemsTable = document.getElementById('modalInvoiceItems');
        if (itemsTable) {
          itemsTable.innerHTML = '';
          invoice.items.forEach(item => {
            const row = document.createElement('tr');
            row.innerHTML = `<td>${item.name}</td><td>${item.quantity}</td><td>₹${item.price}</td><td>₹${item.total}</td>`;
            itemsTable.appendChild(row);
          });
        }
        
        const modal = new bootstrap.Modal(document.getElementById('invoiceDetailsModal'));
        modal.show();
      }
    });
  });
});

// Update invoice table with saved data
function updateInvoiceTable() {
  const invoices = crmDB.getInvoices();
  // Find and update the invoice table
  const tables = document.querySelectorAll('table');
  tables.forEach(table => {
    const thead = table.querySelector('thead');
    if (thead && thead.textContent.includes('Invoice No')) {
      const tbody = table.querySelector('tbody');
      if (tbody && invoices.length > 0) {
        // Add new invoices to table
        const latestInvoice = invoices[invoices.length - 1];
        const existingRow = tbody.querySelector(`tr[data-invoice="${latestInvoice.id}"]`);
        
        if (!existingRow) {
          const row = document.createElement('tr');
          row.setAttribute('data-invoice', latestInvoice.id);
          row.innerHTML = `
            <td>${latestInvoice.createdDate}</td>
            <td>SALE</td>
            <td>${latestInvoice.id}</td>
            <td>${latestInvoice.mobile}</td>
            <td>${latestInvoice.customer}</td>
            <td>${latestInvoice.email}</td>
            <td>₹${latestInvoice.amount}</td>
            <td><span class="status-badge status-${latestInvoice.paymentStatus.toLowerCase()}">${latestInvoice.paymentStatus}</span></td>
          `;
          tbody.insertBefore(row, tbody.firstChild);
        }
      }
    }
  });
}

// Update service table with saved data
function updateServiceTable() {
const services = crmDB.getServices();
  
  // Populate service request table
  const tables = document.querySelectorAll('table');
  tables.forEach(table => {
    const thead = table.querySelector('thead');
if (thead && thead.textContent.includes('Service Requests')) {      const tbody = table.querySelector('tbody');
      if (tbody && services.length > 0) {
        // Add new service to table
        const latestService = services[services.length - 1];
        const existingRow = tbody.querySelector(`tr[data-service="${latestService.id}"]`);
        
        if (!existingRow) {
          const row = document.createElement('tr');
          row.setAttribute('data-service', latestService.id);
          row.innerHTML = `
<td>${latestService.id}</td>
            <td>${latestService.createdDate}</td>
            <td>${latestService.customerName}</td>
            <td>${latestService.customerPhone}</td>
            <td>${latestService.productCategory}</td>
            <td>${latestService.problemDescription}</td>
            <td><span class="status-badge status-${latestService.status.toLowerCase()}">${latestService.status}</span></td>
            <td>-</td>
          tbody.insertBefore(row, tbody.firstChild);
        }
      }
    }
  });
}

// ===== FORM SUBMIT HANDLERS FOR DATA PERSISTENCE =====

// Invoice Form Submit Handler
const invoiceForm = document.getElementById('invoiceForm');
if (invoiceForm) {
  invoiceForm.addEventListener('submit', function(e) {
    e.preventDefault();
    
    const invoiceData = {
      id: 'INV' + Date.now(),
      customerName: document.getElementById('customerName')?.value || '',
      mobile: document.getElementById('customerMobile')?.value || '',
      email: document.getElementById('customerEmail')?.value || '',
      amount: parseFloat(document.getElementById('invoiceAmount')?.value || 0),
      description: document.getElementById('invoiceDescription')?.value || '',
      status: 'Pending',
      createdDate: new Date().toLocaleDateString('en-GB')
    };
    
    crmDB.saveInvoice(invoiceData);
    updateInvoiceTable();
    invoiceForm.reset();
    alert('Invoice saved successfully!');
  });
}

// Service Form Submit Handler
const serviceForm = document.getElementById('serviceForm');
if (serviceForm) {
  serviceForm.addEventListener('submit', function(e) {
    e.preventDefault();
    
    const serviceData = {
      id: 'SR' + String(crmDB.getServices().length + 1).padStart(3, '0'),
      customerName: document.getElementById('serviceCustName')?.value || '',
      mobile: document.getElementById('serviceCustMobile')?.value || '',
      email: document.getElementById('serviceCustEmail')?.value || '',
      product: document.getElementById('serviceProduct')?.value || '',
      amount: parseFloat(document.getElementById('serviceAmount')?.value || 0),
      description: document.getElementById('serviceProblem')?.value || '',
      status: 'Pending',
      createdDate: new Date().toLocaleDateString('en-GB')
    };
    
    crmDB.saveService(serviceData);
    updateServiceTable();
    serviceForm.reset();
    alert('Service request saved successfully!');
  });
}
</script>
    
</body>
</html>
